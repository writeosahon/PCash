{"version":3,"sources":["controller.js"],"names":[],"mappings":"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","file":"controller-compiled.js","sourcesContent":["/**\r\n * Created by UTOPIA SOFTWARE on 20/03/2017.\r\n */\r\n\r\n/**\r\n * file defines all View-Models, Controllers and Event Listeners used by the app\r\n *\r\n * The 'utopiasoftware.saveup' namespace has being defined in the base js file.\r\n * The author uses the terms 'method' and function interchangeably; likewise the terms 'attribute' and 'property' are\r\n * also used interchangeably\r\n */\r\n\r\n\r\n// define the controller namespace\r\nutopiasoftware.saveup.controller = {\r\n\r\n    /**\r\n     * method is used to handle the special event created by the intel xdk developer library. The special event (app.Ready)\r\n     * is triggered when ALL the hybrid app pluigins have been loaded/readied and also the document DOM content is ready\r\n     */\r\n    appReady: () => {\r\n\r\n        // initialise the onsen library\r\n        ons.ready(function () {\r\n            // set the default handler for the app\r\n            ons.setDefaultDeviceBackButtonListener(function(){\r\n                console.log(\"DEFAULT BACK BUTTON LISTENER\");\r\n\r\n            });\r\n\r\n\r\n            // listen for \"HOLD\" events that are triggered in the app\r\n            document.addEventListener('hold', function(event) {\r\n\r\n                // check if the backspace button in the 'security-pin-lock-modal' is held\r\n                if ($(event.target).closest('#security-pin-lock-backspace', '#security-pin-lock-modal').\r\n                    is('#security-pin-lock-backspace')) { //backspace button has been held\r\n                    // remove the entire contents of the input field\r\n                    $('#security-pin-lock-modal #security-pin-lock-pin').val(\"\");\r\n                    return; // exit\r\n                }\r\n\r\n\r\n            });\r\n\r\n            if(utopiasoftware.saveup.model.isAppReady === false){ // if app has not completed loading\r\n                // displaying prepping message\r\n                $('#loader-modal-message').html(\"Preparing App...\");\r\n                $('#loader-modal').get(0).show(); // show loader\r\n            }\r\n\r\n            // check if the user is currently logged in\r\n            if(window.localStorage.getItem(\"app-status\") && window.localStorage.getItem(\"app-status\") != \"\"){ // user is logged in\r\n                //set the first page to be displayed to be the login page\r\n                $('ons-splitter').get(0).content.load(\"login-template\");\r\n            }\r\n            else{ // user has NOT been logged in\r\n                // set the first page to be displayed to be the onboarding page\r\n                $('ons-splitter').get(0).content.load(\"onboarding-template\");\r\n            }\r\n\r\n\r\n            // initialise verify-account bottom sheet plugin\r\n            $('#verify-account-bottom-sheet').modal({\r\n                ready: function(){ // callback for when bottom sheet is opened\r\n                    // flag a state that indicates the bottom sheet is currently open\r\n                    $('#verify-account-bottom-sheet').data(\"saveupSheetState\", \"open\");\r\n                },\r\n                complete: function(){ // callback for when bottom sheet is closed\r\n                    // flag a state that indicates the bottom sheet is currently closed\r\n                    $('#verify-account-bottom-sheet').data(\"saveupSheetState\", \"closed\");\r\n                }\r\n            });\r\n\r\n            // add back button listener for the SECURE PIN LOCK MODAL\r\n            $('#security-pin-lock-modal').get(0).onDeviceBackButton =\r\n                utopiasoftware.saveup.controller.securityPinLockModalViewModel.exitButtonClicked;\r\n\r\n            // add back button listener for the transfer-cash-bank-authorise MODAL\r\n            $('#transfer-cash-bank-authorise-modal').get(0).onDeviceBackButton = function(){\r\n                // hide the transfer-cash-bank-authorise-modal\r\n                $('#transfer-cash-bank-authorise-modal').get(0).hide();\r\n                // change the src for transfer-cash-bank-authorise-iframe to reset\r\n                $('#transfer-cash-bank-authorise-iframe').attr(\"src\", \"\");\r\n            };\r\n\r\n        });\r\n\r\n        /** ADD CUSTOM VALIDATORS FOR PARSLEY HERE **/\r\n        Parsley.addAsyncValidator(\"financialcardcheck\",\r\n            utopiasoftware.saveup.controller.addCardPageViewModel.financialCardValidator,\r\n            utopiasoftware.saveup.paystackObject.gateway + 'decision/bin/{value}');\r\n\r\n        Parsley.addAsyncValidator(\"accountnumbercheck\",\r\n            utopiasoftware.saveup.controller.addAccountPageViewModel.accountNumberValidator,\r\n            utopiasoftware.saveup.moneyWaveObject.gateway + 'v1/resolve/account');\r\n\r\n        Parsley.addAsyncValidator(\"recipientaccountnumbercheck\",\r\n            utopiasoftware.saveup.controller.addRecipientPageViewModel.recipientAccountNumberValidator,\r\n            utopiasoftware.saveup.moneyWaveObject.gateway + 'v1/resolve/account');\r\n\r\n        /** CUSTOM VALIDATORS FOR PARSLEY ENDS **/\r\n\r\n        // add listener for when the Internet network connection is offline\r\n        document.addEventListener(\"offline\", function(){\r\n\r\n            // display a toast message to let user no there is no Internet connection\r\n            window.plugins.toast.showWithOptions({\r\n                message: \"No Internet Connection. App functionality may be limited\",\r\n                duration: 4000, // 2000 ms\r\n                position: \"bottom\",\r\n                styling: {\r\n                    opacity: 1,\r\n                    backgroundColor: '#000000',\r\n                    textColor: '#FFFFFF',\r\n                    textSize: 14\r\n                }\r\n            });\r\n\r\n        }, false);\r\n\r\n        // add a listener for when the user pauses the device i.e when the app is taken from the foreground to background\r\n        document.addEventListener(\"pause\", function(){ // function handles the display of the security-pin-lock-modal\r\n\r\n            if($('#login-tabbar').get(0) && $('#login-tabbar').get(0).visible){ // if the login-tab is visible\r\n                // don't display security-pin-lock-modal\r\n                return; // exit the function immediately\r\n            }\r\n\r\n            // check if the onboarding-navigator is active and if the top page has asked for security lock modal NOT to be displayed\r\n            if($('#onboarding-navigator').get(0) &&\r\n                $('#onboarding-navigator').get(0).topPage.alwaysShowSecurityLockModal == false){ // user does NOT want security lock modal\r\n                // don't display security-pin-lock-modal\r\n                return; // exit the function immediately\r\n            }\r\n\r\n            // check if the app-main-navigator is active and if the top page has asked for security lock modal NOT to be displayed\r\n            if($('#app-main-navigator').get(0) &&\r\n                $('#app-main-navigator').get(0).topPage.alwaysShowSecurityLockModal == false){ // user does NOT want security lock modal\r\n                // don't display security-pin-lock-modal\r\n                return; // exit the function immediately\r\n            }\r\n\r\n            // check if the security lock modal can be display\r\n            if(! utopiasoftware.saveup.model.appUserDetails.settings ||\r\n                utopiasoftware.saveup.model.appUserDetails.settings.alwaysShowSecurityLockModal !== false){ // security modal can be displayed\r\n\r\n                // reset the message being displayed in the security-pin-lock-modal\r\n                $('#security-pin-lock-modal #security-pin-lock-message').html(\"\");\r\n\r\n                if($('#pin-security-check').get(0) && $('#pin-security-check').get(0).visible){ // check if the pin-security-check dialog is visible\r\n                    $('#pin-security-check').remove(); // hide the pin-security-check dialog\r\n                }\r\n\r\n                cordova.plugins.Keyboard.close(); // hide the keyboard, if it is visible\r\n                $('#security-pin-lock-modal').get(0).show(); // show the security-pin-lock-modal\r\n            }\r\n\r\n        }, false);\r\n\r\n        // add listener for when a message is posted to the app by an iframe during cash transfers\r\n        window.addEventListener(\"message\", function(event){\r\n            try{\r\n\r\n            // check that event is from the expected origin & carrying the proper message\r\n            if(event.origin == \"https://postcash.000webhostapp.com\" && event.data == \"c done\"){\r\n                // call the method to handle the event i.e transfer-cash-card authorisation\r\n                utopiasoftware.saveup.controller.transferCashCardPageViewModel.transferCashCardOtpAuthorize();\r\n                return; // exit method\r\n            }\r\n\r\n            if(event.origin == \"https://postcash.000webhostapp.com\" && event.data == \"b loaded\"){\r\n\r\n                // call the method to handle the event i.e transfer-cash-bank remote authorisation stage 1\r\n                utopiasoftware.saveup.controller.transferCashBankPageViewModel.transferCashBankRemoteAuthorize(\"stage 1\");\r\n                return; // exit method\r\n            }\r\n            if(event.origin == \"https://postcash.000webhostapp.com\" && JSON.parse(event.data) &&\r\n                JSON.parse(event.data).state == \"b completed\"){\r\n                // call the method to handle the event i.e transfer-cash-bank remote authorisation stage 2\r\n                utopiasoftware.saveup.controller.transferCashBankPageViewModel.\r\n                transferCashBankRemoteAuthorize(\"stage 2\", JSON.parse(event.data));\r\n                return; // exit method\r\n            }\r\n          }\r\n          catch(err){\r\n              ///\r\n          }\r\n        }, false);\r\n\r\n        try {\r\n            // lock the orientation of the device to 'PORTRAIT'\r\n            screen.lockOrientation('portrait');\r\n        }\r\n        catch(err){}\r\n\r\n        // set status bar color\r\n        StatusBar.backgroundColorByHexString(\"#000000\");\r\n\r\n        // prepare the inapp browser plugin\r\n        window.open = cordova.InAppBrowser.open;\r\n\r\n        // use Promises to load the other cordova plugins\r\n        new Promise(function(resolve, reject){\r\n            // Get device UUID\r\n            window.plugins.uniqueDeviceID.get(resolve, reject);\r\n        }).\r\n        then(function(deviceUUID){\r\n            utopiasoftware.saveup.model.deviceUUID = deviceUUID;\r\n            return;\r\n        }).\r\n        then(function(){ // load the securely stored / encrypted data into the app\r\n            // check if the user is currently logged in\r\n            if(! window.localStorage.getItem(\"app-status\") || window.localStorage.getItem(\"app-status\") == \"\"){ // user is not logged in\r\n                return null;\r\n            }\r\n\r\n            return Promise.resolve(intel.security.secureStorage.read({\"id\": \"postcash-user-details\"}));\r\n        }).then(function(instanceId){\r\n            if(instanceId == null){ // user is not logged in\r\n                return null;\r\n            }\r\n\r\n            return Promise.resolve(intel.security.secureData.getData(instanceId));\r\n        }).\r\n        then(function(secureData){\r\n\r\n            if(secureData == null){ // user is not logged in\r\n                return null;\r\n            }\r\n\r\n            utopiasoftware.saveup.model.appUserDetails = JSON.parse(secureData); // transfer the collected user details to the app\r\n            // update the first name being displayed in the side menu\r\n            $('#side-menu-username').html(utopiasoftware.saveup.model.appUserDetails.firstName);\r\n            return null;\r\n        }).\r\n        then(function(){\r\n            // notify the app that the app has been successfully initialised and is ready for further execution (set app ready flag to true)\r\n            utopiasoftware.saveup.model.isAppReady = true;\r\n            // hide the splash screen\r\n            navigator.splashscreen.hide();\r\n        }).\r\n        catch(function(){\r\n            // provide an empty device uuid\r\n            utopiasoftware.saveup.model.deviceUUID = \"\";\r\n            // notify the app that the app has been successfully initialised and is ready for further execution (set app ready flag to true)\r\n            utopiasoftware.saveup.model.isAppReady = true;\r\n            // hide the splash screen\r\n            navigator.splashscreen.hide();\r\n\r\n            // display a toast message to let user no there is no Internet connection\r\n            window.plugins.toast.showWithOptions({\r\n                message: \"Startup Error. App functionality may be limited. Always update the app to \" +\r\n                \"get the best secure experience. Please contact us if problem continues\",\r\n                duration: 5000, // 5000 ms\r\n                position: \"bottom\",\r\n                styling: {\r\n                    opacity: 1,\r\n                    backgroundColor: '#000000',\r\n                    textColor: '#FFFFFF',\r\n                    textSize: 14\r\n                }\r\n            });\r\n        });\r\n\r\n    },\r\n\r\n    /**\r\n     * method is used to create secondary menus for some app pages.\r\n     * The secondary menus are onsen ui popover elements\r\n     *\r\n     * @param popOverQuerySelector {String} a query selector string that identifies the onsen ui popover element\r\n     *\r\n     * @param targetElem {HTMLElement} HTML element that identifies the\r\n     * target element of the app secondary menu\r\n     */\r\n    createAppSecondaryMenus: function(popOverQuerySelector, targetElem){\r\n\r\n        // show the specified popover element\r\n        $(popOverQuerySelector).get(0).show(targetElem);\r\n    },\r\n\r\n\r\n    /**\r\n     * method is triggered just before pin-security-check prompt dialog is shown\r\n     */\r\n    pinSecurityCheckPreShow: function(){\r\n        // find all input elements and ensure they are not mistakingly styled by materialize.css\r\n        $('#pin-security-check').find('input').addClass(\"utopiasoftware-no-style\");\r\n    },\r\n\r\n    /**\r\n     * method is triggered when an item on the App Secondary Popup Menu is clicked\r\n     *\r\n     * @param label {String} label represents clicked list item in the menu\r\n     */\r\n    appSecondaryMenuListClicked: function(label){\r\n    },\r\n\r\n\r\n    /**\r\n     * object is the view-model for the app side menu\r\n     */\r\n    sideMenuViewModel : {\r\n\r\n        /**\r\n         * method is used to listen for when the list\r\n         * items in the side menu is clicked\r\n         *\r\n         * @param label {String} label represents clicked list item in the side-menu\r\n         */\r\n        sideMenuListClicked: function(label) {\r\n\r\n            if(label == \"transfer cash\"){ // 'transfer cash' button was clicked\r\n\r\n                // close the side menu\r\n                $('ons-splitter').get(0).left.close().\r\n                then(function(){\r\n                    // ask user for secure PIN before proceeding. secure pin MUST match\r\n                    return ons.notification.prompt({title: \"Security Check\", id: \"pin-security-check\", class: \"utopiasoftware-no-style\",\r\n                        messageHTML: '<div><ons-icon icon=\"ion-lock-combination\" size=\"24px\" ' +\r\n                        'style=\"color: #b388ff; float: left; width: 26px;\"></ons-icon> <span style=\"float: right; width: calc(100% - 26px);\">' +\r\n                        'Please enter your PostCash Secure PIN to proceed</span></div>',\r\n                        cancelable: true, placeholder: \"Secure PIN\", inputType: \"number\", defaultValue: \"\", autofocus: true,\r\n                        submitOnEnter: true\r\n                    });\r\n                }).\r\n                then(function(userInput){ // user has provided a secured PIN , now authenticate it\r\n                    if(userInput === utopiasoftware.saveup.model.appUserDetails.securePin){ // authentication successful\r\n                        $('#transfer-cash-page').remove(); // remove previous transfer cash pages\r\n                        $('#app-main-navigator').get(0).pushPage(\"transfer-cash-page.html\", {}); // navigate to the specified page\r\n                    }\r\n                    else{ // inform user that security check failed/user authentication failed\r\n                        ons.notification.alert({title: \"Security Check\",\r\n                            messageHTML: '<ons-icon icon=\"md-close-circle-o\" size=\"30px\" ' +\r\n                            'style=\"color: red;\"></ons-icon> <span>' + 'Security check failed. Invalid credentials' + '</span>',\r\n                            cancelable: true\r\n                        });\r\n                    }\r\n                }).\r\n                catch(function(){});\r\n\r\n                return;\r\n            }\r\n\r\n            if(label == \"verify account\"){ // 'verify account' button was clicked\r\n\r\n                // close the side menu\r\n                $('ons-splitter').get(0).left.close().\r\n                then(function(){\r\n                    $('#app-main-navigator').get(0).bringPageTop(\"verify-account-page.html\", {}); // navigate to the verify account page\r\n                }).catch(function(){});\r\n\r\n                return;\r\n            }\r\n\r\n            if(label == \"my cards\"){ // 'my cards' button was clicked\r\n\r\n                // close the side menu\r\n                $('ons-splitter').get(0).left.close().\r\n                then(function(){\r\n                    // ask user for secure PIN before proceeding. secure pin MUST match\r\n                    return ons.notification.prompt({title: \"Security Check\", id: \"pin-security-check\", class: \"utopiasoftware-no-style\",\r\n                        messageHTML: '<div><ons-icon icon=\"ion-lock-combination\" size=\"24px\" ' +\r\n                        'style=\"color: #b388ff; float: left; width: 26px;\"></ons-icon> <span style=\"float: right; width: calc(100% - 26px);\">' +\r\n                        'Please enter your PostCash Secure PIN to proceed</span></div>',\r\n                        cancelable: true, placeholder: \"Secure PIN\", inputType: \"number\", defaultValue: \"\", autofocus: true,\r\n                        submitOnEnter: true\r\n                    });\r\n                }).\r\n                then(function(userInput){ // user has provided a secured PIN , now authenticate it\r\n                    if(userInput === utopiasoftware.saveup.model.appUserDetails.securePin){ // authentication successful\r\n                        $('#app-main-navigator').get(0).bringPageTop(\"my-cards-page.html\", {}); // navigate to the specified page\r\n                    }\r\n                    else{ // inform user that security check failed/user authentication failed\r\n                        ons.notification.alert({title: \"Security Check\",\r\n                            messageHTML: '<ons-icon icon=\"md-close-circle-o\" size=\"30px\" ' +\r\n                            'style=\"color: red;\"></ons-icon> <span>' + 'Security check failed. Invalid credentials' + '</span>',\r\n                            cancelable: true\r\n                        });\r\n                    }\r\n                }).\r\n                catch(function(){});\r\n\r\n                return;\r\n            }\r\n\r\n            if(label == \"my accounts\"){ // 'my accounts' button was clicked\r\n\r\n                // close the side menu\r\n                $('ons-splitter').get(0).left.close().\r\n                then(function(){\r\n                    // ask user for secure PIN before proceeding. secure pin MUST match\r\n                    return ons.notification.prompt({title: \"Security Check\", id: \"pin-security-check\", class: \"utopiasoftware-no-style\",\r\n                        messageHTML: '<div><ons-icon icon=\"ion-lock-combination\" size=\"24px\" ' +\r\n                        'style=\"color: #b388ff; float: left; width: 26px;\"></ons-icon> <span style=\"float: right; width: calc(100% - 26px);\">' +\r\n                        'Please enter your PostCash Secure PIN to proceed</span></div>',\r\n                        cancelable: true, placeholder: \"Secure PIN\", inputType: \"number\", defaultValue: \"\", autofocus: true,\r\n                        submitOnEnter: true\r\n                    });\r\n                }).\r\n                then(function(userInput){ // user has provided a secured PIN , now authenticate it\r\n                    if(userInput === utopiasoftware.saveup.model.appUserDetails.securePin){ // authentication successful\r\n                        $('#app-main-navigator').get(0).bringPageTop(\"my-accounts-page.html\", {}); // navigate to the specified page\r\n                    }\r\n                    else{ // inform user that security check failed/user authentication failed\r\n                        ons.notification.alert({title: \"Security Check\",\r\n                            messageHTML: '<ons-icon icon=\"md-close-circle-o\" size=\"30px\" ' +\r\n                            'style=\"color: red;\"></ons-icon> <span>' + 'Security check failed. Invalid credentials' + '</span>',\r\n                            cancelable: true\r\n                        });\r\n                    }\r\n                }).\r\n                catch(function(){});\r\n\r\n                return;\r\n            }\r\n\r\n            if(label == \"saved recipients\"){ // 'saved recipients' button was clicked\r\n\r\n                // close the side menu\r\n                $('ons-splitter').get(0).left.close().\r\n                then(function(){\r\n                    // ask user for secure PIN before proceeding. secure pin MUST match\r\n                    return ons.notification.prompt({title: \"Security Check\", id: \"pin-security-check\", class: \"utopiasoftware-no-style\",\r\n                        messageHTML: '<div><ons-icon icon=\"ion-lock-combination\" size=\"24px\" ' +\r\n                        'style=\"color: #b388ff; float: left; width: 26px;\"></ons-icon> <span style=\"float: right; width: calc(100% - 26px);\">' +\r\n                        'Please enter your PostCash Secure PIN to proceed</span></div>',\r\n                        cancelable: true, placeholder: \"Secure PIN\", inputType: \"number\", defaultValue: \"\", autofocus: true,\r\n                        submitOnEnter: true\r\n                    });\r\n                }).\r\n                then(function(userInput){ // user has provided a secured PIN , now authenticate it\r\n                    if(userInput === utopiasoftware.saveup.model.appUserDetails.securePin){ // authentication successful\r\n                        $('#app-main-navigator').get(0).bringPageTop(\"saved-recipients-page.html\", {}); // navigate to the specified page\r\n                    }\r\n                    else{ // inform user that security check failed/user authentication failed\r\n                        ons.notification.alert({title: \"Security Check\",\r\n                            messageHTML: '<ons-icon icon=\"md-close-circle-o\" size=\"30px\" ' +\r\n                            'style=\"color: red;\"></ons-icon> <span>' + 'Security check failed. Invalid credentials' + '</span>',\r\n                            cancelable: true\r\n                        });\r\n                    }\r\n                }).\r\n                catch(function(){});\r\n\r\n                return;\r\n            }\r\n\r\n            if(label == \"intro\"){ // intro button was clicked\r\n\r\n                // close the side menu\r\n                $('ons-splitter').get(0).left.close().\r\n                then(function(){\r\n                    $('ons-splitter').get(0).content.load(\"onboarding-template\"); // navigate to the onboarding presentation\r\n                }).catch(function(){});\r\n\r\n                return;\r\n            }\r\n        }\r\n    },\r\n\r\n\r\n    /**\r\n     * object is the view-model for the app security-pin-lock-modal\r\n     */\r\n    securityPinLockModalViewModel: {\r\n\r\n        /**\r\n         * property holds the input field jquery object used in the\r\n         * security pin lock modal\r\n         */\r\n        $pinLockInputField: null,\r\n\r\n\r\n        /**\r\n         * holds the unique id assigned to every timer which is used to\r\n         * change the input field entry from 'visible' to 'hidden'\r\n         */\r\n        clearTimeoutId: -1,\r\n\r\n\r\n        /**\r\n         * method is triggered when a number key on the app security pin lock is tapped\r\n         *\r\n         * @param numberInput {String} number input\r\n         */\r\n        numberButtonClicked: function(numberInput){\r\n            // check if the input field jquery object is null. if so, initialise it\r\n            if(!utopiasoftware.saveup.controller.securityPinLockModalViewModel.$pinLockInputField){\r\n                // initialise the input property\r\n                utopiasoftware.saveup.controller.securityPinLockModalViewModel.$pinLockInputField =\r\n                    $('#security-pin-lock-modal #security-pin-lock-pin');\r\n            }\r\n\r\n            // clear the message that may be displayed in the modal\r\n            $('#security-pin-lock-modal #security-pin-lock-message').html(\"\");\r\n            // update the security input field with the provided number input\r\n            utopiasoftware.saveup.controller.securityPinLockModalViewModel.$pinLockInputField.\r\n            val(utopiasoftware.saveup.controller.securityPinLockModalViewModel.$pinLockInputField.val() + numberInput);\r\n            // update the input field css text input style, so user can see the inputed number\r\n            utopiasoftware.saveup.controller.securityPinLockModalViewModel.$pinLockInputField.\r\n            css('-webkit-text-security', 'none');\r\n\r\n            // clear any previous timeout that may have been set\r\n            window.clearTimeout(utopiasoftware.saveup.controller.securityPinLockModalViewModel.clearTimeoutId);\r\n\r\n            utopiasoftware.saveup.controller.securityPinLockModalViewModel.clearTimeoutId =\r\n            setTimeout(function(){ // wait for 1 second\r\n                    // update the input field css text input style, so user cannot see the inputed number\r\n                    utopiasoftware.saveup.controller.securityPinLockModalViewModel.$pinLockInputField.\r\n                    css('-webkit-text-security', 'disc');\r\n            }, 1000);\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the exit button on the app security pin is clicked\r\n         */\r\n        exitButtonClicked: function(){\r\n\r\n            ons.notification.confirm('Do you want to close the app?', {title: 'Exit',\r\n                    buttonLabels: ['No', 'Yes']}) // Ask for confirmation\r\n                .then(function(index) {\r\n                    if (index === 1) { // OK button\r\n                        navigator.app.exitApp(); // Close the app\r\n                    }\r\n                });\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the \"ok\" button on the\r\n         * app security pin is clicked\r\n         */\r\n        okButtonClicked: function(){\r\n\r\n            // check if the input field jquery object is null. if so, initialise it\r\n            if(!utopiasoftware.saveup.controller.securityPinLockModalViewModel.$pinLockInputField){\r\n                // initialise the input property\r\n                utopiasoftware.saveup.controller.securityPinLockModalViewModel.$pinLockInputField =\r\n                    $('#security-pin-lock-modal #security-pin-lock-pin');\r\n            }\r\n\r\n            if(utopiasoftware.saveup.controller.securityPinLockModalViewModel.$pinLockInputField.val() ===\r\n                utopiasoftware.saveup.model.appUserDetails.securePin){ // authentication successful\r\n\r\n                $('#security-pin-lock-modal').get(0).hide(); // hide the security pin modal\r\n            }\r\n            else{ // authentication failed\r\n                $('#security-pin-lock-modal #security-pin-lock-message').html(\"WRONG INPUT!\");\r\n            }\r\n\r\n            // reset the input value of the security pin modal\r\n            utopiasoftware.saveup.controller.securityPinLockModalViewModel.$pinLockInputField.val(\"\");\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when the backspace button on the\r\n         * app security pin is clicked\r\n         */\r\n        backspaceButtonClicked: function(){\r\n\r\n            // check if the input field jquery object is null. if so, initialise it\r\n            if(!utopiasoftware.saveup.controller.securityPinLockModalViewModel.$pinLockInputField){\r\n                // initialise the input property\r\n                utopiasoftware.saveup.controller.securityPinLockModalViewModel.$pinLockInputField =\r\n                    $('#security-pin-lock-modal #security-pin-lock-pin');\r\n            }\r\n\r\n            var inputString = $('#security-pin-lock-modal #security-pin-lock-pin').val(); // get the value from the input\r\n            // remove the last character from the input field\r\n            $('#security-pin-lock-modal #security-pin-lock-pin').val(inputString.substring(0, inputString.length - 1));\r\n        },\r\n\r\n        /**\r\n         * method is used to prevent the device from displaying the content menu for\r\n         * devices\r\n         * @param event\r\n         * @returns {boolean}\r\n         */\r\n        preventContextMenuForInput: function(event){\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n            return false;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * object is view-model for sign-in page\r\n     */\r\n    signInPageViewModel: {\r\n\r\n        /**\r\n         * used to hold the parsley form validation object for the sign-in page\r\n         */\r\n        formValidator: null,\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n            // find all onsen-ui input targets and insert a special class to prevent materialize-css from updating the styles\r\n            $('ons-input input', $thisPage).addClass('utopiasoftware-no-style');\r\n            // disable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').removeAttr(\"swipeable\");\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            function loadPageOnAppReady(){\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if(!ons.isReady() || utopiasoftware.saveup.model.isAppReady === false){\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                $thisPage.get(0).onDeviceBackButton = function(){\r\n                    ons.notification.confirm('Do you want to close the app?', {title: 'Exit',\r\n                            buttonLabels: ['No', 'Yes']}) // Ask for confirmation\r\n                        .then(function(index) {\r\n                            if (index === 1) { // OK button\r\n                                navigator.app.exitApp(); // Close the app\r\n                            }\r\n                        });\r\n                };\r\n\r\n                // check if the user is currently logged in\r\n                if(window.localStorage.getItem(\"app-status\") && window.localStorage.getItem(\"app-status\") != \"\"){ // user is logged in\r\n                    // display the user's save phone number on the login page phonenumber input\r\n                    $('#login-form #user-phone').val(utopiasoftware.saveup.model.appUserDetails.phoneNumber);\r\n                }\r\n\r\n                // initialise the sign-in form validation\r\n                utopiasoftware.saveup.controller.signInPageViewModel.formValidator = $('#login-form').parsley();\r\n\r\n                // attach listener for the sign in button on the sign-in page\r\n                $('#login-signin').get(0).onclick = function(){\r\n                    // run the validation method for the sign-in form\r\n                    utopiasoftware.saveup.controller.signInPageViewModel.formValidator.whenValidate();\r\n                };\r\n\r\n                // listen for log in form field validation failure event\r\n                utopiasoftware.saveup.controller.signInPageViewModel.formValidator.on('field:error', function(fieldInstance) {\r\n                    // get the element that triggered the field validation error and use it to display tooltip\r\n                    // display tooltip\r\n                    $(fieldInstance.$element).addClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                    $(fieldInstance.$element).attr(\"data-hint\", fieldInstance.getErrorsMessages()[0]);\r\n                });\r\n\r\n                // listen for log in form field validation success event\r\n                utopiasoftware.saveup.controller.signInPageViewModel.formValidator.on('field:success', function(fieldInstance) {\r\n                    // remove tooltip from element\r\n                    $(fieldInstance.$element).removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                    $(fieldInstance.$element).removeAttr(\"data-hint\");\r\n                });\r\n\r\n                // listen for log in form validation success\r\n                utopiasoftware.saveup.controller.signInPageViewModel.formValidator.on('form:success',\r\n                    utopiasoftware.saveup.controller.signInPageViewModel.signinFormValidated);\r\n\r\n                // hide the loader\r\n                $('#loader-modal').get(0).hide();\r\n\r\n                // now that the page is being shown without the loader, start the animation of the icons\r\n                $('ons-icon.first,ons-icon.second', $thisPage).addClass('animated swing');\r\n                // wait for 4 seconds, then stop the pulse animation of the Create Account button\r\n                setTimeout(function(){$('#login-create-account', $thisPage).removeClass('pulse');}, 4000);\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the sign-in page is hidden\r\n         * @param event\r\n         */\r\n        pageHide: (event) => {\r\n            try {\r\n                // remove any tooltip being displayed on all forms in the login page\r\n                $('#sign-in-page [data-hint]').removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                $('#sign-in-page [data-hint]').removeAttr(\"data-hint\");\r\n                // reset the form validator object in the sign-in page\r\n                utopiasoftware.saveup.controller.signInPageViewModel.formValidator.reset();\r\n            }\r\n            catch(err){}\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the sign-in page is destroyed\r\n         * @param event\r\n         */\r\n        pageDestroy: (event) => {\r\n            try{\r\n                // remove any tooltip being displayed on all forms in the login page\r\n                $('#sign-in-page [data-hint]').removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                $('#sign-in-page [data-hint]').removeAttr(\"data-hint\");\r\n                // destroy the form validator objects in the login page\r\n                utopiasoftware.saveup.controller.signInPageViewModel.formValidator.destroy();\r\n            }\r\n            catch(err){}\r\n        },\r\n\r\n        /**\r\n         * method is triggered when sign-in form is successfully validated\r\n         */\r\n        signinFormValidated: function(){\r\n\r\n            // display the loader message to indicate is being signed in;\r\n            $('#loader-modal-message').html(\"Signing In...\");\r\n            $('#loader-modal').get(0).show(); // show loader\r\n\r\n            if(($('#login-form #user-phone').val() === utopiasoftware.saveup.model.appUserDetails.phoneNumber) &&\r\n                ($('#login-form #secure-pin').val() === utopiasoftware.saveup.model.appUserDetails.securePin)){ // user can sign in\r\n\r\n                $('#loader-modal').get(0).hide(); // hide loader\r\n                // update the first name being displayed in the side menu\r\n                $('#side-menu-username').html(utopiasoftware.saveup.model.appUserDetails.firstName);\r\n                $('ons-splitter').get(0).content.load(\"app-main-template\"); // move to the main menu\r\n                // show a toast welcoming user\r\n                Materialize.toast('Welcome ' + utopiasoftware.saveup.model.appUserDetails.firstName, 4000);\r\n            }\r\n            else{ // user cannot sign in authentication failed\r\n                $('#loader-modal').get(0).hide(); // hide loader\r\n                ons.notification.alert({title: \"Sign In Failed\",\r\n                    messageHTML: '<ons-icon icon=\"md-close-circle-o\" size=\"30px\" ' +\r\n                    'style=\"color: red;\"></ons-icon> <span>' + 'Invalid Credentials' + '</span>',\r\n                    cancelable: false\r\n                });\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when create account button is clicked\r\n         */\r\n        createAccountButtonClicked: function(){\r\n            // move the tab view to the Sign Up tab\r\n            $('#login-tabbar').get(0).setActiveTab(1, {animation: \"slide\"});\r\n        },\r\n\r\n        /**\r\n         * method is triggered when forgot pin button is clicked\r\n         */\r\n        forgotPinButtonClicked: function(element){\r\n            // move the tab view to the Reset PIN tab\r\n            $('#forgot-pin-popover').get(0).show(element, {});\r\n        }\r\n\r\n    },\r\n\r\n\r\n    /**\r\n     * object is view-model for create-account page\r\n     */\r\n    createAccountPageViewModel: {\r\n\r\n        /**\r\n         * used to hold the parsley form validation object for the create-account page\r\n         */\r\n        formValidator: null,\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n            // find all onsen-ui input targets and insert a special class to prevent materialize-css from updating the styles\r\n            $('ons-input input', $thisPage).addClass('utopiasoftware-no-style');\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            function loadPageOnAppReady(){\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if(!ons.isReady() || utopiasoftware.saveup.model.isAppReady === false){\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                $thisPage.get(0).onDeviceBackButton = function(){\r\n                    // move to the first tab in the tab bar i.e sign-in page\r\n                    $('#login-tabbar').get(0).setActiveTab(0, {animation: \"slide\"});\r\n                };\r\n\r\n                // initialise the create-account form validation\r\n                utopiasoftware.saveup.controller.createAccountPageViewModel.formValidator = $('#create-account-form').parsley();\r\n\r\n                // attach listener for the create account button on the create account page\r\n                $('#create-account-button').get(0).onclick = function(){\r\n                    // run the validation method for the create account form\r\n                    utopiasoftware.saveup.controller.createAccountPageViewModel.formValidator.whenValidate();\r\n                };\r\n\r\n                // listen for log in form field validation failure event\r\n                utopiasoftware.saveup.controller.createAccountPageViewModel.formValidator.on('field:error', function(fieldInstance) {\r\n                    // get the element that triggered the field validation error and use it to display tooltip\r\n                    // display tooltip\r\n                    $(fieldInstance.$element).parent().find('label:eq(0)').addClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                    $(fieldInstance.$element).parent().find('label:eq(0)').attr(\"data-hint\", fieldInstance.getErrorsMessages()[0]);\r\n                });\r\n\r\n                // listen for log in form field validation success event\r\n                utopiasoftware.saveup.controller.createAccountPageViewModel.formValidator.on('field:success', function(fieldInstance) {\r\n                    // remove tooltip from element\r\n                    $(fieldInstance.$element).parent().find('label:eq(0)').removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                    $(fieldInstance.$element).parent().find('label:eq(0)').removeAttr(\"data-hint\");\r\n                });\r\n\r\n                // listen for log in form validation success\r\n                utopiasoftware.saveup.controller.createAccountPageViewModel.formValidator.on('form:success',\r\n                    utopiasoftware.saveup.controller.createAccountPageViewModel.createAccountFormValidated);\r\n\r\n                // hide the loader\r\n                $('#loader-modal').get(0).hide();\r\n\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the create-account page is hidden\r\n         * @param event\r\n         */\r\n        pageHide: (event) => {\r\n            try {\r\n                // remove any tooltip being displayed on all forms on the page\r\n                $('#create-account-page [data-hint]').removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                $('#create-account-page [data-hint]').removeAttr(\"data-hint\");\r\n                // reset the form validator object on the page\r\n                utopiasoftware.saveup.controller.createAccountPageViewModel.formValidator.reset();\r\n            }\r\n            catch(err){}\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the sign-in page is destroyed\r\n         * @param event\r\n         */\r\n        pageDestroy: (event) => {\r\n            try{\r\n                // remove any tooltip being displayed on all forms on the page\r\n                $('#create-account-page [data-hint]').removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                $('#create-account-page [data-hint]').removeAttr(\"data-hint\");\r\n                // destroy the form validator objects on the page\r\n                utopiasoftware.saveup.controller.createAccountPageViewModel.formValidator.destroy();\r\n            }\r\n            catch(err){}\r\n        },\r\n\r\n        /**\r\n         * method is triggered when sign-up form is successfully validated\r\n         */\r\n        createAccountFormValidated: function(){\r\n\r\n            // tell the user that phoe number verification is necessary\r\n            new Promise(function(resolve, reject){\r\n                ons.notification.confirm('To complete sign up, your phone number must be verified. <br>' +\r\n                    'Usual SMS charge from your phone network provider will apply', {title: 'Verify Phone Number',\r\n                        buttonLabels: ['Cancel', 'Ok']}) // Ask for confirmation\r\n                    .then(function(index) {\r\n                        if (index === 1) { // OK button\r\n                            resolve();\r\n                        }\r\n                        else{\r\n                            reject(\"your phone number could not be verified\");\r\n                        }\r\n                    });\r\n            }).\r\n            then(function(){ // verify the user's phone number\r\n\r\n                //return null;\r\n                return utopiasoftware.saveup.validatePhoneNumber($('#create-phone').val());\r\n            }).\r\n            then(function(){\r\n                // display the loader message to indicate that account is being created;\r\n                $('#loader-modal-message').html(\"Completing Sign Up...\");\r\n                return Promise.resolve($('#loader-modal').get(0).show()); // show loader\r\n            }).\r\n            then(function(){ // clear all data belonging to previous user\r\n                var promisesArray = []; // holds all the Promise objects for all data being deleted\r\n\r\n                var promiseObject = new Promise(function(resolve, reject){\r\n                    // delete the user app details from secure storage if it exists\r\n                    Promise.resolve(intel.security.secureStorage.\r\n                    delete({'id':'postcash-user-details'})).\r\n                    then(function(){resolve();},function(){resolve();}); // ALWAYS resolve the promise\r\n                });\r\n\r\n                // add the promise object to the promise array\r\n                promisesArray.push(promiseObject);\r\n\r\n                promiseObject = new Promise(function(resolve, reject){\r\n                    /// delete all the user's financial cards data\r\n                    utopiasoftware.saveup.financialCardOperations.deleteAllCards().\r\n                    then(function(){resolve();},function(){resolve();}); // ALWAYS resolve the promise\r\n                });\r\n\r\n                // add the promise object to the promise array\r\n                promisesArray.push(promiseObject);\r\n\r\n                promiseObject = new Promise(function(resolve, reject){\r\n                    /// delete all the user's bank account data\r\n                    utopiasoftware.saveup.bankAccountOperations.deleteAllMyAccounts().\r\n                    then(function(){resolve();},function(){resolve();}); // ALWAYS resolve the promise\r\n                });\r\n\r\n                // add the promise object to the promise array\r\n                promisesArray.push(promiseObject);\r\n\r\n                promiseObject = new Promise(function(resolve, reject){\r\n                    /// delete all the user's saved recipients data\r\n                    utopiasoftware.saveup.savedRecipientsBankAccountOperations.deleteAllSavedRecipientAccounts().\r\n                    then(function(){resolve();},function(){resolve();}); // ALWAYS resolve the promise\r\n                });\r\n\r\n                // add the promise object to the promise array\r\n                promisesArray.push(promiseObject);\r\n\r\n                promiseObject = new Promise(function(resolve, reject){\r\n                    /// delete all the user's transaction history data\r\n                    utopiasoftware.saveup.transactionHistoryOperations.deleteAllTransactionHistory().\r\n                    then(function(){resolve();},function(){resolve();}); // ALWAYS resolve the promise\r\n                });\r\n\r\n                // add the promise object to the promise array\r\n                promisesArray.push(promiseObject);\r\n\r\n                // return promise when all operations have completed\r\n                return Promise.all(promisesArray);\r\n            }).\r\n            then(function(){\r\n                // clear all data in the device local/session storage\r\n                window.localStorage.clear();\r\n                window.sessionStorage.clear();\r\n                return null;\r\n            }).\r\n            then(function(){\r\n\r\n                // create the app user details object and persist it\r\n                utopiasoftware.saveup.model.appUserDetails = {\r\n                    firstName: $('#create-account-form #create-first-name').val(),\r\n                    lastName: $('#create-account-form #create-last-name').val(),\r\n                    phoneNumber: $('#create-account-form #create-phone').val(),\r\n                    phoneNumber_intlFormat: $('#create-account-form #create-phone').val().startsWith(\"0\") ?\r\n                        $('#create-account-form #create-phone').val().replace(\"0\", \"+234\") :\r\n                        $('#create-account-form #create-phone').val(),\r\n                securePin: $('#create-account-form #create-secure-pin').val()\r\n                };\r\n\r\n                return utopiasoftware.saveup.model.appUserDetails;\r\n            }).\r\n            then(function(newUser){\r\n                // create a cypher data of the user details\r\n                return Promise.resolve(intel.security.secureData.\r\n                createFromData({\"data\": JSON.stringify(newUser)}));\r\n            }).\r\n            then(function(instanceId){\r\n                    // store the cyphered data in secure persistent storage\r\n                    return Promise.resolve(\r\n                        intel.security.secureStorage.write({\"id\": \"postcash-user-details\", \"instanceID\": instanceId})\r\n                    );\r\n                }).\r\n            then(function(){\r\n                $('#loader-modal').get(0).hide(); // hide loader\r\n                // set app-status local storage (as user phone number)\r\n                window.localStorage.setItem(\"app-status\", utopiasoftware.saveup.model.appUserDetails.phoneNumber);\r\n                // update the first name being displayed in the side menu\r\n                $('#side-menu-username').html(utopiasoftware.saveup.model.appUserDetails.firstName);\r\n                $('ons-splitter').get(0).content.load(\"app-main-template\"); // move to the main menu\r\n                // show a toast informing user that account has been created\r\n                Materialize.toast('Sign Up completed! Welcome', 4000);\r\n            }).\r\n            catch(function(err){\r\n                if(typeof err !== \"string\"){ // if err is NOT a String\r\n                    err = \"Sorry. Sign Up could not be completed\"\r\n                }\r\n                $('#loader-modal').get(0).hide(); // hide loader\r\n                ons.notification.alert({title: \"Sign Up Failed\",\r\n                    messageHTML: '<ons-icon icon=\"md-close-circle-o\" size=\"30px\" ' +\r\n                    'style=\"color: red;\"></ons-icon> <span>' + err + '</span>',\r\n                    cancelable: false\r\n                });\r\n            });\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the Create Account PIN visibility button is clicked.\r\n         * It toggles pin visibility\r\n         *\r\n         * @param buttonElement\r\n         */\r\n        pinVisibilityButtonClicked: function(buttonElement){\r\n            if($(buttonElement).attr(\"data-saveup-visible\") === \"no\"){ // pin is not visible, make it visible\r\n                $('#create-secure-pin').css(\"-webkit-text-security\", \"none\"); // change the text-security for the input field\r\n                $(buttonElement).find('ons-icon').attr(\"icon\", \"md-eye-off\"); // change the icon associated with the input\r\n                $(buttonElement).attr(\"data-saveup-visible\", \"yes\"); // flag the pin is now visible\r\n            }\r\n            else{ // make the pin not visible\r\n                $('#create-secure-pin').css(\"-webkit-text-security\", \"disc\"); // change the text-security for the input field\r\n                $(buttonElement).find('ons-icon').attr(\"icon\", \"md-eye\"); // change the icon associated with the input\r\n                $(buttonElement).attr(\"data-saveup-visible\", \"no\"); // flag the pin is now invisible\r\n            }\r\n        }\r\n\r\n    },\r\n\r\n\r\n    /**\r\n     * object is view-model for onboarding page\r\n     */\r\n    onboardingPageViewModel: {\r\n\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n            // disable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').removeAttr(\"swipeable\");\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            function loadPageOnAppReady(){\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if(!ons.isReady() || utopiasoftware.saveup.model.isAppReady === false){\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                $('#onboarding-navigator').get(0).topPage.onDeviceBackButton = function(){\r\n                    ons.notification.confirm('Do you want to close the app?', {title: 'Exit',\r\n                        buttonLabels: ['No', 'Yes']}) // Ask for confirmation\r\n                        .then(function(index) {\r\n                            if (index === 1) { // OK button\r\n                                navigator.app.exitApp(); // Close the app\r\n                            }\r\n                        });\r\n                };\r\n\r\n                // initialise carousel\r\n                $('#onboarding-carousel', $thisPage).carousel({dist: 0, fullWidth: true, indicators: true, noWrap: true});\r\n                // hide the loader\r\n                $('#loader-modal').get(0).hide();\r\n\r\n            }\r\n\r\n        },\r\n\r\n\r\n        /**\r\n         * method is used to move the onboarding presentation to the next slide\r\n         *\r\n         * @param buttonElem\r\n         */\r\n        nextSlideButtonClicked: function(buttonElem){\r\n            $('#onboarding-carousel').carousel('next'); // move to the next slide\r\n            // wait for the slide animation to complete\r\n            setTimeout(function(){\r\n                // check if this is the last slide in the presentation\r\n                if($('.carousel-item.active').is('[href=\"#three!\"]')){ // this is the last slide\r\n                    $(buttonElem).css(\"display\", \"none\"); // hide the Next button\r\n                }\r\n            }, 205);\r\n        },\r\n\r\n\r\n        /**\r\n         * method is used to end the onboarding presentation\r\n         */\r\n        endButtonClicked: function(){\r\n\r\n            // load the main menu template\r\n            $('ons-splitter').get(0).content.load(\"app-main-template\");\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * object is view-model for main-menu page\r\n     */\r\n    mainMenuPageViewModel: {\r\n\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n            // disable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').removeAttr(\"swipeable\");\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            function loadPageOnAppReady(){\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if(!ons.isReady() || utopiasoftware.saveup.model.isAppReady === false){\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                $('#app-main-navigator').get(0).topPage.onDeviceBackButton = function(){\r\n                    ons.notification.confirm('Do you want to close the app?', {title: 'Exit',\r\n                            buttonLabels: ['No', 'Yes']}) // Ask for confirmation\r\n                        .then(function(index) {\r\n                            if (index === 1) { // OK button\r\n                                navigator.app.exitApp(); // Close the app\r\n                            }\r\n                        });\r\n                };\r\n\r\n                // hide the loader\r\n                $('#loader-modal').get(0).hide();\r\n\r\n            }\r\n\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: function(){\r\n            // disable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').removeAttr(\"swipeable\");\r\n        },\r\n\r\n\r\n        /**\r\n         * method is used to listen for click events of the main menu items\r\n         *\r\n         * @param label\r\n         */\r\n        mainMenuButtonsClicked: function(label){\r\n            if(label == \"transfer cash\"){ // 'transfer cash' button was clicked\r\n\r\n                // ask user for secure PIN before proceeding. secure pin MUST match\r\n                ons.notification.prompt({title: \"Security Check\", id: \"pin-security-check\", class: \"utopiasoftware-no-style\",\r\n                    messageHTML: '<div><ons-icon icon=\"ion-lock-combination\" size=\"24px\" ' +\r\n                    'style=\"color: #b388ff; float: left; width: 26px;\"></ons-icon> <span style=\"float: right; width: calc(100% - 26px);\">' +\r\n                    'Please enter your PostCash Secure PIN to proceed</span></div>',\r\n                    cancelable: true, placeholder: \"Secure PIN\", inputType: \"number\", defaultValue: \"\", autofocus: true,\r\n                    submitOnEnter: true\r\n                }).\r\n                then(function(userInput){ // user has provided a secured PIN , now authenticate it\r\n                    if(userInput === utopiasoftware.saveup.model.appUserDetails.securePin){ // authentication successful\r\n                        $('#app-main-navigator').get(0).pushPage(\"transfer-cash-page.html\", {}); // navigate to the specified pages\r\n                    }\r\n                    else{ // inform user that security check failed/user authentication failed\r\n                        ons.notification.alert({title: \"Security Check\",\r\n                            messageHTML: '<ons-icon icon=\"md-close-circle-o\" size=\"30px\" ' +\r\n                            'style=\"color: red;\"></ons-icon> <span>' + 'Security check failed. Invalid credentials' + '</span>',\r\n                            cancelable: true\r\n                        });\r\n                    }\r\n                }).\r\n                catch(function(){});\r\n\r\n                return;\r\n            }\r\n\r\n            if(label == \"verify account\"){ // 'verify account' button was clicked\r\n\r\n                $('#app-main-navigator').get(0).pushPage(\"verify-account-page.html\", {}); // navigate to the verify account page\r\n\r\n                return;\r\n            }\r\n\r\n            if(label == \"my cards\"){ // 'my cards' button was clicked\r\n\r\n                // ask user for secure PIN before proceeding. secure pin MUST match\r\n                ons.notification.prompt({title: \"Security Check\", id: \"pin-security-check\", class: \"utopiasoftware-no-style\",\r\n                    messageHTML: '<div><ons-icon icon=\"ion-lock-combination\" size=\"24px\" ' +\r\n                    'style=\"color: #b388ff; float: left; width: 26px;\"></ons-icon> <span style=\"float: right; width: calc(100% - 26px);\">' +\r\n                    'Please enter your PostCash Secure PIN to proceed</span></div>',\r\n                    cancelable: true, placeholder: \"Secure PIN\", inputType: \"number\", defaultValue: \"\", autofocus: true,\r\n                    submitOnEnter: true\r\n                }).\r\n                then(function(userInput){ // user has provided a secured PIN , now authenticate it\r\n                    if(userInput === utopiasoftware.saveup.model.appUserDetails.securePin){ // authentication successful\r\n                        $('#app-main-navigator').get(0).pushPage(\"my-cards-page.html\", {}); // navigate to the my cards pages\r\n                    }\r\n                    else{ // inform user that security check failed/user authentication failed\r\n                        ons.notification.alert({title: \"Security Check\",\r\n                            messageHTML: '<ons-icon icon=\"md-close-circle-o\" size=\"30px\" ' +\r\n                            'style=\"color: red;\"></ons-icon> <span>' + 'Security check failed. Invalid credentials' + '</span>',\r\n                            cancelable: true\r\n                        });\r\n                    }\r\n                }).\r\n                catch(function(){});\r\n\r\n                return;\r\n            }\r\n\r\n            if(label == \"my accounts\"){ // 'my accounts' button was clicked\r\n\r\n                // ask user for secure PIN before proceeding. secure pin MUST match\r\n                ons.notification.prompt({title: \"Security Check\", id: \"pin-security-check\", class: \"utopiasoftware-no-style\",\r\n                    messageHTML: '<div><ons-icon icon=\"ion-lock-combination\" size=\"24px\" ' +\r\n                    'style=\"color: #b388ff; float: left; width: 26px;\"></ons-icon> <span style=\"float: right; width: calc(100% - 26px);\">' +\r\n                    'Please enter your PostCash Secure PIN to proceed</span></div>',\r\n                    cancelable: true, placeholder: \"Secure PIN\", inputType: \"number\", defaultValue: \"\", autofocus: true,\r\n                    submitOnEnter: true\r\n                }).\r\n                then(function(userInput){ // user has provided a secured PIN , now authenticate it\r\n                    if(userInput === utopiasoftware.saveup.model.appUserDetails.securePin){ // authentication successful\r\n                        $('#app-main-navigator').get(0).pushPage(\"my-accounts-page.html\", {}); // navigate to the my accounts pages\r\n                    }\r\n                    else{ // inform user that security check failed/user authentication failed\r\n                        ons.notification.alert({title: \"Security Check\",\r\n                            messageHTML: '<ons-icon icon=\"md-close-circle-o\" size=\"30px\" ' +\r\n                            'style=\"color: red;\"></ons-icon> <span>' + 'Security check failed. Invalid credentials' + '</span>',\r\n                            cancelable: true\r\n                        });\r\n                    }\r\n                }).\r\n                catch(function(){});\r\n\r\n                return;\r\n            }\r\n\r\n            if(label == \"saved recipients\"){ // 'saved recipients' button was clicked\r\n\r\n                // ask user for secure PIN before proceeding. secure pin MUST match\r\n                ons.notification.prompt({title: \"Security Check\", id: \"pin-security-check\", class: \"utopiasoftware-no-style\",\r\n                    messageHTML: '<div><ons-icon icon=\"ion-lock-combination\" size=\"24px\" ' +\r\n                    'style=\"color: #b388ff; float: left; width: 26px;\"></ons-icon> <span style=\"float: right; width: calc(100% - 26px);\">' +\r\n                    'Please enter your PostCash Secure PIN to proceed</span></div>',\r\n                    cancelable: true, placeholder: \"Secure PIN\", inputType: \"number\", defaultValue: \"\", autofocus: true,\r\n                    submitOnEnter: true\r\n                }).\r\n                then(function(userInput){ // user has provided a secured PIN , now authenticate it\r\n                    if(userInput === utopiasoftware.saveup.model.appUserDetails.securePin){ // authentication successful\r\n                        $('#app-main-navigator').get(0).pushPage(\"saved-recipients-page.html\", {}); // navigate to the saved recipients pages\r\n                    }\r\n                    else{ // inform user that security check failed/user authentication failed\r\n                        ons.notification.alert({title: \"Security Check\",\r\n                            messageHTML: '<ons-icon icon=\"md-close-circle-o\" size=\"30px\" ' +\r\n                            'style=\"color: red;\"></ons-icon> <span>' + 'Security check failed. Invalid credentials' + '</span>',\r\n                            cancelable: true\r\n                        });\r\n                    }\r\n                }).\r\n                catch(function(){});\r\n\r\n                return;\r\n            }\r\n\r\n            if(label == \"intro\"){ // intro button was clicked\r\n\r\n                $('#app-main-navigator').get(0).pushPage(\"onboarding-page.html\", {}); // navigate ot the onboarding page\r\n\r\n                return;\r\n            }\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * object is view-model for verify-account page\r\n     */\r\n    verifyAccountPageViewModel: {\r\n\r\n        /**\r\n         * used to hold the parsley form validation object for the page\r\n         */\r\n        formValidator: null,\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n            // find all onsen-ui input targets and insert a special class to prevent materialize-css from updating the styles\r\n            $('ons-input input', $thisPage).addClass('utopiasoftware-no-style');\r\n            // enable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').attr(\"swipeable\", true);\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            function loadPageOnAppReady(){\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if(!ons.isReady() || utopiasoftware.saveup.model.isAppReady === false){\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n\r\n                // listen for the back button event\r\n                $('#app-main-navigator').get(0).topPage.onDeviceBackButton = function(){\r\n\r\n                    // check if the side menu is open\r\n                    if($('ons-splitter').get(0).left.isOpen){ // side menu open, so close it\r\n                        $('ons-splitter').get(0).left.close();\r\n                        return; // exit the method\r\n                    }\r\n\r\n                    // check if the verify-account bottom sheet is open\r\n                    if($('#verify-account-bottom-sheet').data(\"saveupSheetState\") === \"open\"){ // bottom sheet is open\r\n                        $('#verify-account-bottom-sheet').modal(\"close\"); // close the bottom sheet\r\n\r\n                        return;\r\n                    }\r\n\r\n                    $('#app-main-navigator').get(0).resetToPage(\"main-menu-page.html\");\r\n                };\r\n\r\n\r\n                // initialise the form validation\r\n                utopiasoftware.saveup.controller.verifyAccountPageViewModel.formValidator = $('#verify-account-form').parsley();\r\n\r\n                // attach listener for the verify account button\r\n                $('#verify-account-button').get(0).onclick = function(){\r\n                    // run the validation method for the create account form\r\n                    utopiasoftware.saveup.controller.verifyAccountPageViewModel.formValidator.whenValidate();\r\n                };\r\n\r\n                // listen for log in form field validation failure event\r\n                utopiasoftware.saveup.controller.verifyAccountPageViewModel.formValidator.on('field:error', function(fieldInstance) {\r\n                    // get the element that triggered the field validation error and use it to display tooltip\r\n                    // display tooltip\r\n                    $(fieldInstance.$element).parent().find('label:eq(0)').addClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                    $(fieldInstance.$element).parent().find('label:eq(0)').attr(\"data-hint\", fieldInstance.getErrorsMessages()[0]);\r\n                });\r\n\r\n                // listen for log in form field validation success event\r\n                utopiasoftware.saveup.controller.verifyAccountPageViewModel.formValidator.on('field:success', function(fieldInstance) {\r\n                    // remove tooltip from element\r\n                    $(fieldInstance.$element).parent().find('label:eq(0)').removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                    $(fieldInstance.$element).parent().find('label:eq(0)').removeAttr(\"data-hint\");\r\n                });\r\n\r\n                // listen for log in form validation success\r\n                utopiasoftware.saveup.controller.verifyAccountPageViewModel.formValidator.on('form:success',\r\n                    utopiasoftware.saveup.controller.verifyAccountPageViewModel.verifyAccountFormValidated);\r\n\r\n                // retrieve the sorted array of banks\r\n                Promise.resolve(utopiasoftware.saveup.sortBanksData()).\r\n                then(function(bankArrayData){\r\n                    var optionTags = \"\"; // string to hold all created option tags\r\n\r\n                    // get each object in bank array and use it to create the select element\r\n                    for(var index = 0; index < bankArrayData.length; index++){\r\n                        var bankObject = bankArrayData[index]; // get the bank object\r\n                        // update the banks select element option tags\r\n                        for(var prop in bankObject){\r\n                            optionTags += '<option value=\"' + prop + '\">' + bankObject[prop] + '</option>';\r\n                        }\r\n                    }\r\n\r\n                    $('#verify-account-choose-bank', $thisPage).append(optionTags); // append all the created option tags\r\n                    // initilise the select element\r\n                    $('#verify-account-choose-bank', $thisPage).material_select();\r\n                    // initialise the character counter plugin\r\n                    $('#verify-account-number', $thisPage).characterCounter();\r\n                    // remove the progress indeterminate loader\r\n                    $('.progress', $thisPage).remove();\r\n                    // make the verify account form visible\r\n                    $('#verify-account-form', $thisPage).css(\"display\", \"block\");\r\n                    // enable the 'Verify Account' button\r\n                    $('#verify-account-button', $thisPage).removeAttr(\"disabled\");\r\n                    // hide the loader\r\n                    $('#loader-modal').get(0).hide();\r\n                }).\r\n                catch();\r\n\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the create-account page is hidden\r\n         * @param event\r\n         */\r\n        pageHide: (event) => {\r\n            try {\r\n                // remove any tooltip being displayed on all forms on the page\r\n                $('#verify-account-page [data-hint]').removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                $('#verify-account-page [data-hint]').removeAttr(\"data-hint\");\r\n                // reset the form validator object on the page\r\n                utopiasoftware.saveup.controller.verifyAccountPageViewModel.formValidator.reset();\r\n            }\r\n            catch(err){}\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the sign-in page is destroyed\r\n         * @param event\r\n         */\r\n        pageDestroy: (event) => {\r\n            try{\r\n                // remove any tooltip being displayed on all forms on the page\r\n                $('#verify-account-page [data-hint]').removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                $('#verify-account-page [data-hint]').removeAttr(\"data-hint\");\r\n                // destroy the form validator objects on the page\r\n                utopiasoftware.saveup.controller.verifyAccountPageViewModel.formValidator.destroy();\r\n                // destroy the form inputs which need to be destroyed\r\n                $('#verify-account-choose-bank').material_select('destroy');\r\n                $('#verify-account-number').off();\r\n                $('#verify-account-number').removeData();\r\n            }\r\n            catch(err){}\r\n        },\r\n\r\n        /**\r\n         * method is triggered when verify account form is successfully validated\r\n         */\r\n        verifyAccountFormValidated: function(){\r\n\r\n            // check if Internet Connection is available before proceeding\r\n            if(navigator.connection.type === Connection.NONE){ // no Internet Connection\r\n                // inform the user that they cannot proceed without Internet\r\n                window.plugins.toast.showWithOptions({\r\n                    message: \"You cannot verify accounts without an Internet Connection\",\r\n                    duration: 4000,\r\n                    position: \"top\",\r\n                    styling: {\r\n                        opacity: 1,\r\n                        backgroundColor: '#ff0000', //red\r\n                        textColor: '#FFFFFF',\r\n                        textSize: 14\r\n                    }\r\n                }, function(toastEvent){\r\n                    if(toastEvent && toastEvent.event == \"touch\"){ // user tapped the toast, so hide toast immediately\r\n                        window.plugins.toast.hide();\r\n                    }\r\n                });\r\n\r\n                return; // exit method immediately\r\n            }\r\n\r\n            // display the loader message to indicate that account is being verified;\r\n            $('#loader-modal-message').html(\"Verifying Bank Account...\");\r\n            $('#loader-modal').get(0).show(); // show loader\r\n\r\n            // request for gateway authorization token\r\n            utopiasoftware.saveup.moneyWaveObject.useToken.\r\n            then(function(tokenData){\r\n                // verify the bank account\r\n                return new Promise(function(resolve, reject){\r\n                    var verifyAccountRequest = $.ajax(\r\n                        {\r\n                            url: utopiasoftware.saveup.moneyWaveObject.gateway + \"v1/resolve/account\",\r\n                            type: \"post\",\r\n                            contentType: \"application/json\",\r\n                            beforeSend: function(jqxhr) {\r\n                                jqxhr.setRequestHeader(\"Authorization\", tokenData);\r\n                            },\r\n                            dataType: \"json\",\r\n                            timeout: 240000, // wait for 4 minutes before timeout of request\r\n                            processData: false,\r\n                            data: JSON.stringify({\r\n                                account_number: $('#verify-account-form #verify-account-number').val(),\r\n                                bank_code: $('#verify-account-form #verify-account-choose-bank').val()\r\n                            })\r\n                        }\r\n                    );\r\n\r\n                    // server responded to account verification request\r\n                    verifyAccountRequest.done(function(responseData){\r\n                        if(responseData.status === \"success\"){ // the server responded with a successful account verification\r\n                            // set the name of the account which has been verified\r\n                            $('#verify-account-form #verify-account-name').val(responseData.data.account_name);\r\n                            resolve(); // resolve the account verification promise\r\n                        }\r\n                        else { // the server responded unsuccessfully\r\n                            reject(); // reject the account verification promise\r\n                        }\r\n                    });\r\n\r\n                    // server responded with a failure to the verification request\r\n                    verifyAccountRequest.fail(function(){\r\n                        reject(); // reject the account verification promise\r\n                    });\r\n                });\r\n            }).\r\n            then(function(){\r\n                // hide the loader modal\r\n                return $('#loader-modal').get(0).hide(); // hide loader\r\n            }).\r\n            then(function(){\r\n                // show a toast welcoming user\r\n                Materialize.toast('Bank account verified <ons-button modifier=\"quiet\" style=\"color: #82b1ff\" onclick=\"utopiasoftware.saveup.controller.verifyAccountPageViewModel.moreActions();\">More</ons-button>', 4000);\r\n                // show the result of the verification to the user\r\n                $('#verify-account-form .verify-account-success').css(\"display\", \"block\");\r\n                $('#verify-account-form .verify-account-success').addClass(\"scale-in\");\r\n            }).\r\n            catch(function(){ // inform the user that this is an invalid account number\r\n                // hide the loader modal\r\n                $('#loader-modal').get(0).hide(); // hide loader\r\n                // show the FAILED result of the verification to the user\r\n                $('#verify-account-form .verify-account-failed').css(\"display\", \"block\");\r\n                $('#verify-account-form .verify-account-failed').addClass(\"scale-in\");\r\n            });\r\n        },\r\n\r\n\r\n        /**\r\n         * method is used to specifically reset the verified account display used\r\n         * when an account has been previously verified\r\n         *\r\n         */\r\n        resetVerifiedAcctDisplay: function(){\r\n            // hide all account verification information\r\n            $('#verify-account-form .verify-account-success').css(\"display\", \"none\");\r\n            $('#verify-account-form .verify-account-success').removeClass(\"scale-in\");\r\n            $('#verify-account-form .verify-account-failed').css(\"display\", \"none\");\r\n            $('#verify-account-form .verify-account-failed').removeClass(\"scale-in\");\r\n        },\r\n\r\n\r\n        /**\r\n         * method is used to display the means for performing more actions upon/after\r\n         * bank account verification\r\n         */\r\n        moreActions: function(){\r\n            // display the bottom sheets\r\n            $('#verify-account-bottom-sheet').modal('open');\r\n        },\r\n\r\n\r\n        /**\r\n         * method is used to listen for clicks on the bottom sheet of the verify account page\r\n         * @param label\r\n         */\r\n        verifyAcctBottomSheetListItemClicked: function(label){\r\n\r\n            if(label == \"transfer cash\"){ // 'Transfer Cash to account' button was clicked\r\n\r\n                // ask user for secure PIN before proceeding. secure pin MUST match\r\n                ons.notification.prompt({title: \"Security Check\", id: \"pin-security-check\", class: \"utopiasoftware-no-style\",\r\n                    messageHTML: '<div><ons-icon icon=\"ion-lock-combination\" size=\"24px\" ' +\r\n                    'style=\"color: #b388ff; float: left; width: 26px;\"></ons-icon> <span style=\"float: right; width: calc(100% - 26px);\">' +\r\n                    'Please enter your PostCash Secure PIN to proceed</span></div>',\r\n                    cancelable: true, placeholder: \"Secure PIN\", inputType: \"number\", defaultValue: \"\", autofocus: true,\r\n                    submitOnEnter: true\r\n                }).\r\n                then(function(userInput){ // user has provided a secured PIN , now authenticate it\r\n                    if(userInput === utopiasoftware.saveup.model.appUserDetails.securePin){ // authentication successful\r\n                        // close the 'verify account' the bottom sheets\r\n                        $('#verify-account-bottom-sheet').modal('close');\r\n                        $('#transfer-cash-page').remove(); // remove previous transfer cash pages\r\n                        // call the transfer-cash=page and pass the verified account as recipient details data\r\n                        $('#app-main-navigator').get(0).pushPage(\"transfer-cash-page.html\", {\r\n                            data: {\r\n                                recipient_details: {\r\n                                    recipientAccountName: $('#verify-account-name').val(),\r\n                                    recipientAccount: $('#verify-account-page #verify-account-number').val(),\r\n                                    recipientBankCode: $('#verify-account-page #verify-account-choose-bank').val()}}\r\n                        }); // navigate to the specified page\r\n                    }\r\n                    else{ // inform user that security check failed/user authentication failed\r\n                        ons.notification.alert({title: \"Security Check\",\r\n                            messageHTML: '<ons-icon icon=\"md-close-circle-o\" size=\"30px\" ' +\r\n                            'style=\"color: red;\"></ons-icon> <span>' + 'Security check failed. Invalid credentials' + '</span>',\r\n                            cancelable: true\r\n                        });\r\n                    }\r\n                }).\r\n                catch(function(){});\r\n\r\n                return;\r\n            }\r\n\r\n            if(label == \"add to my accounts\"){ // 'add to my accounts' button was clicked\r\n\r\n                // ask user for secure PIN before proceeding. secure pin MUST match\r\n                ons.notification.prompt({title: \"Security Check\", id: \"pin-security-check\", class: \"utopiasoftware-no-style\",\r\n                    messageHTML: '<div><ons-icon icon=\"ion-lock-combination\" size=\"24px\" ' +\r\n                    'style=\"color: #b388ff; float: left; width: 26px;\"></ons-icon> <span style=\"float: right; width: calc(100% - 26px);\">' +\r\n                    'Please enter your PostCash Secure PIN to proceed</span></div>',\r\n                    cancelable: true, placeholder: \"Secure PIN\", inputType: \"number\", defaultValue: \"\", autofocus: true,\r\n                    submitOnEnter: true\r\n                }).\r\n                then(function(userInput){ // user has provided a secured PIN , now authenticate it\r\n                    if(userInput === utopiasoftware.saveup.model.appUserDetails.securePin){ // authentication successful\r\n                        // close the 'verify account' the bottom sheets\r\n                        $('#verify-account-bottom-sheet').modal('close');\r\n                        // display the secure storage modal to indicate that Bank Account is being securely stored\r\n                        $('#secure-storage-modal .modal-message').html(\"Storing Bank Account on Device...\");\r\n                        $('#secure-storage-modal').get(0).show(); // show loader\r\n                        // add the verifed bank account to the user's secure \"My Accounts\" storage\r\n                        utopiasoftware.saveup.bankAccountOperations.addMyAccount({\r\n                            uniqueAccountId: \"\" + utopiasoftware.saveup.model.deviceUUID + Date.now(),\r\n                            bankAccountNumber: $('#verify-account-form #verify-account-number').val(),\r\n                            bankAccountName: $('#verify-account-form #verify-account-name').val(),\r\n                            bankName: $('#verify-account-form #verify-account-choose-bank option:selected').text().trim(),\r\n                            flutterwave_bankCode: $('#verify-account-form #verify-account-choose-bank').val(),\r\n                            bankAccountAvatar: \"css/app-images/avatar-\" +\r\n                            (new Random(Random.engines.nativeMath)).integer(1, 6) + \".png\"\r\n                        }).\r\n                        then(function(){\r\n                            // wait for approximately 4 secs for the saving animation to run (at least once before concluding animation\r\n                            window.setTimeout(function(){\r\n                                $('#secure-storage-modal').get(0).hide(); // hide loader\r\n                                // inform user that user's bank account has been successfully added to secure storage\r\n                                Materialize.toast('New bank account added', 4000);\r\n                            }, 4000);\r\n                        }).\r\n                        catch(function(err){\r\n\r\n                            $('#secure-storage-modal').get(0).hide(); // hide loader\r\n                            ons.notification.alert({title: \"Save Error\",\r\n                                messageHTML: '<ons-icon icon=\"md-close-circle-o\" size=\"30px\" ' +\r\n                                'style=\"color: red;\"></ons-icon> <span>' + (err.message || \"\") + ' Sorry, this bank account could not be added. ' +\r\n                                '<br>You can try again' + '</span>',\r\n                                cancelable: true\r\n                            });\r\n                        });\r\n                    }\r\n                    else{ // inform user that security check failed/user authentication failed\r\n                        ons.notification.alert({title: \"Security Check\",\r\n                            messageHTML: '<ons-icon icon=\"md-close-circle-o\" size=\"30px\" ' +\r\n                            'style=\"color: red;\"></ons-icon> <span>' + 'Security check failed. Invalid credentials' + '</span>',\r\n                            cancelable: true\r\n                        });\r\n                    }\r\n                }).\r\n                catch(function(){});\r\n\r\n                return;\r\n            }\r\n\r\n            if(label == \"add to my recipients\"){ // 'add to my recipients' button was clicked\r\n\r\n                // ask user for secure PIN before proceeding. secure pin MUST match\r\n                ons.notification.prompt({title: \"Security Check\", id: \"pin-security-check\", class: \"utopiasoftware-no-style\",\r\n                    messageHTML: '<div><ons-icon icon=\"ion-lock-combination\" size=\"24px\" ' +\r\n                    'style=\"color: #b388ff; float: left; width: 26px;\"></ons-icon> <span style=\"float: right; width: calc(100% - 26px);\">' +\r\n                    'Please enter your PostCash Secure PIN to proceed</span></div>',\r\n                    cancelable: true, placeholder: \"Secure PIN\", inputType: \"number\", defaultValue: \"\", autofocus: true,\r\n                    submitOnEnter: true\r\n                }).\r\n                then(function(userInput){ // user has provided a secured PIN , now authenticate it\r\n                    if(userInput === utopiasoftware.saveup.model.appUserDetails.securePin){ // authentication successful\r\n                        // close the 'verify account' the bottom sheets\r\n                        $('#verify-account-bottom-sheet').modal('close');\r\n                        // display the secure storage modal to indicate that Recipient's Bank Account is being securely stored\r\n                        $('#secure-storage-modal .modal-message').html(\"Storing Recipient's Bank Account on Device...\");\r\n                        $('#secure-storage-modal').get(0).show(); // show loader\r\n                        // add the verifed bank account to the user's secure \"My Accounts\" storage\r\n                        utopiasoftware.saveup.savedRecipientsBankAccountOperations.addSavedRecipientAccount({\r\n                            uniqueAccountId: \"\" + utopiasoftware.saveup.model.deviceUUID + Date.now(),\r\n                            bankAccountNumber: $('#verify-account-form #verify-account-number').val(),\r\n                            bankAccountName: $('#verify-account-form #verify-account-name').val(),\r\n                            bankName: $('#verify-account-form #verify-account-choose-bank option:selected').text().trim(),\r\n                            flutterwave_bankCode: $('#verify-account-form #verify-account-choose-bank').val(),\r\n                            bankAccountAvatar: \"css/app-images/avatar-\" +\r\n                            (new Random(Random.engines.nativeMath)).integer(1, 6) + \".png\"\r\n                        }).\r\n                        then(function(){\r\n                            // wait for approximately 4 secs for the saving animation to run (at least once before concluding animation\r\n                            window.setTimeout(function(){\r\n                                $('#secure-storage-modal').get(0).hide(); // hide loader\r\n                                // inform user that recipient's bank account has been successfully added to secure storage\r\n                                Materialize.toast(\"Recipient's bank account added\", 4000);\r\n                            }, 4000);\r\n                        }).\r\n                        catch(function(err){\r\n\r\n                            $('#secure-storage-modal').get(0).hide(); // hide loader\r\n                            ons.notification.alert({title: \"Save Error\",\r\n                                messageHTML: '<ons-icon icon=\"md-close-circle-o\" size=\"30px\" ' +\r\n                                'style=\"color: red;\"></ons-icon> <span>' + (err.message || \"\") + \" Sorry, this recipient's bank account could not be added. \" +\r\n                                '<br>You can try again' + '</span>',\r\n                                cancelable: true\r\n                            });\r\n                        });\r\n                    }\r\n                    else{ // inform user that security check failed/user authentication failed\r\n                        ons.notification.alert({title: \"Security Check\",\r\n                            messageHTML: '<ons-icon icon=\"md-close-circle-o\" size=\"30px\" ' +\r\n                            'style=\"color: red;\"></ons-icon> <span>' + 'Security check failed. Invalid credentials' + '</span>',\r\n                            cancelable: true\r\n                        });\r\n                    }\r\n                }).\r\n                catch(function(){});\r\n\r\n                return;\r\n            }\r\n        }\r\n\r\n    },\r\n\r\n\r\n    /**\r\n     * object is view-model for my-cards-page page\r\n     */\r\n    myCardsPageViewModel: {\r\n\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n            // enable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').attr(\"swipeable\", true);\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            function loadPageOnAppReady(){\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if(!ons.isReady() || utopiasoftware.saveup.model.isAppReady === false){\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                $('#app-main-navigator').get(0).topPage.onDeviceBackButton = function(){\r\n\r\n                    // check if the side menu is open\r\n                    if($('ons-splitter').get(0).left.isOpen){ // side menu open, so close it\r\n                        $('ons-splitter').get(0).left.close();\r\n                        return; // exit the method\r\n                    }\r\n\r\n                    $('#app-main-navigator').get(0).resetToPage(\"main-menu-page.html\");\r\n                };\r\n\r\n                // register listener for the pull-to-refresh widget\r\n                $('#my-cards-pull-hook', $thisPage).on(\"changestate\", function(event){\r\n\r\n                    // check the state of the pull-to-refresh widget\r\n                    switch (event.originalEvent.state){\r\n                        case 'initial':\r\n                            // update the displayed icon\r\n                            $('#my-cards-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"fa-long-arrow-down\" size=\"24px\"></ons-icon>');\r\n                            break;\r\n\r\n                        case 'preaction':\r\n\r\n                            $('#my-cards-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"fa-long-arrow-up\" size=\"24px\"></ons-icon>');\r\n                            break;\r\n\r\n                        case 'action':\r\n                            $('#my-cards-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"fa-repeat\" size=\"24px\" spin></ons-icon>');\r\n                            break;\r\n                    }\r\n                });\r\n\r\n                // add method to handle the loading action of the pull-to-refresh widget\r\n                $('#my-cards-pull-hook', $thisPage).get(0).onAction = function(loadingDone){\r\n                    // disable pull-to-refresh widget till loading is done\r\n                    $('#my-cards-pull-hook', $thisPage).attr(\"disabled\", true);\r\n\r\n                    // load the card data from the device secure store\r\n                    utopiasoftware.saveup.financialCardOperations.loadCardData().\r\n                    then(function(cardsArray){ // the cards array collection has been returned\r\n                        if(cardsArray.length == 0){ // there are no card data available\r\n                            // remove the page preloader progress bar\r\n                            $('.progress', $thisPage).remove();\r\n                            // display the help button\r\n                            $('#my-cards-help-1', $thisPage).css(\"display\", \"inline-block\");\r\n                            // enable the pull-to-refresh widget for the page\r\n                            $('#my-cards-pull-hook', $thisPage).removeAttr(\"disabled\");\r\n                            // display a message to inform user that there are no cards available\r\n                            $('#my-cards-page-message', $thisPage).css(\"display\", \"block\");\r\n                            // hide the error message from displaying\r\n                            $('#my-cards-page-error', $thisPage).css(\"display\", \"none\");\r\n                            // hide the my-cards-list from display\r\n                            $('#my-cards-list', $thisPage).css(\"display\", \"none\");\r\n                            // enable the 'Add Card' button\r\n                            $('#my-cards-add-card-button', $thisPage).removeAttr(\"disabled\");\r\n                            // flag that loading is done\r\n                            loadingDone();\r\n                        }\r\n                        else{ // there are card data available\r\n                            // empty the contents of the my cards list\r\n                            $('#my-cards-list', $thisPage).html(\"\");\r\n\r\n                            for(let index = 0; index < cardsArray.length; index++){ // append the stored cards to the \"My Cards\" list\r\n                                // create the card content\r\n                                let cardContent = `<div class=\"row\"><div class=\"col s1\"></div><div class=\"col s10\">\r\n                                <div class=\"card small\">\r\n                                <div class=\"card-image\" style=\"padding-top: 3%; padding-left: 3%; padding-right: 3%;\r\n                                background-image: url('${cardsArray[index].cardImage}'); background-position: center; background-size: contain; background-origin: content-box; background-repeat: no-repeat;\">\r\n                                <img src=\"css/app-images/blank.png\">\r\n                                </div>\r\n                                <div class=\"card-content\" style=\"padding-bottom: 5px;\">\r\n                                <div style=\"font-weight: bold; font-style: italic; color: #464646\">${cardsArray[index].cardNickName}</div>\r\n                                <div style=\"font-weight: bold; font-size: 0.8em; color: #464646\">${cardsArray[index].cardBrand}\r\n                                ${cardsArray[index].cardLocale == \"international\" ? \"(International)\" : \"\"}</div>\r\n                                </div>\r\n                                <div class=\"card-action\" style=\"padding: 0;\">\r\n                                <ons-button data-id=\"${cardsArray[index].cardUniqueId}\"\r\n                                data-acct-object='${JSON.stringify({senderCardNickName:cardsArray[index].cardNickName,\r\n                                    senderCardNumber:cardsArray[index].cardNumber,\r\n                                    senderCardCvv:cardsArray[index].cvv,senderCardExpiryMonth:cardsArray[index].cardExpiryMonth,\r\n                                    senderCardExpiryYear:cardsArray[index].cardExpiryYear})}' modifier=\"quiet\" disable-auto-styling class=\"right\"\r\n                                        style=\"color: #464646; padding:0; margin-top: 0.5em; margin-left: 1em; margin-right: 1em;\"\r\n                                        onclick=\"utopiasoftware.saveup.controller.myCardsPageViewModel.transferCashButtonClicked(this);\">\r\n                                <ons-icon icon=\"md-saveup-icon-saveup-transfer-cash\" size=\"29px\">\r\n                                </ons-icon>\r\n                                </ons-button>\r\n                                <ons-button data-id=\"${cardsArray[index].cardUniqueId}\" modifier=\"quiet\" disable-auto-styling class=\"right\"\r\n                                    style=\"color: #464646; padding:0; margin-top: 0.5em; margin-left: 1em;\"\r\n                                    onclick=\"utopiasoftware.saveup.controller.myCardsPageViewModel.editCardButtonClicked(this)\">\r\n                            <ons-icon icon=\"md-edit\" size=\"25px\">\r\n                            </ons-icon>\r\n                            </ons-button>\r\n                            <ons-button data-id=\"${cardsArray[index].cardUniqueId}\" modifier=\"quiet\" disable-auto-styling class=\"right\"\r\n                                    style=\"color: #464646; padding:0; margin-top: 0.5em; margin-left: 1em;\"\r\n                                    onclick=\"utopiasoftware.saveup.controller.myCardsPageViewModel.deleteCardButtonClicked(this)\">\r\n                            <ons-icon icon=\"md-delete\" size=\"25px\">\r\n                            </ons-icon>\r\n                            </ons-button>\r\n                                </div>\r\n                                </div>\r\n                                </div>\r\n                                <div class=\"col s1\"></div>\r\n                                </div>` ;\r\n                                // append the card content to the \"My Card\" list\r\n                                $('#my-cards-list', $thisPage).append(cardContent);\r\n                            }\r\n                            // remove the page preloader progress bar\r\n                            $('.progress', $thisPage).remove();\r\n                            // display the help button\r\n                            $('#my-cards-help-1', $thisPage).css(\"display\", \"inline-block\");\r\n                            // enable the pull-to-refresh widget for the page\r\n                            $('#my-cards-pull-hook', $thisPage).removeAttr(\"disabled\");\r\n                            // hide message to inform user that there are no cards available\r\n                            $('#my-cards-page-message', $thisPage).css(\"display\", \"none\");\r\n                            // hide the error message from displaying\r\n                            $('#my-cards-page-error', $thisPage).css(\"display\", \"none\");\r\n                            // display the my-cards-list\r\n                            $('#my-cards-list', $thisPage).css(\"display\", \"block\");\r\n                            // enable the 'Add Card' button\r\n                            $('#my-cards-add-card-button', $thisPage).removeAttr(\"disabled\");\r\n                            // flag that loading is done\r\n                            loadingDone();\r\n                        }\r\n                    }).\r\n                    catch(function(){ // an error occurred, so display the error message to the user\r\n                        // remove the page preloader progress bar\r\n                        $('.progress', $thisPage).remove();\r\n                        // display the help button\r\n                        $('#my-cards-help-1', $thisPage).css(\"display\", \"inline-block\");\r\n                        // enable the pull-to-refresh widget for the page\r\n                        $('#my-cards-pull-hook', $thisPage).removeAttr(\"disabled\");\r\n                        // hide a message to inform user that there are no cards available\r\n                        $('#my-cards-page-message', $thisPage).css(\"display\", \"none\");\r\n                        // display the error message to user\r\n                        $('#my-cards-page-error', $thisPage).css(\"display\", \"block\");\r\n                        // hide the my-cards-list from display\r\n                        $('#my-cards-list', $thisPage).css(\"display\", \"none\");\r\n                        // disable the 'Add Card' button\r\n                        $('#my-cards-add-card-button', $thisPage).attr(\"disabled\", true);\r\n                        // flag that loading is done\r\n                        loadingDone();\r\n                    });\r\n                };\r\n\r\n                // load the card data from the device secure store\r\n                utopiasoftware.saveup.financialCardOperations.loadCardData().\r\n                then(function(cardsArray){ // the cards array collection has been returned\r\n                    if(cardsArray.length == 0){ // there are no card data available\r\n                        // remove the page preloader progress bar\r\n                        $('.progress', $thisPage).remove();\r\n                        // display the help button\r\n                        $('#my-cards-help-1', $thisPage).css(\"display\", \"inline-block\");\r\n                        // enable the pull-to-refresh widget for the page\r\n                        $('#my-cards-pull-hook', $thisPage).removeAttr(\"disabled\");\r\n                        // display a message to inform user that there are no cards available\r\n                        $('#my-cards-page-message', $thisPage).css(\"display\", \"block\");\r\n                        // hide the error message from displaying\r\n                        $('#my-cards-page-error', $thisPage).css(\"display\", \"none\");\r\n                        // hide the my-cards-list from display\r\n                        $('#my-cards-list', $thisPage).css(\"display\", \"none\");\r\n                        // enable the 'Add Card' button\r\n                        $('#my-cards-add-card-button', $thisPage).removeAttr(\"disabled\");\r\n                    }\r\n                    else{ // there are card data available\r\n                        // empty the contents of the my cards list\r\n                        $('#my-cards-list', $thisPage).html(\"\");\r\n\r\n                        for(let index = 0; index < cardsArray.length; index++){ // append the stored cards to the \"My Cards\" list\r\n                            // create the card content\r\n                            let cardContent = `<div class=\"row\"><div class=\"col s1\"></div><div class=\"col s10\">\r\n                            <div class=\"card small\">\r\n                            <div class=\"card-image\" style=\"padding-top: 3%; padding-left: 3%; padding-right: 3%;\r\n                            background-image: url('${cardsArray[index].cardImage}'); background-position: center; background-size: contain; background-origin: content-box; background-repeat: no-repeat;\">\r\n                            <img src=\"css/app-images/blank.png\">\r\n                            </div>\r\n                            <div class=\"card-content\" style=\"padding-bottom: 5px;\">\r\n                            <div style=\"font-weight: bold; font-style: italic; color: #464646\">${cardsArray[index].cardNickName}</div>\r\n                            <div style=\"font-weight: bold; font-size: 0.8em; color: #464646\">${cardsArray[index].cardBrand}\r\n                            ${cardsArray[index].cardLocale == \"international\" ? \"(International)\" : \"\"}</div>\r\n                            </div>\r\n                            <div class=\"card-action\" style=\"padding: 0;\">\r\n                            <ons-button data-id=\"${cardsArray[index].cardUniqueId}\"\r\n                                data-acct-object='${JSON.stringify({senderCardNickName:cardsArray[index].cardNickName,\r\n                                senderCardNumber:cardsArray[index].cardNumber,\r\n                                senderCardCvv:cardsArray[index].cvv,senderCardExpiryMonth:cardsArray[index].cardExpiryMonth,\r\n                                senderCardExpiryYear:cardsArray[index].cardExpiryYear})}' modifier=\"quiet\" disable-auto-styling class=\"right\"\r\n                                        style=\"color: #464646; padding:0; margin-top: 0.5em; margin-left: 1em; margin-right: 1em;\"\r\n                                        onclick=\"utopiasoftware.saveup.controller.myCardsPageViewModel.transferCashButtonClicked(this);\">\r\n                                <ons-icon icon=\"md-saveup-icon-saveup-transfer-cash\" size=\"29px\">\r\n                                </ons-icon>\r\n                                </ons-button>\r\n                            <ons-button data-id=\"${cardsArray[index].cardUniqueId}\" modifier=\"quiet\" disable-auto-styling class=\"right\"\r\n                                    style=\"color: #464646; padding:0; margin-top: 0.5em; margin-left: 1em;\"\r\n                                    onclick=\"utopiasoftware.saveup.controller.myCardsPageViewModel.editCardButtonClicked(this)\">\r\n                            <ons-icon icon=\"md-edit\" size=\"25px\">\r\n                            </ons-icon>\r\n                            </ons-button>\r\n                            <ons-button data-id=\"${cardsArray[index].cardUniqueId}\" modifier=\"quiet\" disable-auto-styling class=\"right\"\r\n                                    style=\"color: #464646; padding:0; margin-top: 0.5em; margin-left: 1em;\"\r\n                                    onclick=\"utopiasoftware.saveup.controller.myCardsPageViewModel.deleteCardButtonClicked(this)\">\r\n                            <ons-icon icon=\"md-delete\" size=\"25px\">\r\n                            </ons-icon>\r\n                            </ons-button>\r\n                            </div>\r\n                            </div>\r\n                            </div>\r\n                            <div class=\"col s1\"></div>\r\n                            </div>` ;\r\n                            // append the card content to the \"My Card\" list\r\n                            $('#my-cards-list', $thisPage).append(cardContent);\r\n                        }\r\n                        // remove the page preloader progress bar\r\n                        $('.progress', $thisPage).remove();\r\n                        // display the help button\r\n                        $('#my-cards-help-1', $thisPage).css(\"display\", \"inline-block\");\r\n                        // enable the pull-to-refresh widget for the page\r\n                        $('#my-cards-pull-hook', $thisPage).removeAttr(\"disabled\");\r\n                        // hide message to inform user that there are no cards available\r\n                        $('#my-cards-page-message', $thisPage).css(\"display\", \"none\");\r\n                        // hide the error message from displaying\r\n                        $('#my-cards-page-error', $thisPage).css(\"display\", \"none\");\r\n                        // display the my-cards-list\r\n                        $('#my-cards-list', $thisPage).css(\"display\", \"block\");\r\n                        // enable the 'Add Card' button\r\n                        $('#my-cards-add-card-button', $thisPage).removeAttr(\"disabled\");\r\n                    }\r\n                }).\r\n                catch(function(){ // an error occurred, so display the error message to the user\r\n                    // remove the page preloader progress bar\r\n                    $('.progress', $thisPage).remove();\r\n                    // display the help button\r\n                    $('#my-cards-help-1', $thisPage).css(\"display\", \"inline-block\");\r\n                    // enable the pull-to-refresh widget for the page\r\n                    $('#my-cards-pull-hook', $thisPage).removeAttr(\"disabled\");\r\n                    // hide a message to inform user that there are no cards available\r\n                    $('#my-cards-page-message', $thisPage).css(\"display\", \"none\");\r\n                    // display the error message to user\r\n                    $('#my-cards-page-error', $thisPage).css(\"display\", \"block\");\r\n                    // hide the my-cards-list from display\r\n                    $('#my-cards-list', $thisPage).css(\"display\", \"none\");\r\n                    // disable the 'Add Card' button\r\n                    $('#my-cards-add-card-button', $thisPage).attr(\"disabled\", true);\r\n                });\r\n\r\n                // hide the loader\r\n                $('#loader-modal').get(0).hide();\r\n\r\n            }\r\n\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         *\r\n         * @param event\r\n         */\r\n        pageShow: function(event){\r\n            var $thisPage = $(event.target); // get the current page shown\r\n            // enable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').attr(\"swipeable\", true);\r\n\r\n            // check if the data on the page should be refreshed\r\n            if($('#app-main-navigator').get(0).topPage.data && $('#app-main-navigator').get(0).topPage.data.refresh\r\n            && $('#app-main-navigator').get(0).topPage.data.refresh === true){ // user wants this page refreshed\r\n                // add & display the preloader for the page\r\n                $('#my-cards-pull-hook', $thisPage).after('<div class=\"progress\"><div class=\"indeterminate\"></div> </div>');\r\n\r\n                // load the card data from the device secure store\r\n                utopiasoftware.saveup.financialCardOperations.loadCardData().\r\n                then(function(cardsArray){ // the cards array collection has been returned\r\n                    if(cardsArray.length == 0){ // there are no card data available\r\n                        // remove the page preloader progress bar\r\n                        $('.progress', $thisPage).remove();\r\n                        // display the help button\r\n                        $('#my-cards-help-1', $thisPage).css(\"display\", \"inline-block\");\r\n                        // enable the pull-to-refresh widget for the page\r\n                        $('#my-cards-pull-hook', $thisPage).removeAttr(\"disabled\");\r\n                        // display a message to inform user that there are no cards available\r\n                        $('#my-cards-page-message', $thisPage).css(\"display\", \"block\");\r\n                        // hide the error message from displaying\r\n                        $('#my-cards-page-error', $thisPage).css(\"display\", \"none\");\r\n                        // hide the my-cards-list from display\r\n                        $('#my-cards-list', $thisPage).css(\"display\", \"none\");\r\n                        // enable the 'Add Card' button\r\n                        $('#my-cards-add-card-button', $thisPage).removeAttr(\"disabled\");\r\n                    }\r\n                    else{ // there are card data available\r\n                        // empty the contents of the my cards list\r\n                        $('#my-cards-list', $thisPage).html(\"\");\r\n\r\n                        for(let index = 0; index < cardsArray.length; index++){ // append the stored cards to the \"My Cards\" list\r\n                            // create the card content\r\n                            let cardContent = `<div class=\"row\"><div class=\"col s1\"></div><div class=\"col s10\">\r\n                            <div class=\"card small\">\r\n                            <div class=\"card-image\" style=\"padding-top: 3%; padding-left: 3%; padding-right: 3%;\r\n                            background-image: url('${cardsArray[index].cardImage}'); background-position: center; background-size: contain; background-origin: content-box; background-repeat: no-repeat;\">\r\n                            <img src=\"css/app-images/blank.png\">\r\n                            </div>\r\n                            <div class=\"card-content\" style=\"padding-bottom: 5px;\">\r\n                            <div style=\"font-weight: bold; font-style: italic; color: #464646\">${cardsArray[index].cardNickName}</div>\r\n                            <div style=\"font-weight: bold; font-size: 0.8em; color: #464646\">${cardsArray[index].cardBrand}\r\n                            ${cardsArray[index].cardLocale == \"international\" ? \"(International)\" : \"\"}</div>\r\n                            </div>\r\n                            <div class=\"card-action\" style=\"padding: 0;\">\r\n                            <ons-button data-id=\"${cardsArray[index].cardUniqueId}\"\r\n                                data-acct-object='${JSON.stringify({senderCardNickName:cardsArray[index].cardNickName,\r\n                                senderCardNumber:cardsArray[index].cardNumber,\r\n                                senderCardCvv:cardsArray[index].cvv,senderCardExpiryMonth:cardsArray[index].cardExpiryMonth,\r\n                                senderCardExpiryYear:cardsArray[index].cardExpiryYear})}' modifier=\"quiet\" disable-auto-styling class=\"right\"\r\n                                        style=\"color: #464646; padding:0; margin-top: 0.5em; margin-left: 1em; margin-right: 1em;\"\r\n                                        onclick=\"utopiasoftware.saveup.controller.myCardsPageViewModel.transferCashButtonClicked(this);\">\r\n                                <ons-icon icon=\"md-saveup-icon-saveup-transfer-cash\" size=\"29px\">\r\n                                </ons-icon>\r\n                                </ons-button>\r\n                            <ons-button data-id=\"${cardsArray[index].cardUniqueId}\" modifier=\"quiet\" disable-auto-styling class=\"right\"\r\n                                    style=\"color: #464646; padding:0; margin-top: 0.5em; margin-left: 1em;\"\r\n                                    onclick=\"utopiasoftware.saveup.controller.myCardsPageViewModel.editCardButtonClicked(this)\">\r\n                            <ons-icon icon=\"md-edit\" size=\"25px\">\r\n                            </ons-icon>\r\n                            </ons-button>\r\n                            <ons-button data-id=\"${cardsArray[index].cardUniqueId}\" modifier=\"quiet\" disable-auto-styling class=\"right\"\r\n                                    style=\"color: #464646; padding:0; margin-top: 0.5em; margin-left: 1em;\"\r\n                                    onclick=\"utopiasoftware.saveup.controller.myCardsPageViewModel.deleteCardButtonClicked(this)\">\r\n                            <ons-icon icon=\"md-delete\" size=\"25px\">\r\n                            </ons-icon>\r\n                            </ons-button>\r\n                            </div>\r\n                            </div>\r\n                            </div>\r\n                            <div class=\"col s1\"></div>\r\n                            </div>` ;\r\n                            // append the card content to the \"My Card\" list\r\n                            $('#my-cards-list', $thisPage).append(cardContent);\r\n                        }\r\n                        // remove the page preloader progress bar\r\n                        $('.progress', $thisPage).remove();\r\n                        // display the help button\r\n                        $('#my-cards-help-1', $thisPage).css(\"display\", \"inline-block\");\r\n                        // enable the pull-to-refresh widget for the page\r\n                        $('#my-cards-pull-hook', $thisPage).removeAttr(\"disabled\");\r\n                        // hide message to inform user that there are no cards available\r\n                        $('#my-cards-page-message', $thisPage).css(\"display\", \"none\");\r\n                        // hide the error message from displaying\r\n                        $('#my-cards-page-error', $thisPage).css(\"display\", \"none\");\r\n                        // display the my-cards-list\r\n                        $('#my-cards-list', $thisPage).css(\"display\", \"block\");\r\n                        // enable the 'Add Card' button\r\n                        $('#my-cards-add-card-button', $thisPage).removeAttr(\"disabled\");\r\n                    }\r\n                }).\r\n                catch(function(){ // an error occurred, so display the error message to the user\r\n                    // remove the page preloader progress bar\r\n                    $('.progress', $thisPage).remove();\r\n                    // display the help button\r\n                    $('#my-cards-help-1', $thisPage).css(\"display\", \"inline-block\");\r\n                    // enable the pull-to-refresh widget for the page\r\n                    $('#my-cards-pull-hook', $thisPage).removeAttr(\"disabled\");\r\n                    // hide a message to inform user that there are no cards available\r\n                    $('#my-cards-page-message', $thisPage).css(\"display\", \"none\");\r\n                    // display the error message to user\r\n                    $('#my-cards-page-error', $thisPage).css(\"display\", \"block\");\r\n                    // hide the my-cards-list from display\r\n                    $('#my-cards-list', $thisPage).css(\"display\", \"none\");\r\n                    // disable the 'Add Card' button\r\n                    $('#my-cards-add-card-button', $thisPage).attr(\"disabled\", true);\r\n                });\r\n            }\r\n\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when the 'Add Card' button is clicked\r\n         */\r\n        addCardButtonClicked: function(){\r\n            $('#app-main-navigator').get(0).pushPage(\"add-card-page.html\", {\r\n                animation: \"lift-md\"\r\n            });\r\n        },\r\n\r\n\r\n        /**\r\n         * method is used to trigger the delete operation of a financial card\r\n         * and updating the user-interface (UI)\r\n         *\r\n         * @param buttonElem\r\n         */\r\n        deleteCardButtonClicked: function(buttonElem){\r\n\r\n            // confirm that user wants to delete the card before proceeding\r\n            ons.notification.confirm('Do you want to delete this card?', {title: 'Confirm Delete',\r\n                    buttonLabels: ['No', 'Yes']}) // Ask for confirmation\r\n                .then(function(index) {\r\n                    if (index === 1) { // YES button clicked\r\n                        // call the utility method used to delete a specified card\r\n                        utopiasoftware.saveup.financialCardOperations.deleteCard($(buttonElem).attr(\"data-id\")).\r\n                        then(function(){ // card has been deleted\r\n                            $(buttonElem).closest('.row').remove(); // remove the card from display\r\n                            // inform the user that card was deleted\r\n                            Materialize.toast('Card deleted', 3000);\r\n                        }).\r\n                        catch(function(){\r\n                            // inform the user that the specified financial card could not be deleted\r\n                            window.plugins.toast.showWithOptions({\r\n                                message: \"Sorry, the bank card could not be deleted.\\n Try again\",\r\n                                duration: 4000,\r\n                                position: \"top\",\r\n                                styling: {\r\n                                    opacity: 1,\r\n                                    backgroundColor: '#ff0000', //red\r\n                                    textColor: '#FFFFFF',\r\n                                    textSize: 14\r\n                                }\r\n                            }, function(toastEvent){\r\n                                if(toastEvent && toastEvent.event == \"touch\"){ // user tapped the toast, so hide toast immediately\r\n                                    window.plugins.toast.hide();\r\n                                }\r\n                            });\r\n                        });\r\n                    }\r\n                });\r\n        },\r\n\r\n\r\n        /**\r\n         * method is used to trigger the edit operation of a financial card\r\n         * and updating/changing the user-interface (UI)\r\n         *\r\n         * @param buttonElem\r\n         */\r\n        editCardButtonClicked: function(buttonElem){\r\n            $('#app-main-navigator').get(0).pushPage(\"add-card-page.html\", {\r\n                animation: \"lift-md\", data: {edit: $(buttonElem).attr(\"data-id\")}\r\n            });\r\n        },\r\n\r\n\r\n\r\n        /**\r\n         * method is used to trigger the transfer cash operation. It uses the\r\n         * selected user's 'My Card' object as the sender's card for the initiated\r\n         * cash transfer\r\n         *\r\n         * @param buttonElem\r\n         */\r\n        transferCashButtonClicked: function(buttonElem){\r\n\r\n            // ask user for secure PIN before proceeding. secure pin MUST match\r\n            ons.notification.prompt({title: \"Security Check\", id: \"pin-security-check\", class: \"utopiasoftware-no-style\",\r\n                messageHTML: '<div><ons-icon icon=\"ion-lock-combination\" size=\"24px\" ' +\r\n                'style=\"color: #b388ff; float: left; width: 26px;\"></ons-icon> <span style=\"float: right; width: calc(100% - 26px);\">' +\r\n                'Please enter your PostCash Secure PIN to proceed</span></div>',\r\n                cancelable: true, placeholder: \"Secure PIN\", inputType: \"number\", defaultValue: \"\", autofocus: true,\r\n                submitOnEnter: true\r\n            }).\r\n            then(function(userInput){ // user has provided a secured PIN , now authenticate it\r\n                if(userInput === utopiasoftware.saveup.model.appUserDetails.securePin){ // authentication successful\r\n                    // close the 'verify account' the bottom sheets\r\n                    $('#verify-account-bottom-sheet').modal('close');\r\n                    $('#transfer-cash-page').remove(); // remove previous transfer cash pages\r\n                    // call the transfer-cash=page and pass the 'my card' details contained in the data attribute as card details data\r\n                    $('#app-main-navigator').get(0).pushPage(\"transfer-cash-page.html\", {\r\n                        data: {\r\n                            sender_card_details: JSON.parse($(buttonElem).attr(\"data-acct-object\"))}\r\n                    }); // navigate to the specified page\r\n                }\r\n                else{ // inform user that security check failed/user authentication failed\r\n                    ons.notification.alert({title: \"Security Check\",\r\n                        messageHTML: '<ons-icon icon=\"md-close-circle-o\" size=\"30px\" ' +\r\n                        'style=\"color: red;\"></ons-icon> <span>' + 'Security check failed. Invalid credentials' + '</span>',\r\n                        cancelable: true\r\n                    });\r\n                }\r\n            }).\r\n            catch(function(){});\r\n\r\n            return;\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * object is view-model for add-card page\r\n     */\r\n    addCardPageViewModel: {\r\n\r\n        /**\r\n         * used to hold the parsley form validation object for the page\r\n         */\r\n        formValidator: null,\r\n\r\n        /**\r\n         * property used to keep track of the immediate last scroll position of the\r\n         * page content\r\n         */\r\n        previousScrollPosition: 0,\r\n\r\n        /**\r\n         * property used to keep track of the current scroll position of the\r\n         * page content\r\n         */\r\n        currentScrollPosition: 0,\r\n\r\n        /**\r\n         * property stores the brand of the new financial card being added.\r\n         * currently, Possible values are- Mastercard, Visa or Verve.\r\n         * Default value is an empty string\r\n         */\r\n        newCardBrand: \"Unknown\",\r\n\r\n        /**\r\n         * property holds the 'general' locale of the new financial card being added.\r\n         * currently, possible values are - local or international\r\n         */\r\n        newCardLocale: \"Unknown\",\r\n\r\n        /**\r\n         * poperty holds the image to be used for the new card\r\n         */\r\n        newCardImage: \"\",\r\n\r\n        cardImageRandomNum: null,\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n            // find all onsen-ui input targets and insert a special class to prevent materialize-css from updating the styles\r\n            $('ons-input input', $thisPage).addClass('utopiasoftware-no-style');\r\n            // disable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').removeAttr(\"swipeable\", true);\r\n\r\n            // reset the previous & current scroll positions of the page contents\r\n            utopiasoftware.saveup.controller.addCardPageViewModel.previousScrollPosition = 0;\r\n            utopiasoftware.saveup.controller.addCardPageViewModel.currentScrollPosition = 0;\r\n\r\n            // reset the new card brand, card general locale & card image\r\n            utopiasoftware.saveup.controller.addCardPageViewModel.newCardBrand = \"Unknown\";\r\n            utopiasoftware.saveup.controller.addCardPageViewModel.newCardLocale = \"Unknown\";\r\n            utopiasoftware.saveup.controller.addCardPageViewModel.newCardImage = \"\";\r\n\r\n            // generate the random number used to display the financial card image\r\n            var randomGen = new Random(Random.engines.nativeMath); // random number generator\r\n            // generate the random number\r\n            utopiasoftware.saveup.controller.addCardPageViewModel.cardImageRandomNum = randomGen.integer(1, 3);\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            function loadPageOnAppReady(){\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if(!ons.isReady() || utopiasoftware.saveup.model.isAppReady === false){\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n\r\n                // listen for the back button event\r\n                $('#app-main-navigator').get(0).topPage.onDeviceBackButton = function(){\r\n\r\n                    // check if the side menu is open\r\n                    if($('ons-splitter').get(0).left.isOpen){ // side menu open, so close it\r\n                        $('ons-splitter').get(0).left.close();\r\n                        return; // exit the method\r\n                    }\r\n\r\n                    $('#app-main-navigator').get(0).popPage();\r\n                };\r\n\r\n                // listen for the scroll event of the page content\r\n                $('#add-card-page .page__content').on(\"scroll\", utopiasoftware.saveup.controller.addCardPageViewModel.pageContentScrolled);\r\n\r\n                // initialise the form validation\r\n                utopiasoftware.saveup.controller.addCardPageViewModel.formValidator = $('#add-card-form').parsley();\r\n\r\n                // attach listener for the 'save' button click\r\n                $('#add-card-save-button').get(0).onclick = function(){\r\n                    // run the validation method for the create account form\r\n                    utopiasoftware.saveup.controller.addCardPageViewModel.formValidator.whenValidate();\r\n                };\r\n\r\n                // listen for form field validation failure event\r\n                utopiasoftware.saveup.controller.addCardPageViewModel.formValidator.on('field:ajaxoptions',\r\n                    function(fieldInstance, ajaxOptions){\r\n                        // edit the ajax options object to include the necessary authorization header\r\n                        ajaxOptions.headers = {\"Authorization\":\"Bearer \" + utopiasoftware.saveup.paystackObject.key.secret};\r\n                        // display the loading icon for card number validation\r\n                        $('#add-card-number-validation-loading', $thisPage).css(\"display\", \"block\");\r\n                    });\r\n\r\n                // listen for form field validation failure event\r\n                utopiasoftware.saveup.controller.addCardPageViewModel.formValidator.on('field:error', function(fieldInstance) {\r\n                    // get the element that triggered the field validation error and use it to display tooltip\r\n                    // display tooltip\r\n                    $(fieldInstance.$element).parent().find('label:eq(0)').addClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                    $(fieldInstance.$element).parent().find('label:eq(0)').attr(\"data-hint\", fieldInstance.getErrorsMessages()[0]);\r\n                    // check if the element that triggered that validation error was the card number input\r\n                    if($(fieldInstance.$element).is('#add-card-card-number')){ // it is the card number input\r\n                        // hide the loading icon\r\n                        $('#add-card-number-validation-loading', $thisPage).css(\"display\", \"none\");\r\n                        // hide the card image row\r\n                        $('#add-card-image-container', $thisPage).css(\"display\", \"none\");\r\n                    }\r\n                });\r\n\r\n                // listen for form field validation success event\r\n                utopiasoftware.saveup.controller.addCardPageViewModel.formValidator.on('field:success', function(fieldInstance) {\r\n                    // remove tooltip from element\r\n                    $(fieldInstance.$element).parent().find('label:eq(0)').removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                    $(fieldInstance.$element).parent().find('label:eq(0)').removeAttr(\"data-hint\");\r\n                    // check if the element that triggered that validation success was the card number input\r\n                    if($(fieldInstance.$element).is('#add-card-card-number')){ // it is the card number input\r\n                        // hide the loading icon\r\n                        $('#add-card-number-validation-loading', $thisPage).css(\"display\", \"none\");\r\n                        // check if the user request for remote card number validation\r\n                        if($('#add-card-verify-card').is(\":checked\")){ //user asked for remote validation\r\n                            // display an image to indicate the card type which the card number verified based on card brand\r\n                            switch(utopiasoftware.saveup.controller.addCardPageViewModel.newCardBrand){\r\n                                case \"Mastercard\":\r\n                                    if(utopiasoftware.saveup.controller.addCardPageViewModel.newCardLocale == \"local\"){\r\n                                        // this is a local mastercard\r\n                                        // set the image for the card\r\n                                        utopiasoftware.saveup.controller.addCardPageViewModel.\r\n                                            newCardImage = \"css/app-images/mastercard-local-\" +\r\n                                            utopiasoftware.saveup.controller.addCardPageViewModel.cardImageRandomNum + \".png\";\r\n                                        $('#add-card-image').attr(\"src\", \"css/app-images/mastercard-local-\" +\r\n                                            utopiasoftware.saveup.controller.addCardPageViewModel.cardImageRandomNum + \".png\"\r\n                                        );\r\n                                        // update the card type display name\r\n                                        $('#add-card-image-type').html(\"Mastercard\");\r\n                                    }\r\n                                    else{\r\n                                        // this is a international mastercard\r\n                                        // set the image for the card\r\n                                        utopiasoftware.saveup.controller.addCardPageViewModel.\r\n                                            newCardImage = \"css/app-images/mastercard-international-\" +\r\n                                            utopiasoftware.saveup.controller.addCardPageViewModel.cardImageRandomNum + \".png\";\r\n                                        $('#add-card-image').attr(\"src\", \"css/app-images/mastercard-international-\" +\r\n                                            utopiasoftware.saveup.controller.addCardPageViewModel.cardImageRandomNum + \".png\"\r\n                                        );\r\n                                        // update the card type display name\r\n                                        $('#add-card-image-type').html(\"Mastercard (International)\");\r\n                                    }\r\n                                    break;\r\n\r\n                                case \"Visa\":\r\n                                    if(utopiasoftware.saveup.controller.addCardPageViewModel.newCardLocale == \"local\"){\r\n                                        // this is a local visa\r\n                                        // set the image for the card\r\n                                        utopiasoftware.saveup.controller.addCardPageViewModel.\r\n                                            newCardImage = \"css/app-images/visacard-local-\" +\r\n                                            utopiasoftware.saveup.controller.addCardPageViewModel.cardImageRandomNum + \".png\";\r\n                                        $('#add-card-image').attr(\"src\", \"css/app-images/visacard-local-\" +\r\n                                            utopiasoftware.saveup.controller.addCardPageViewModel.cardImageRandomNum + \".png\"\r\n                                        );\r\n                                        // update the card type display name\r\n                                        $('#add-card-image-type').html(\"Visa\");\r\n                                    }\r\n                                    else{\r\n                                        // this is a international Visa card\r\n                                        // set the image for the card\r\n                                        utopiasoftware.saveup.controller.addCardPageViewModel.\r\n                                            newCardImage = \"css/app-images/visacard-international-\" +\r\n                                            utopiasoftware.saveup.controller.addCardPageViewModel.cardImageRandomNum + \".png\";\r\n                                        $('#add-card-image').attr(\"src\", \"css/app-images/visacard-international-\" +\r\n                                            utopiasoftware.saveup.controller.addCardPageViewModel.cardImageRandomNum + \".png\"\r\n                                        );\r\n                                        // update the card type display name\r\n                                        $('#add-card-image-type').html(\"Visa (International)\");\r\n                                    }\r\n                                    break;\r\n\r\n                                case \"Verve\":\r\n                                    if(utopiasoftware.saveup.controller.addCardPageViewModel.newCardLocale == \"local\"){\r\n                                        // this is a local verve\r\n                                        // set the image for the card\r\n                                        utopiasoftware.saveup.controller.addCardPageViewModel.\r\n                                            newCardImage = \"css/app-images/verve-local-\" +\r\n                                            utopiasoftware.saveup.controller.addCardPageViewModel.cardImageRandomNum + \".png\";\r\n                                        $('#add-card-image').attr(\"src\", \"css/app-images/verve-local-\" +\r\n                                            utopiasoftware.saveup.controller.addCardPageViewModel.cardImageRandomNum + \".png\"\r\n                                        );\r\n                                        // update the card type display name\r\n                                        $('#add-card-image-type').html(\"Verve\");\r\n                                    }\r\n                                    break;\r\n                            }\r\n\r\n                            // display the card image row\r\n                            $('#add-card-image-container', $thisPage).css(\"display\", \"block\");\r\n                        }\r\n                        else{ // user did not ask for remote card validation\r\n                            // set the image for the card\r\n                            utopiasoftware.saveup.controller.addCardPageViewModel.\r\n                                newCardImage = \"css/app-images/unknown-local-\" +\r\n                                utopiasoftware.saveup.controller.addCardPageViewModel.cardImageRandomNum + \".png\";\r\n                            // set new card brand as unknown\r\n                            utopiasoftware.saveup.controller.addCardPageViewModel.newCardBrand = \"Unknown\";\r\n                            // set the new card locale as unknown\r\n                            utopiasoftware.saveup.controller.addCardPageViewModel.newCardLocale = \"Unknown\";\r\n                            // hide the card image row\r\n                            $('#add-card-image-container', $thisPage).css(\"display\", \"none\");\r\n                        }\r\n                    }\r\n                });\r\n\r\n                // listen for form validation success\r\n                utopiasoftware.saveup.controller.addCardPageViewModel.formValidator.on('form:success',\r\n                    utopiasoftware.saveup.controller.addCardPageViewModel.addCardFormValidated);\r\n\r\n                /** dynamically create the contents of the various select elements **/\r\n                var optionTags = \"\"; // string to hold all created option tags for the Card Expiry Year\r\n                var yearOption = (new Date()).getFullYear(); // get the current year\r\n                // add current year to the options tag\r\n                optionTags += '<option value=\"' + yearOption + '\">' + yearOption + '</option>';\r\n\r\n                // add 3 more years to the option tags for the Card Expiry Year\r\n                for(var index = 0; index < 3; index++){\r\n                    // increase the yearOption by 1\r\n                    yearOption += 1;\r\n                    // add current year to the options tag\r\n                    optionTags += '<option value=\"' + yearOption + '\">' + yearOption + '</option>';\r\n                }\r\n\r\n                $('#add-card-expiry-year', $thisPage).append(optionTags); // append all the created option tags\r\n\r\n                // initialise all the select element\r\n                $('select', $thisPage).material_select();\r\n                // initialise the character counter plugin\r\n                $('#add-card-card-number', $thisPage).characterCounter();\r\n\r\n\r\n\r\n                // check if the page was sent a financial card id.\r\n                // if so preload the financial card data into the form\r\n                if($('#app-main-navigator').get(0).topPage.data && $('#app-main-navigator').get(0).topPage.data.edit){\r\n                    // get the details of the card to be edited\r\n                    utopiasoftware.saveup.financialCardOperations.\r\n                    getCard($('#app-main-navigator').get(0).topPage.data.edit).then(function(card){\r\n                        $('#add-card-page #add-card-unique-id').val(card.cardUniqueId);\r\n                        $('#add-card-page #add-card-card-holder').val(card.cardHolderName);\r\n                        $('#add-card-page #add-card-alias').val(card.cardNickName);\r\n                        $('#add-card-page #add-card-card-number').val(card.cardNumber);\r\n                        $('#add-card-page #add-card-cvv').val(card.cvv);\r\n                        $('#add-card-page #add-card-expiry-month').val(card.cardExpiryMonth);\r\n                        $('#add-card-page #hidden-card-expiry-month-input').val(card.cardExpiryMonth);\r\n                        $('#add-card-page #add-card-expiry-year').val(card.cardExpiryYear);\r\n                        $('#add-card-page #hidden-card-expiry-year-input').val(card.cardExpiryYear);\r\n                        utopiasoftware.saveup.controller.addCardPageViewModel.newCardBrand = card.cardBrand;\r\n                        $('#add-card-page #add-card-verify-card').prop(\"checked\", card.cardBrand !== \"Unknown\");\r\n                        // reset the card number validation check and all its related actions\r\n                        utopiasoftware.saveup.controller.addCardPageViewModel.\r\n                        isCardNumberValidated($('#add-card-page #add-card-verify-card'));\r\n                        utopiasoftware.saveup.controller.addCardPageViewModel.newCardLocale = card.cardLocale;\r\n                        utopiasoftware.saveup.controller.addCardPageViewModel.newCardImage = card.cardImage;\r\n\r\n                        // update the card image file\r\n                        $('#add-card-page #add-card-image').attr(\"src\", utopiasoftware.saveup.controller.addCardPageViewModel.newCardImage);\r\n                        // display the card image row\r\n                        $('#add-card-image-container', $thisPage).css(\"display\", \"block\");\r\n\r\n                        // re-update the form input fields\r\n                        Materialize.updateTextFields();\r\n                        //re-initialise the form select elements\r\n                        $('select', $thisPage).material_select();\r\n\r\n                        // remove the progress indeterminate loader\r\n                        $('.progress', $thisPage).remove();\r\n                        // make the add card form visible\r\n                        $('#add-card-form', $thisPage).css(\"display\", \"block\");\r\n                        // enable the 'Cancel' & 'Save' buttons\r\n                        $('#add-card-cancel-button, #add-card-save-button', $thisPage).removeAttr(\"disabled\");\r\n                        // hide the loader\r\n                        $('#loader-modal').get(0).hide();\r\n                    });\r\n                }\r\n                else {\r\n                    // remove the progress indeterminate loader\r\n                    $('.progress', $thisPage).remove();\r\n                    // make the add card form visible\r\n                    $('#add-card-form', $thisPage).css(\"display\", \"block\");\r\n                    // enable the 'Cancel' & 'Save' buttons\r\n                    $('#add-card-cancel-button, #add-card-save-button', $thisPage).removeAttr(\"disabled\");\r\n                    // hide the loader\r\n                    $('#loader-modal').get(0).hide();\r\n                }\r\n\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the create-account page is hidden\r\n         * @param event\r\n         */\r\n        pageHide: (event) => {\r\n            try {\r\n                // remove any tooltip being displayed on all forms on the page\r\n                $('#add-card-page [data-hint]').removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                $('#add-card-page [data-hint]').removeAttr(\"data-hint\");\r\n                // reset the form validator object on the page\r\n                utopiasoftware.saveup.controller.addCardPageViewModel.formValidator.reset();\r\n            }\r\n            catch(err){}\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the sign-in page is destroyed\r\n         * @param event\r\n         */\r\n        pageDestroy: (event) => {\r\n            try{\r\n                // remove any tooltip being displayed on all forms on the page\r\n                $('#add-card-page [data-hint]').removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                $('#add-card-page [data-hint]').removeAttr(\"data-hint\");\r\n                // destroy the form validator objects on the page\r\n                utopiasoftware.saveup.controller.addCardPageViewModel.formValidator.destroy();\r\n                // destroy the form inputs which need to be destroyed\r\n                $('#add-card-page select').material_select('destroy');\r\n                $('#add-card-page #add-card-card-number').off();\r\n                $('#add-card-page #add-card-card-number').removeData();\r\n            }\r\n            catch(err){}\r\n        },\r\n\r\n        /**\r\n         * method is triggered when add card form is successfully validated\r\n         */\r\n        addCardFormValidated: function(){\r\n\r\n            // display the secure storage modal to indicate that card is being securely stored\r\n            $('#secure-storage-modal .modal-message').html(\"Storing Card on Device...\");\r\n            $('#secure-storage-modal').get(0).show(); // show loader\r\n\r\n            // check if this is an EDIT or CREATE operation\r\n            if($('#app-main-navigator').get(0).topPage.data && $('#app-main-navigator').get(0).topPage.data.edit){ //this is an EDIT operation\r\n                // card the utility method used to delete a specified card\r\n                utopiasoftware.saveup.financialCardOperations.\r\n                deleteCard($('#app-main-navigator').get(0).topPage.data.edit).\r\n                then(function(){\r\n                    // create an edited card data\r\n                    var editedCardData = {\r\n                        cardUniqueId: $('#app-main-navigator').get(0).topPage.data.edit,\r\n                        cardHolderName: $('#add-card-form #add-card-card-holder').val(),\r\n                        cardNickName: $('#add-card-form #add-card-alias').val(),\r\n                        cardNumber: $('#add-card-form #add-card-card-number').val(),\r\n                        cvv: $('#add-card-form #add-card-cvv').val(),\r\n                        cardExpiryMonth: $('#add-card-form #add-card-expiry-month').val(),\r\n                        cardExpiryYear: $('#add-card-form #add-card-expiry-year').val(),\r\n                        cardBrand: utopiasoftware.saveup.controller.addCardPageViewModel.newCardBrand,\r\n                        cardLocale: utopiasoftware.saveup.controller.addCardPageViewModel.newCardLocale,\r\n                        cardImage: utopiasoftware.saveup.controller.addCardPageViewModel.newCardImage\r\n                    };\r\n\r\n                    // card the utility method used to add a specified card to the card collection\r\n                    return utopiasoftware.saveup.financialCardOperations.\r\n                    addCard(editedCardData);\r\n                }).\r\n                then(function(){\r\n                    // wait for approximately 4 secs for the saving animation to run (at least once before concluding animation\r\n                    window.setTimeout(function(){\r\n                        // reset the form validator object on the page\r\n                        utopiasoftware.saveup.controller.addCardPageViewModel.formValidator.reset();\r\n                        // reset the form object\r\n                        $('#add-card-page #add-card-form').get(0).reset();\r\n                        // reset the card number validation check and all its related actions\r\n                        utopiasoftware.saveup.controller.addCardPageViewModel.\r\n                        isCardNumberValidated($('#add-card-page #add-card-verify-card'));\r\n                        // reset the new card brand, card general locale & card image\r\n                        utopiasoftware.saveup.controller.addCardPageViewModel.newCardBrand = \"Unknown\";\r\n                        utopiasoftware.saveup.controller.addCardPageViewModel.newCardLocale = \"Unknown\";\r\n                        utopiasoftware.saveup.controller.addCardPageViewModel.newCardImage = \"\";\r\n                        // hide the card image row\r\n                        $('#add-card-page #add-card-image-container').css(\"display\", \"none\");\r\n                        // reset the page scroll position to the top\r\n                        $('#add-card-page .page__content').scrollTop(0);\r\n\r\n                        $('#secure-storage-modal').get(0).hide(); // hide loader\r\n                        // inform user that add has been successfully added to secure storage\r\n                        Materialize.toast('Card updated', 4000);\r\n                    }, 4000);\r\n                }).\r\n                catch(function(){\r\n                    $('#secure-storage-modal').get(0).hide(); // hide loader\r\n                    ons.notification.alert({title: \"Update Error\",\r\n                        messageHTML: '<ons-icon icon=\"md-close-circle-o\" size=\"30px\" ' +\r\n                        'style=\"color: red;\"></ons-icon> <span>' + (err.message || \"\") + ' Sorry, this card could not be updated. ' +\r\n                        '<br>You can try again' + '</span>',\r\n                        cancelable: true\r\n                    });\r\n                });\r\n            }\r\n            else { // this is a CREATE/ADD OPERATION\r\n\r\n                var newCardData = {\r\n                    cardUniqueId: \"\" + utopiasoftware.saveup.model.deviceUUID + Date.now(),\r\n                    cardHolderName: $('#add-card-form #add-card-card-holder').val(),\r\n                    cardNickName: $('#add-card-form #add-card-alias').val(),\r\n                    cardNumber: $('#add-card-form #add-card-card-number').val(),\r\n                    cvv: $('#add-card-form #add-card-cvv').val(),\r\n                    cardExpiryMonth: $('#add-card-form #add-card-expiry-month').val(),\r\n                    cardExpiryYear: $('#add-card-form #add-card-expiry-year').val(),\r\n                    cardBrand: utopiasoftware.saveup.controller.addCardPageViewModel.newCardBrand,\r\n                    cardLocale: utopiasoftware.saveup.controller.addCardPageViewModel.newCardLocale,\r\n                    cardImage: utopiasoftware.saveup.controller.addCardPageViewModel.newCardImage\r\n                };\r\n\r\n                // get the previous stored cards on the user's device\r\n                Promise.resolve(intel.security.secureStorage.read({'id':'postcash-user-cards'})).\r\n                then(function(instanceId){\r\n                    return Promise.resolve(intel.security.secureData.getData(instanceId));\r\n                }, function(errObject){\r\n                    if(errObject.code == 1){ // the secure card storage has not been created before\r\n                        return '[]'; // return an empty card data array\r\n                    }\r\n                    else{ // another error occurred (which is considered severe)\r\n                        throw errObject;\r\n                    }\r\n                }).\r\n                then(function(secureCardDataArray){\r\n                    secureCardDataArray = JSON.parse(secureCardDataArray); // convert the string data to an object\r\n                    secureCardDataArray.unshift(newCardData); // add the card to the beginning of the array collection\r\n                    // store the updated card collection securely on user's device\r\n                    return intel.security.secureData.createFromData({'data': JSON.stringify(secureCardDataArray)});\r\n                }).\r\n                then(function(instanceId){\r\n                    return intel.security.secureStorage.write({'id':'postcash-user-cards', 'instanceID': instanceId });\r\n                }).\r\n                then(function(){\r\n                    // wait for approximately 4 secs for the saving animation to run (at least once before concluding animation\r\n                    window.setTimeout(function(){\r\n                        // reset the form validator object on the page\r\n                        utopiasoftware.saveup.controller.addCardPageViewModel.formValidator.reset();\r\n                        // reset the form object\r\n                        $('#add-card-page #add-card-form').get(0).reset();\r\n                        // reset the card number validation check and all its related actions\r\n                        utopiasoftware.saveup.controller.addCardPageViewModel.\r\n                        isCardNumberValidated($('#add-card-page #add-card-verify-card'));\r\n                        // reset the new card brand, card general locale & card image\r\n                        utopiasoftware.saveup.controller.addCardPageViewModel.newCardBrand = \"Unknown\";\r\n                        utopiasoftware.saveup.controller.addCardPageViewModel.newCardLocale = \"Unknown\";\r\n                        utopiasoftware.saveup.controller.addCardPageViewModel.newCardImage = \"\";\r\n                        // hide the card image row\r\n                        $('#add-card-page #add-card-image-container').css(\"display\", \"none\");\r\n                        // reset the page scroll position to the top\r\n                        $('#add-card-page .page__content').scrollTop(0);\r\n\r\n                        $('#secure-storage-modal').get(0).hide(); // hide loader\r\n                        // inform user that add has been successfully added to secure storage\r\n                        Materialize.toast('New card added', 4000);\r\n                    }, 4000);\r\n                }).\r\n                catch(function(err){\r\n\r\n                    $('#secure-storage-modal').get(0).hide(); // hide loader\r\n                    ons.notification.alert({title: \"Save Error\",\r\n                        messageHTML: '<ons-icon icon=\"md-close-circle-o\" size=\"30px\" ' +\r\n                        'style=\"color: red;\"></ons-icon> <span>' + (err.message || \"\") + ' Sorry, this card could not be added. ' +\r\n                        '<br>You can try again' + '</span>',\r\n                        cancelable: true\r\n                    });\r\n                });\r\n\r\n            }\r\n\r\n        },\r\n\r\n\r\n        /**\r\n         * method is used to check if user has asked for card number to be validated.\r\n         * It sets or remove the appropriate attributes need to activate or deactivate\r\n         * remote card validation\r\n         */\r\n        isCardNumberValidated: function(checkElem){\r\n            // check if user wants card number validated or not\r\n            if($(checkElem).is(\":checked\")){ // user wants the card number remotely validated\r\n                // add the necessary attributes to the card number input in order to enable remote card number validation\r\n                $('#add-card-card-number').attr(\"data-parsley-remote-validator\", \"financialcardcheck\");\r\n                // display the notice that an internet connection is required for verification\r\n                $('#add-card-verify-card-notice').css(\"display\", \"block\");\r\n            }\r\n            else{ // user does not want card number remotely validated\r\n                // remove attributes to prevent remote card number validation\r\n                $('#add-card-card-number').removeAttr(\"data-parsley-remote-validator\");\r\n                // hide the notice that an internet connection is required for verification\r\n                $('#add-card-verify-card-notice').css(\"display\", \"none\");\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is used to listen for scroll event of the page content\r\n         *\r\n         * @param event\r\n         */\r\n        pageContentScrolled: function(event){\r\n\r\n            // set the current scrolltop position\r\n            utopiasoftware.saveup.controller.addCardPageViewModel.currentScrollPosition = $(this).scrollTop();\r\n\r\n            if(utopiasoftware.saveup.controller.addCardPageViewModel.currentScrollPosition >\r\n                utopiasoftware.saveup.controller.addCardPageViewModel.previousScrollPosition){ // user scrolled up\r\n                // set the current position as previous position\r\n                utopiasoftware.saveup.controller.addCardPageViewModel.previousScrollPosition =\r\n                    utopiasoftware.saveup.controller.addCardPageViewModel.currentScrollPosition;\r\n\r\n                // check if the header image left after scrolling is <= height of page toolbar\r\n                if((140 - utopiasoftware.saveup.controller.addCardPageViewModel.currentScrollPosition) <= 56){\r\n                    // the header image left after scrolling is <= height of page toolbar\r\n                    // check if the toolbar for the page has already been made opaque\r\n                    if(this.isToolBarOpaque != true){ // toolbar has not been made opaque\r\n\r\n                        $('#add-card-page ons-toolbar').removeClass(\"toolbar--transparent\"); // make the toolbar opaque\r\n                        // also pin the help header on the page just below the toolbar\r\n                        $('#add-card-page ons-list-header').css(\r\n                            {\"display\": \"block\", \"position\": \"fixed\", \"top\": \"56px\", \"width\": \"100%\"});\r\n                        this.isToolBarOpaque = true; // flag that toolbar has been made opaque\r\n                    }\r\n                }\r\n\r\n                return;\r\n            }\r\n\r\n            if(utopiasoftware.saveup.controller.addCardPageViewModel.currentScrollPosition <\r\n                utopiasoftware.saveup.controller.addCardPageViewModel.previousScrollPosition){ // user scrolled down\r\n                // set the current position as previous position\r\n                utopiasoftware.saveup.controller.addCardPageViewModel.previousScrollPosition =\r\n                    utopiasoftware.saveup.controller.addCardPageViewModel.currentScrollPosition;\r\n\r\n                // check if the header image left after scrolling is > height of page toolbar\r\n                if((140 - utopiasoftware.saveup.controller.addCardPageViewModel.currentScrollPosition) > 56){\r\n                    // the header image left after scrolling is > height of page toolbar\r\n                    // check if the toolbar for the page has already been made transparent\r\n                    if(this.isToolBarOpaque == true){ // toolbar has NOT been made transparent\r\n\r\n                        $('#add-card-page ons-toolbar').addClass(\"toolbar--transparent\"); // make the toolbar transparent\r\n                        // also unpin the help header on the page from just below the toolbar\r\n                        $('#add-card-page ons-list-header').css({\"display\": \"block\", \"position\": \"static\", \"top\": \"56px\"});\r\n                        this.isToolBarOpaque = false; // flag that toolbar has been made transparent\r\n                    }\r\n                }\r\n\r\n                return;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * custom parsley validator for financial cards (including visa, master, verve)\r\n         *\r\n         * @param jqxhr {jqueryXhr}\r\n         */\r\n        financialCardValidator: function(jqxhr){\r\n            var serverResponse = \"\"; // holds the server response\r\n\r\n            // check the validator response\r\n            if(jqxhr.status != 200){ // request was NOT success\r\n                // set new card brand as unknown\r\n                utopiasoftware.saveup.controller.addCardPageViewModel.newCardBrand = \"Unknown\";\r\n                // set the new card locale as unknown\r\n                utopiasoftware.saveup.controller.addCardPageViewModel.newCardLocale = \"Unknown\";\r\n                return false;\r\n            }\r\n\r\n            // convert the server response to json\r\n            serverResponse = JSON.parse(jqxhr.responseText.trim());\r\n\r\n            if(serverResponse.status != true){ // the server api response was NOT successful\r\n                // set new card brand as unknown\r\n                utopiasoftware.saveup.controller.addCardPageViewModel.newCardBrand = \"Unknown\";\r\n                // set the new card locale as unknown\r\n                utopiasoftware.saveup.controller.addCardPageViewModel.newCardLocale = \"Unknown\";\r\n                return false;\r\n            }\r\n\r\n            if(serverResponse.data.brand == \"\" || serverResponse.data.brand == \"Unknown\"){ // card could not be identified\r\n                // set new card brand as unknown\r\n                utopiasoftware.saveup.controller.addCardPageViewModel.newCardBrand = \"Unknown\";\r\n                // set the new card locale as unknown\r\n                utopiasoftware.saveup.controller.addCardPageViewModel.newCardLocale = \"Unknown\";\r\n                return false;\r\n            }\r\n\r\n            // get the brand of the new card\r\n            if(serverResponse.data.brand.toLocaleUpperCase().indexOf(\"MASTER\") >= 0){ // brand is a Mastercard\r\n                // set new card brand as mastercard\r\n                utopiasoftware.saveup.controller.addCardPageViewModel.newCardBrand = \"Mastercard\";\r\n            }\r\n            if(serverResponse.data.brand.toLocaleUpperCase().indexOf(\"VISA\") >= 0){ // brand is a Visa\r\n                // set new card brand as visa\r\n                utopiasoftware.saveup.controller.addCardPageViewModel.newCardBrand = \"Visa\";\r\n            }\r\n            if(serverResponse.data.brand.toLocaleUpperCase().indexOf(\"VERVE\") >= 0){ // brand is a Verve\r\n                // set new card brand as verve\r\n                utopiasoftware.saveup.controller.addCardPageViewModel.newCardBrand = \"Verve\";\r\n            }\r\n\r\n            // get the general locale of the new card\r\n            if(serverResponse.data.country_name.indexOf(\"Nigeria\") >= 0){ // card is local\r\n                // set the new card locale\r\n                utopiasoftware.saveup.controller.addCardPageViewModel.newCardLocale = \"local\";\r\n\r\n            }\r\n            if(serverResponse.data.country_name.indexOf(\"Nigeria\") < 0){ // card is international\r\n                // set the new card locale\r\n                utopiasoftware.saveup.controller.addCardPageViewModel.newCardLocale = \"international\";\r\n\r\n            }\r\n\r\n            return true; // validation successful\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * object is view-model for my-accounts-page page\r\n     */\r\n    myAccountsPageViewModel: {\r\n\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n            // enable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').attr(\"swipeable\", true);\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            function loadPageOnAppReady(){\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if(!ons.isReady() || utopiasoftware.saveup.model.isAppReady === false){\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                $('#app-main-navigator').get(0).topPage.onDeviceBackButton = function(){\r\n\r\n                    // check if the side menu is open\r\n                    if($('ons-splitter').get(0).left.isOpen){ // side menu open, so close it\r\n                        $('ons-splitter').get(0).left.close();\r\n                        return; // exit the method\r\n                    }\r\n\r\n                    $('#app-main-navigator').get(0).resetToPage(\"main-menu-page.html\");\r\n                };\r\n\r\n                // register listener for the pull-to-refresh widget\r\n                $('#my-accounts-pull-hook', $thisPage).on(\"changestate\", function(event){\r\n\r\n                    // check the state of the pull-to-refresh widget\r\n                    switch (event.originalEvent.state){\r\n                        case 'initial':\r\n                            // update the displayed icon\r\n                            $('#my-accounts-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"fa-long-arrow-down\" size=\"24px\"></ons-icon>');\r\n                            break;\r\n\r\n                        case 'preaction':\r\n\r\n                            $('#my-accounts-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"fa-long-arrow-up\" size=\"24px\"></ons-icon>');\r\n                            break;\r\n\r\n                        case 'action':\r\n                            $('#my-accounts-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"fa-repeat\" size=\"24px\" spin></ons-icon>');\r\n                            break;\r\n                    }\r\n                });\r\n\r\n                // add method to handle the loading action of the pull-to-refresh widget\r\n                $('#my-accounts-pull-hook', $thisPage).get(0).onAction = function(loadingDone){\r\n                    // disable pull-to-refresh widget till loading is done\r\n                    $('#my-accounts-pull-hook', $thisPage).attr(\"disabled\", true);\r\n\r\n                    // load the user's bank account data from the device secure store\r\n                    utopiasoftware.saveup.bankAccountOperations.loadMyAccountsData().\r\n                    then(function(banksAcctsArray){ // the user's bank acct array collection has been returned\r\n                        if(banksAcctsArray.length == 0){ // there are no bank account data available\r\n                            // remove the page preloader progress bar\r\n                            $('.progress', $thisPage).remove();\r\n                            // display the help button\r\n                            $('#my-accounts-help-1', $thisPage).css(\"display\", \"inline-block\");\r\n                            // enable the pull-to-refresh widget for the page\r\n                            $('#my-accounts-pull-hook', $thisPage).removeAttr(\"disabled\");\r\n                            // display a message to inform user that there are no cards available\r\n                            $('#my-accounts-page-message', $thisPage).css(\"display\", \"block\");\r\n                            // hide the error message from displaying\r\n                            $('#my-accounts-page-error', $thisPage).css(\"display\", \"none\");\r\n                            // hide the my-accounts-list from display\r\n                            $('#my-accounts-list', $thisPage).css(\"display\", \"none\");\r\n                            // enable the 'Add Account' button\r\n                            $('#my-accounts-add-account-button', $thisPage).removeAttr(\"disabled\");\r\n                            // flag that loading is done\r\n                            loadingDone();\r\n                        }\r\n                        else{ // there are card data available\r\n                            // empty the contents of the my accounts list\r\n                            $('#my-accounts-list', $thisPage).html(\"\");\r\n\r\n                            for(let index = 0; index < banksAcctsArray.length; index++){ // append the stored bank accounts to the \"My Accounts\" list\r\n                                // create the bank account content\r\n                                let bankAcctContent = `<div class=\"row\"><div class=\"col s12\"><div class=\"card horizontal\">\r\n                                <div class=\"card-image\" style=\"padding: 3%;\">\r\n                                <img src=\"${banksAcctsArray[index].bankAccountAvatar}\">\r\n                                </div>\r\n                                <div class=\"card-stacked\">\r\n                                <div class=\"card-content\" style=\"padding-bottom: 0;\">\r\n                                <div style=\"font-weight: bold; font-size: 0.75em; font-style: italic; color: #464646;\r\n                                padding-bottom: 0.5em;\">${banksAcctsArray[index].bankAccountName}</div>\r\n                                </div><div class=\"card-action\" style=\"font-weight: bold; font-size: 0.75em;\r\n                                color: #464646; padding-bottom: 0.5em;\">${banksAcctsArray[index].bankAccountNumber}</div>\r\n                                <div  class=\"card-action\" style=\"font-weight: bold; font-size: 0.75em;\r\n                                color: #464646; padding-bottom: 0.5em;\">${banksAcctsArray[index].bankName}</div>\r\n                                <div class=\"card-action\" style=\"padding: 0;\">\r\n                                <div style=\"display: inline-block; margin-left: auto; margin-right: auto\">\r\n                                <ons-button data-id=\"${banksAcctsArray[index].uniqueAccountId}\"\r\n                                data-acct-object='${JSON.stringify({senderAccountName: banksAcctsArray[index].bankAccountName, senderAccount: banksAcctsArray[index].bankAccountNumber,senderBankCode:banksAcctsArray[index].flutterwave_bankCode})}' modifier=\"quiet\" disable-auto-styling class=\"right\"\r\n                                        style=\"color: #464646; padding:0; margin-top: 0.5em; margin-left: 1em; margin-right: 1em;\"\r\n                                        onclick=\"utopiasoftware.saveup.controller.myAccountsPageViewModel.transferCashButtonClicked(this);\">\r\n                                <ons-icon icon=\"md-saveup-icon-saveup-transfer-cash\" size=\"29px\">\r\n                                </ons-icon>\r\n                                </ons-button>\r\n                                <ons-button data-id=\"${banksAcctsArray[index].uniqueAccountId}\" modifier=\"quiet\"\r\n                                disable-auto-styling class=\"right\"\r\n                                        style=\"color: #464646; padding:0; margin-top: 0.5em; margin-left: 1em;\"\r\n                                        onclick=\"utopiasoftware.saveup.controller.myAccountsPageViewModel.editAccountButtonClicked(this);\">\r\n                                   <ons-icon icon=\"md-edit\" size=\"25px\">\r\n                                </ons-icon>\r\n                                </ons-button>\r\n                                <ons-button data-id=\"${banksAcctsArray[index].uniqueAccountId}\" modifier=\"quiet\" disable-auto-styling class=\"right\"\r\n                                        style=\"color: #464646; padding:0; margin-top: 0.5em; margin-left: 1em;\"\r\n                                        onclick=\"utopiasoftware.saveup.controller.myAccountsPageViewModel.deleteAccountButtonClicked(this);\">\r\n                                <ons-icon icon=\"md-delete\" size=\"25px\"></ons-icon>\r\n                                </ons-button>\r\n                                </div></div></div></div></div></div>` ;\r\n                                // append the bank account content to the \"My Accounts\" list\r\n                                $('#my-accounts-list', $thisPage).append(bankAcctContent);\r\n                            }\r\n                            // remove the page preloader progress bar\r\n                            $('.progress', $thisPage).remove();\r\n                            // display the help button\r\n                            $('#my-accounts-help-1', $thisPage).css(\"display\", \"inline-block\");\r\n                            // enable the pull-to-refresh widget for the page\r\n                            $('#my-accounts-pull-hook', $thisPage).removeAttr(\"disabled\");\r\n                            // hide message to inform user that there are no accounts available\r\n                            $('#my-accounts-page-message', $thisPage).css(\"display\", \"none\");\r\n                            // hide the error message from displaying\r\n                            $('#my-accounts-page-error', $thisPage).css(\"display\", \"none\");\r\n                            // display the my-accounts-list\r\n                            $('#my-accounts-list', $thisPage).css(\"display\", \"block\");\r\n                            // enable the 'Add Account' button\r\n                            $('#my-accounts-add-account-button', $thisPage).removeAttr(\"disabled\");\r\n                            // flag that loading is done\r\n                            loadingDone();\r\n                        }\r\n                    }).\r\n                    catch(function(){ // an error occurred, so display the error message to the user\r\n                        // remove the page preloader progress bar\r\n                        $('.progress', $thisPage).remove();\r\n                        // display the help button\r\n                        $('#my-accounts-help-1', $thisPage).css(\"display\", \"inline-block\");\r\n                        // enable the pull-to-refresh widget for the page\r\n                        $('#my-accounts-pull-hook', $thisPage).removeAttr(\"disabled\");\r\n                        // hide a message to inform user that there are no accounts available\r\n                        $('#my-accounts-page-message', $thisPage).css(\"display\", \"none\");\r\n                        // display the error message to user\r\n                        $('#my-accounts-page-error', $thisPage).css(\"display\", \"block\");\r\n                        // hide the my-accounts-list from display\r\n                        $('#my-accounts-list', $thisPage).css(\"display\", \"none\");\r\n                        // disable the 'Add Account' button\r\n                        $('#my-accounts-add-account-button', $thisPage).attr(\"disabled\", true);\r\n                        // flag that loading is done\r\n                        loadingDone();\r\n                    });\r\n                };\r\n\r\n                // load the user's bank account data from the device secure store\r\n                utopiasoftware.saveup.bankAccountOperations.loadMyAccountsData().\r\n                then(function(banksAcctsArray){ // the user's bank acct array collection has been returned\r\n                    if(banksAcctsArray.length == 0){ // there are no bank account data available\r\n                        // remove the page preloader progress bar\r\n                        $('.progress', $thisPage).remove();\r\n                        // display the help button\r\n                        $('#my-accounts-help-1', $thisPage).css(\"display\", \"inline-block\");\r\n                        // enable the pull-to-refresh widget for the page\r\n                        $('#my-accounts-pull-hook', $thisPage).removeAttr(\"disabled\");\r\n                        // display a message to inform user that there are no cards available\r\n                        $('#my-accounts-page-message', $thisPage).css(\"display\", \"block\");\r\n                        // hide the error message from displaying\r\n                        $('#my-accounts-page-error', $thisPage).css(\"display\", \"none\");\r\n                        // hide the my-accounts-list from display\r\n                        $('#my-accounts-list', $thisPage).css(\"display\", \"none\");\r\n                        // enable the 'Add Account' button\r\n                        $('#my-accounts-add-account-button', $thisPage).removeAttr(\"disabled\");\r\n                    }\r\n                    else{ // there are card data available\r\n                        // empty the contents of the my accounts list\r\n                        $('#my-accounts-list', $thisPage).html(\"\");\r\n\r\n                        for(let index = 0; index < banksAcctsArray.length; index++){ // append the stored bank accounts to the \"My Accounts\" list\r\n                            // create the bank account content\r\n                            let bankAcctContent = `<div class=\"row\"><div class=\"col s12\"><div class=\"card horizontal\">\r\n                                <div class=\"card-image\" style=\"padding: 3%;\">\r\n                                <img src=\"${banksAcctsArray[index].bankAccountAvatar}\">\r\n                                </div>\r\n                                <div class=\"card-stacked\">\r\n                                <div class=\"card-content\" style=\"padding-bottom: 0;\">\r\n                                <div style=\"font-weight: bold; font-size: 0.75em; font-style: italic; color: #464646;\r\n                                padding-bottom: 0.5em;\">${banksAcctsArray[index].bankAccountName}</div>\r\n                                </div><div class=\"card-action\" style=\"font-weight: bold; font-size: 0.75em;\r\n                                color: #464646; padding-bottom: 0.5em;\">${banksAcctsArray[index].bankAccountNumber}</div>\r\n                                <div  class=\"card-action\" style=\"font-weight: bold; font-size: 0.75em;\r\n                                color: #464646; padding-bottom: 0.5em;\">${banksAcctsArray[index].bankName}</div>\r\n                                <div class=\"card-action\" style=\"padding: 0;\">\r\n                                <div style=\"display: inline-block; margin-left: auto; margin-right: auto\">\r\n                                <ons-button data-id=\"${banksAcctsArray[index].uniqueAccountId}\"\r\n                                data-acct-object='${JSON.stringify({senderAccountName: banksAcctsArray[index].bankAccountName, senderAccount: banksAcctsArray[index].bankAccountNumber,senderBankCode:banksAcctsArray[index].flutterwave_bankCode})}' modifier=\"quiet\" disable-auto-styling class=\"right\"\r\n                                        style=\"color: #464646; padding:0; margin-top: 0.5em; margin-left: 1em; margin-right: 1em;\"\r\n                                        onclick=\"utopiasoftware.saveup.controller.myAccountsPageViewModel.transferCashButtonClicked(this);\">\r\n                                <ons-icon icon=\"md-saveup-icon-saveup-transfer-cash\" size=\"29px\">\r\n                                </ons-icon>\r\n                                </ons-button>\r\n                                <ons-button data-id=\"${banksAcctsArray[index].uniqueAccountId}\" modifier=\"quiet\"\r\n                                disable-auto-styling class=\"right\"\r\n                                        style=\"color: #464646; padding:0; margin-top: 0.5em; margin-left: 1em;\"\r\n                                        onclick=\"utopiasoftware.saveup.controller.myAccountsPageViewModel.editAccountButtonClicked(this);\">\r\n                                   <ons-icon icon=\"md-edit\" size=\"25px\">\r\n                                </ons-icon>\r\n                                </ons-button>\r\n                                <ons-button data-id=\"${banksAcctsArray[index].uniqueAccountId}\" modifier=\"quiet\" disable-auto-styling class=\"right\"\r\n                                        style=\"color: #464646; padding:0; margin-top: 0.5em; margin-left: 1em;\"\r\n                                        onclick=\"utopiasoftware.saveup.controller.myAccountsPageViewModel.deleteAccountButtonClicked(this);\">\r\n                                <ons-icon icon=\"md-delete\" size=\"25px\"></ons-icon>\r\n                                </ons-button>\r\n                                </div></div></div></div></div></div>` ;\r\n                            // append the bank account content to the \"My Accounts\" list\r\n                            $('#my-accounts-list', $thisPage).append(bankAcctContent);\r\n                        }\r\n                        // remove the page preloader progress bar\r\n                        $('.progress', $thisPage).remove();\r\n                        // display the help button\r\n                        $('#my-accounts-help-1', $thisPage).css(\"display\", \"inline-block\");\r\n                        // enable the pull-to-refresh widget for the page\r\n                        $('#my-accounts-pull-hook', $thisPage).removeAttr(\"disabled\");\r\n                        // hide message to inform user that there are no accounts available\r\n                        $('#my-accounts-page-message', $thisPage).css(\"display\", \"none\");\r\n                        // hide the error message from displaying\r\n                        $('#my-accounts-page-error', $thisPage).css(\"display\", \"none\");\r\n                        // display the my-accounts-list\r\n                        $('#my-accounts-list', $thisPage).css(\"display\", \"block\");\r\n                        // enable the 'Add Account' button\r\n                        $('#my-accounts-add-account-button', $thisPage).removeAttr(\"disabled\");\r\n                    }\r\n                }).\r\n                catch(function(){ // an error occurred, so display the error message to the user\r\n                    // remove the page preloader progress bar\r\n                    $('.progress', $thisPage).remove();\r\n                    // display the help button\r\n                    $('#my-accounts-help-1', $thisPage).css(\"display\", \"inline-block\");\r\n                    // enable the pull-to-refresh widget for the page\r\n                    $('#my-accounts-pull-hook', $thisPage).removeAttr(\"disabled\");\r\n                    // hide a message to inform user that there are no accounts available\r\n                    $('#my-accounts-page-message', $thisPage).css(\"display\", \"none\");\r\n                    // display the error message to user\r\n                    $('#my-accounts-page-error', $thisPage).css(\"display\", \"block\");\r\n                    // hide the my-accounts-list from display\r\n                    $('#my-accounts-list', $thisPage).css(\"display\", \"none\");\r\n                    // disable the 'Add Account' button\r\n                    $('#my-accounts-add-account-button', $thisPage).attr(\"disabled\", true);\r\n                });\r\n\r\n                // hide the loader\r\n                $('#loader-modal').get(0).hide();\r\n\r\n            }\r\n\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         *\r\n         * @param event\r\n         */\r\n        pageShow: function(event){\r\n            var $thisPage = $(event.target); // get the current page shown\r\n            // enable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').attr(\"swipeable\", true);\r\n\r\n            // check if the data on the page should be refreshed\r\n            if($('#app-main-navigator').get(0).topPage.data && $('#app-main-navigator').get(0).topPage.data.refresh\r\n                && $('#app-main-navigator').get(0).topPage.data.refresh === true){ // user wants this page refreshed\r\n                // add & display the preloader for the page\r\n                $('#my-accounts-pull-hook', $thisPage).after('<div class=\"progress\"><div class=\"indeterminate\"></div> </div>');\r\n\r\n                // load the user's bank account data from the device secure store\r\n                utopiasoftware.saveup.bankAccountOperations.loadMyAccountsData().\r\n                then(function(banksAcctsArray){ // the user's bank acct array collection has been returned\r\n                    if(banksAcctsArray.length == 0){ // there are no bank account data available\r\n                        // remove the page preloader progress bar\r\n                        $('.progress', $thisPage).remove();\r\n                        // display the help button\r\n                        $('#my-accounts-help-1', $thisPage).css(\"display\", \"inline-block\");\r\n                        // enable the pull-to-refresh widget for the page\r\n                        $('#my-accounts-pull-hook', $thisPage).removeAttr(\"disabled\");\r\n                        // display a message to inform user that there are no cards available\r\n                        $('#my-accounts-page-message', $thisPage).css(\"display\", \"block\");\r\n                        // hide the error message from displaying\r\n                        $('#my-accounts-page-error', $thisPage).css(\"display\", \"none\");\r\n                        // hide the my-accounts-list from display\r\n                        $('#my-accounts-list', $thisPage).css(\"display\", \"none\");\r\n                        // enable the 'Add Account' button\r\n                        $('#my-accounts-add-account-button', $thisPage).removeAttr(\"disabled\");\r\n                    }\r\n                    else{ // there are card data available\r\n                        // empty the contents of the my accounts list\r\n                        $('#my-accounts-list', $thisPage).html(\"\");\r\n\r\n                        for(let index = 0; index < banksAcctsArray.length; index++){ // append the stored bank accounts to the \"My Accounts\" list\r\n                            // create the bank account content\r\n                            let bankAcctContent = `<div class=\"row\"><div class=\"col s12\"><div class=\"card horizontal\">\r\n                                <div class=\"card-image\" style=\"padding: 3%;\">\r\n                                <img src=\"${banksAcctsArray[index].bankAccountAvatar}\">\r\n                                </div>\r\n                                <div class=\"card-stacked\">\r\n                                <div class=\"card-content\" style=\"padding-bottom: 0;\">\r\n                                <div style=\"font-weight: bold; font-size: 0.75em; font-style: italic; color: #464646;\r\n                                padding-bottom: 0.5em;\">${banksAcctsArray[index].bankAccountName}</div>\r\n                                </div><div class=\"card-action\" style=\"font-weight: bold; font-size: 0.75em;\r\n                                color: #464646; padding-bottom: 0.5em;\">${banksAcctsArray[index].bankAccountNumber}</div>\r\n                                <div  class=\"card-action\" style=\"font-weight: bold; font-size: 0.75em;\r\n                                color: #464646; padding-bottom: 0.5em;\">${banksAcctsArray[index].bankName}</div>\r\n                                <div class=\"card-action\" style=\"padding: 0;\">\r\n                                <div style=\"display: inline-block; margin-left: auto; margin-right: auto\">\r\n                                <ons-button data-id=\"${banksAcctsArray[index].uniqueAccountId}\"\r\n                                data-acct-object='${JSON.stringify({senderAccountName: banksAcctsArray[index].bankAccountName, senderAccount: banksAcctsArray[index].bankAccountNumber,senderBankCode:banksAcctsArray[index].flutterwave_bankCode})}' modifier=\"quiet\" disable-auto-styling class=\"right\"\r\n                                        style=\"color: #464646; padding:0; margin-top: 0.5em; margin-left: 1em; margin-right: 1em;\"\r\n                                        onclick=\"utopiasoftware.saveup.controller.myAccountsPageViewModel.transferCashButtonClicked(this);\">\r\n                                <ons-icon icon=\"md-saveup-icon-saveup-transfer-cash\" size=\"29px\">\r\n                                </ons-icon>\r\n                                </ons-button>\r\n                                <ons-button data-id=\"${banksAcctsArray[index].uniqueAccountId}\" modifier=\"quiet\"\r\n                                disable-auto-styling class=\"right\"\r\n                                        style=\"color: #464646; padding:0; margin-top: 0.5em; margin-left: 1em;\"\r\n                                        onclick=\"utopiasoftware.saveup.controller.myAccountsPageViewModel.editAccountButtonClicked(this);\">\r\n                                   <ons-icon icon=\"md-edit\" size=\"25px\">\r\n                                </ons-icon>\r\n                                </ons-button>\r\n                                <ons-button data-id=\"${banksAcctsArray[index].uniqueAccountId}\" modifier=\"quiet\" disable-auto-styling class=\"right\"\r\n                                        style=\"color: #464646; padding:0; margin-top: 0.5em; margin-left: 1em;\"\r\n                                        onclick=\"utopiasoftware.saveup.controller.myAccountsPageViewModel.deleteAccountButtonClicked(this);\">\r\n                                <ons-icon icon=\"md-delete\" size=\"25px\"></ons-icon>\r\n                                </ons-button>\r\n                                </div></div></div></div></div></div>` ;\r\n                            // append the bank account content to the \"My Accounts\" list\r\n                            $('#my-accounts-list', $thisPage).append(bankAcctContent);\r\n                        }\r\n                        // remove the page preloader progress bar\r\n                        $('.progress', $thisPage).remove();\r\n                        // display the help button\r\n                        $('#my-accounts-help-1', $thisPage).css(\"display\", \"inline-block\");\r\n                        // enable the pull-to-refresh widget for the page\r\n                        $('#my-accounts-pull-hook', $thisPage).removeAttr(\"disabled\");\r\n                        // hide message to inform user that there are no accounts available\r\n                        $('#my-accounts-page-message', $thisPage).css(\"display\", \"none\");\r\n                        // hide the error message from displaying\r\n                        $('#my-accounts-page-error', $thisPage).css(\"display\", \"none\");\r\n                        // display the my-accounts-list\r\n                        $('#my-accounts-list', $thisPage).css(\"display\", \"block\");\r\n                        // enable the 'Add Account' button\r\n                        $('#my-accounts-add-account-button', $thisPage).removeAttr(\"disabled\");\r\n                    }\r\n                }).\r\n                catch(function(){ // an error occurred, so display the error message to the user\r\n                    // remove the page preloader progress bar\r\n                    $('.progress', $thisPage).remove();\r\n                    // display the help button\r\n                    $('#my-accounts-help-1', $thisPage).css(\"display\", \"inline-block\");\r\n                    // enable the pull-to-refresh widget for the page\r\n                    $('#my-accounts-pull-hook', $thisPage).removeAttr(\"disabled\");\r\n                    // hide a message to inform user that there are no accounts available\r\n                    $('#my-accounts-page-message', $thisPage).css(\"display\", \"none\");\r\n                    // display the error message to user\r\n                    $('#my-accounts-page-error', $thisPage).css(\"display\", \"block\");\r\n                    // hide the my-accounts-list from display\r\n                    $('#my-accounts-list', $thisPage).css(\"display\", \"none\");\r\n                    // disable the 'Add Account' button\r\n                    $('#my-accounts-add-account-button', $thisPage).attr(\"disabled\", true);\r\n                });\r\n            }\r\n\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when the 'Add Account' button is clicked\r\n         */\r\n        addAccountButtonClicked: function(){\r\n            $('#app-main-navigator').get(0).pushPage(\"add-account-page.html\", {\r\n                animation: \"lift-md\"\r\n            });\r\n        },\r\n\r\n\r\n        /**\r\n         * method is used to trigger the delete operation of a user's bank account\r\n         * and updating the user-interface (UI)\r\n         *\r\n         * @param buttonElem\r\n         */\r\n        deleteAccountButtonClicked: function(buttonElem){\r\n\r\n            // confirm that user wants to delete the account before proceeding\r\n            ons.notification.confirm('Do you want to delete this bank account?', {title: 'Confirm Delete',\r\n                    buttonLabels: ['No', 'Yes']}) // Ask for confirmation\r\n                .then(function(index) {\r\n                    if (index === 1) { // YES button clicked\r\n                        // call the utility method used to delete a specified bank account\r\n                        utopiasoftware.saveup.bankAccountOperations.deleteMyAccount($(buttonElem).attr(\"data-id\")).\r\n                        then(function(){ // account has been deleted\r\n                            $(buttonElem).closest('.row').remove(); // remove the account from display\r\n                            // inform the user that card was deleted\r\n                            Materialize.toast('Bank Account deleted', 3000);\r\n                        }).\r\n                        catch(function(){\r\n                            // inform the user that the specified bank account could not be deleted\r\n                            window.plugins.toast.showWithOptions({\r\n                                message: \"Sorry, the bank account could not be deleted.\\n Try again\",\r\n                                duration: 4000,\r\n                                position: \"top\",\r\n                                styling: {\r\n                                    opacity: 1,\r\n                                    backgroundColor: '#ff0000', //red\r\n                                    textColor: '#FFFFFF',\r\n                                    textSize: 14\r\n                                }\r\n                            }, function(toastEvent){\r\n                                if(toastEvent && toastEvent.event == \"touch\"){ // user tapped the toast, so hide toast immediately\r\n                                    window.plugins.toast.hide();\r\n                                }\r\n                            });\r\n                        });\r\n                    }\r\n                });\r\n        },\r\n\r\n\r\n        /**\r\n         * method is used to trigger the edit operation of a user's bank account\r\n         * and updating/changing the user-interface (UI)\r\n         *\r\n         * @param buttonElem\r\n         */\r\n        editAccountButtonClicked: function(buttonElem){\r\n            $('#app-main-navigator').get(0).pushPage(\"add-account-page.html\", {\r\n                animation: \"lift-md\", data: {edit: $(buttonElem).attr(\"data-id\")}\r\n            });\r\n        },\r\n\r\n        /**\r\n         * method is used to trigger the transfer cash operation. It uses the\r\n         * selected user's 'My Account' object as the sender account for the initiated\r\n         * cash transfer\r\n         *\r\n         * @param buttonElem\r\n         */\r\n        transferCashButtonClicked: function(buttonElem){\r\n\r\n            // ask user for secure PIN before proceeding. secure pin MUST match\r\n            ons.notification.prompt({title: \"Security Check\", id: \"pin-security-check\", class: \"utopiasoftware-no-style\",\r\n                messageHTML: '<div><ons-icon icon=\"ion-lock-combination\" size=\"24px\" ' +\r\n                'style=\"color: #b388ff; float: left; width: 26px;\"></ons-icon> <span style=\"float: right; width: calc(100% - 26px);\">' +\r\n                'Please enter your PostCash Secure PIN to proceed</span></div>',\r\n                cancelable: true, placeholder: \"Secure PIN\", inputType: \"number\", defaultValue: \"\", autofocus: true,\r\n                submitOnEnter: true\r\n            }).\r\n            then(function(userInput){ // user has provided a secured PIN , now authenticate it\r\n                if(userInput === utopiasoftware.saveup.model.appUserDetails.securePin){ // authentication successful\r\n                    // close the 'verify account' the bottom sheets\r\n                    $('#verify-account-bottom-sheet').modal('close');\r\n                    $('#transfer-cash-page').remove(); // remove previous transfer cash pages\r\n                    // call the transfer-cash=page and pass the 'my account' details contained in the data attribute as sender details data\r\n                    $('#app-main-navigator').get(0).pushPage(\"transfer-cash-page.html\", {\r\n                        data: {\r\n                            sender_details: JSON.parse($(buttonElem).attr(\"data-acct-object\"))}\r\n                    }); // navigate to the specified page\r\n                }\r\n                else{ // inform user that security check failed/user authentication failed\r\n                    ons.notification.alert({title: \"Security Check\",\r\n                        messageHTML: '<ons-icon icon=\"md-close-circle-o\" size=\"30px\" ' +\r\n                        'style=\"color: red;\"></ons-icon> <span>' + 'Security check failed. Invalid credentials' + '</span>',\r\n                        cancelable: true\r\n                    });\r\n                }\r\n            }).\r\n            catch(function(){});\r\n\r\n            return;\r\n        }\r\n\r\n    },\r\n\r\n\r\n    /**\r\n     * object is view-model for add-account page\r\n     */\r\n    addAccountPageViewModel: {\r\n\r\n        /**\r\n         * used to hold the parsley form validation object for the page\r\n         */\r\n        formValidator: null,\r\n\r\n        /**\r\n         * property used to keep track of the immediate last scroll position of the\r\n         * page content\r\n         */\r\n        previousScrollPosition: 0,\r\n\r\n        /**\r\n         * property used to keep track of the current scroll position of the\r\n         * page content\r\n         */\r\n        currentScrollPosition: 0,\r\n\r\n        /**\r\n         * property stores the name of the bank account being added.\r\n         * Default value is an empty string\r\n         */\r\n        bankAccountName: \"\",\r\n\r\n        /**\r\n         * property holds the image to be used for the bank account\r\n         */\r\n        bankAccountImage: \"\",\r\n\r\n        /**\r\n         * property holds the randomly generated number used to generate\r\n         * bank account avatar images\r\n         */\r\n        bankAccountImageRandomNum: null,\r\n\r\n        /**\r\n         * property holds authorisation token used for\r\n         * verifying bank account number\r\n         */\r\n        tokenData: \"\",\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n            // find all onsen-ui input targets and insert a special class to prevent materialize-css from updating the styles\r\n            $('ons-input input', $thisPage).addClass('utopiasoftware-no-style');\r\n            // disable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').removeAttr(\"swipeable\", true);\r\n\r\n            // reset the previous & current scroll positions of the page contents\r\n            utopiasoftware.saveup.controller.addAccountPageViewModel.previousScrollPosition = 0;\r\n            utopiasoftware.saveup.controller.addAccountPageViewModel.currentScrollPosition = 0;\r\n\r\n            // reset the bank account properties\r\n            utopiasoftware.saveup.controller.addAccountPageViewModel.bankAccountName = \"\";\r\n            utopiasoftware.saveup.controller.addAccountPageViewModel.tokenData = \"\";\r\n            utopiasoftware.saveup.controller.addAccountPageViewModel.bankAccountImage = \"\";\r\n\r\n            // generate the random number used to display the bank account image/avatar\r\n            var randomGen = new Random(Random.engines.nativeMath); // random number generator\r\n            // generate the random number\r\n            utopiasoftware.saveup.controller.addAccountPageViewModel.bankAccountImageRandomNum = randomGen.integer(1, 6);\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            function loadPageOnAppReady(){\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if(!ons.isReady() || utopiasoftware.saveup.model.isAppReady === false){\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n\r\n                // listen for the back button event\r\n                $('#app-main-navigator').get(0).topPage.onDeviceBackButton = function(){\r\n\r\n                    // check if the side menu is open\r\n                    if($('ons-splitter').get(0).left.isOpen){ // side menu open, so close it\r\n                        $('ons-splitter').get(0).left.close();\r\n                        return; // exit the method\r\n                    }\r\n\r\n                    $('#app-main-navigator').get(0).popPage();\r\n                };\r\n\r\n                // listen for the scroll event of the page content\r\n                $('#add-account-page .page__content').on(\"scroll\", utopiasoftware.saveup.controller.addAccountPageViewModel.pageContentScrolled);\r\n\r\n                // initialise the form validation\r\n                utopiasoftware.saveup.controller.addAccountPageViewModel.formValidator = $('#add-account-form').parsley();\r\n\r\n                // attach listener for the 'save' button click\r\n                $('#add-account-save-button').get(0).onclick = function(){\r\n                    // check if the user requested for remote account number validation\r\n                    if($('#add-account-verify-account').is(\":checked\")){ //user asked for remote validation\r\n                        // display loader message to the user\r\n                        $('#loader-modal #loader-modal-message').html(\"Preparing Device Storage...\");\r\n                        $('#loader-modal').get(0).show();\r\n                        // request for gateway authorization token used in account number validation\r\n                        utopiasoftware.saveup.moneyWaveObject.useToken.\r\n                        then(function(tokenData){\r\n                            // set the token data used for verifying the bank account number\r\n                            utopiasoftware.saveup.controller.addAccountPageViewModel.tokenData = tokenData;\r\n                            // hide loader message\r\n                            $('#loader-modal').get(0).hide();\r\n                            // run the validation method for the create account form\r\n                            utopiasoftware.saveup.controller.addAccountPageViewModel.formValidator.whenValidate();\r\n                        }).\r\n                        catch(function(){\r\n                            // clear the token data used for verifying the bank account number\r\n                            utopiasoftware.saveup.controller.addAccountPageViewModel.tokenData = \"\";\r\n                            // hide loader message\r\n                            $('#loader-modal').get(0).hide();\r\n                            // run the validation method for the create account form\r\n                            utopiasoftware.saveup.controller.addAccountPageViewModel.formValidator.whenValidate();\r\n                        });\r\n                    }\r\n                    else{ // user did not ask for remote account number validation\r\n                        // run the validation method for the create account form\r\n                        utopiasoftware.saveup.controller.addAccountPageViewModel.formValidator.whenValidate();\r\n                    }\r\n                };\r\n\r\n                // listen for form field validation failure event\r\n                utopiasoftware.saveup.controller.addAccountPageViewModel.formValidator.on('field:ajaxoptions',\r\n                    function(fieldInstance, ajaxOptions){\r\n                        // edit the ajax options object to include the necessary authorization header\r\n                        ajaxOptions.headers = {\"Authorization\":utopiasoftware.saveup.controller.addAccountPageViewModel.tokenData};\r\n                        ajaxOptions.data = JSON.stringify({\r\n                            account_number: $('#add-account-form #add-account-number').val(),\r\n                            bank_code: $('#add-account-form #add-account-choose-bank').val()\r\n                        });\r\n\r\n                        // display the loading icon for account number validation\r\n                        $('#add-account-number-validation-loading', $thisPage).css(\"display\", \"block\");\r\n                    });\r\n\r\n                // listen for form field validation failure event\r\n                utopiasoftware.saveup.controller.addAccountPageViewModel.formValidator.on('field:error', function(fieldInstance) {\r\n                    // get the element that triggered the field validation error and use it to display tooltip\r\n                    // display tooltip\r\n                    $(fieldInstance.$element).parent().find('label:eq(0)').addClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                    $(fieldInstance.$element).parent().find('label:eq(0)').attr(\"data-hint\", fieldInstance.getErrorsMessages()[0]);\r\n                    // check if the element that triggered that validation error was the account number input\r\n                    if($(fieldInstance.$element).is('#add-account-number')){ // it is the account number input\r\n                        // hide the loading icon\r\n                        $('#add-account-number-validation-loading', $thisPage).css(\"display\", \"none\");\r\n\r\n                        // check if the user requested for remote account number validation\r\n                        if($('#add-account-verify-account').is(\":checked\")){ //user asked for remote validation\r\n                            // empty the content of the account name input (based on remote validation result)\r\n                            $('#add-account-page #add-account-account-name').val(\"\");\r\n                        }\r\n                        else{ // user did not ask for remote account number validation\r\n                        }\r\n                    }\r\n                });\r\n\r\n                // listen for form field validation success event\r\n                utopiasoftware.saveup.controller.addAccountPageViewModel.formValidator.on('field:success', function(fieldInstance) {\r\n                    // remove tooltip from element\r\n                    $(fieldInstance.$element).parent().find('label:eq(0)').removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                    $(fieldInstance.$element).parent().find('label:eq(0)').removeAttr(\"data-hint\");\r\n                    // check if the element that triggered that validation success was the account number input\r\n                    if($(fieldInstance.$element).is('#add-account-number')){ // it is the account number input\r\n                        // hide the loading icon\r\n                        $('#add-account-number-validation-loading', $thisPage).css(\"display\", \"none\");\r\n                        // check if the user requested for remote account number validation\r\n                        if($('#add-account-verify-account').is(\":checked\")){ //user asked for remote validation\r\n                            // display the account name to the user (based on remote validation result)\r\n                            $('#add-account-page #add-account-account-name').val(utopiasoftware.saveup.controller.\r\n                                addAccountPageViewModel.bankAccountName);\r\n                            // update the display of text fields\r\n                            Materialize.updateTextFields();\r\n                        }\r\n                        else{ // user did not ask for remote account number validation\r\n                        }\r\n                    }\r\n                });\r\n\r\n                // listen for form validation success\r\n                utopiasoftware.saveup.controller.addAccountPageViewModel.formValidator.on('form:success',\r\n                    utopiasoftware.saveup.controller.addAccountPageViewModel.addAccountFormValidated);\r\n\r\n                /** dynamically create the contents of the various select elements **/\r\n                    // retrieve the sorted array of banks\r\n                Promise.resolve(utopiasoftware.saveup.sortBanksData()).\r\n                then(function(bankArrayData){\r\n                    var optionTags = \"\"; // string to hold all created option tags\r\n\r\n                    // get each object in bank array and use it to create the select element\r\n                    for(var index = 0; index < bankArrayData.length; index++){\r\n                        var bankObject = bankArrayData[index]; // get the bank object\r\n                        // update the banks select element option tags\r\n                        for(var prop in bankObject){\r\n                            optionTags += '<option value=\"' + prop + '\">' + bankObject[prop] + '</option>';\r\n                        }\r\n                    }\r\n\r\n                    $('#add-account-choose-bank', $thisPage).append(optionTags); // append all the created option tags\r\n                    // initialise the select element\r\n                    $('#add-account-choose-bank', $thisPage).material_select();\r\n                    return; // return at this point, so the page can continue initialisation\r\n                }).\r\n                then(function(){\r\n\r\n                    // initialise the character counter plugin\r\n                    $('#add-account-number', $thisPage).characterCounter();\r\n                    return;\r\n                }).\r\n                then(function(){\r\n                    // check if the page was sent a bank account id.\r\n                    // if so preload the bank account data into the form\r\n                    if($('#app-main-navigator').get(0).topPage.data && $('#app-main-navigator').get(0).topPage.data.edit){\r\n                        // get the details of the card to be edited\r\n                        utopiasoftware.saveup.bankAccountOperations.\r\n                        getMyAccount($('#app-main-navigator').get(0).topPage.data.edit).then(function(bankAcct){\r\n                            $('#add-account-page #add-account-unique-id').val(bankAcct.uniqueAccountId);\r\n                            $('#add-account-page #add-account-number').val(bankAcct.bankAccountNumber);\r\n                            $('#add-account-page #add-account-account-name').val(bankAcct.bankAccountName);\r\n                            $('#add-account-page #add-account-choose-bank').val(bankAcct.flutterwave_bankCode);\r\n                            $('#add-account-page #hidden-choose-bank-input').val(bankAcct.flutterwave_bankCode);\r\n\r\n                            // re-update the form input fields\r\n                            Materialize.updateTextFields();\r\n                            //re-initialise the form select elements\r\n                            $('select', $thisPage).material_select();\r\n\r\n                            // remove the progress indeterminate loader\r\n                            $('.progress', $thisPage).remove();\r\n                            // make the add account form visible\r\n                            $('#add-account-form', $thisPage).css(\"display\", \"block\");\r\n                            // enable the 'Cancel' & 'Save' buttons\r\n                            $('#add-account-cancel-button, #add-account-save-button', $thisPage).removeAttr(\"disabled\");\r\n                            // hide the loader\r\n                            $('#loader-modal').get(0).hide();\r\n                        });\r\n                    }\r\n                    else {\r\n                        // remove the progress indeterminate loader\r\n                        $('.progress', $thisPage).remove();\r\n                        // make the add account form visible\r\n                        $('#add-account-form', $thisPage).css(\"display\", \"block\");\r\n                        // enable the 'Cancel' & 'Save' buttons\r\n                        $('#add-account-cancel-button, #add-account-save-button', $thisPage).removeAttr(\"disabled\");\r\n                        // hide the loader\r\n                        $('#loader-modal').get(0).hide();\r\n                    }\r\n                }).\r\n                catch();\r\n\r\n\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the page is hidden\r\n         * @param event\r\n         */\r\n        pageHide: (event) => {\r\n            try {\r\n                // remove any tooltip being displayed on all forms on the page\r\n                $('#add-account-page [data-hint]').removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                $('#add-account-page [data-hint]').removeAttr(\"data-hint\");\r\n                // reset the form validator object on the page\r\n                utopiasoftware.saveup.controller.addAccountPageViewModel.formValidator.reset();\r\n            }\r\n            catch(err){}\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the page is destroyed\r\n         * @param event\r\n         */\r\n        pageDestroy: (event) => {\r\n            try{\r\n                // remove any tooltip being displayed on all forms on the page\r\n                $('#add-account-page [data-hint]').removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                $('#add-account-page [data-hint]').removeAttr(\"data-hint\");\r\n                // destroy the form validator objects on the page\r\n                utopiasoftware.saveup.controller.addAccountPageViewModel.formValidator.destroy();\r\n                // destroy the form inputs which need to be destroyed\r\n                $('#add-account-page select').material_select('destroy');\r\n                $('#add-account-page #add-account-number').off();\r\n                $('#add-account-page #add-account-number').removeData();\r\n            }\r\n            catch(err){}\r\n        },\r\n\r\n        /**\r\n         * method is triggered when add card form is successfully validated\r\n         */\r\n        addAccountFormValidated: function(){\r\n\r\n            // display the secure storage modal to indicate that Bank Account is being securely stored\r\n            $('#secure-storage-modal .modal-message').html(\"Storing Bank Account on Device...\");\r\n            $('#secure-storage-modal').get(0).show(); // show loader\r\n\r\n            // update the bank account image/avatar property\r\n            utopiasoftware.saveup.controller.addAccountPageViewModel.bankAccountImage = \"css/app-images/avatar-\" +\r\n                utopiasoftware.saveup.controller.addAccountPageViewModel.bankAccountImageRandomNum + \".png\";\r\n\r\n            // check if this is an EDIT or CREATE operation\r\n            if($('#app-main-navigator').get(0).topPage.data && $('#app-main-navigator').get(0).topPage.data.edit){ //this is an EDIT operation\r\n                // call the utility method used to delete a specified bank account\r\n                utopiasoftware.saveup.bankAccountOperations.\r\n                deleteMyAccount($('#app-main-navigator').get(0).topPage.data.edit).\r\n                then(function(){\r\n                    // create an edited bank account data\r\n                    var editedBankAcctData = {\r\n                        uniqueAccountId: $('#app-main-navigator').get(0).topPage.data.edit,\r\n                        bankAccountNumber: $('#add-account-form #add-account-number').val(),\r\n                        bankAccountName: $('#add-account-form #add-account-account-name').val(),\r\n                        bankName: $('#add-account-form #add-account-choose-bank option:selected').text().trim(),\r\n                        flutterwave_bankCode: $('#add-account-form #add-account-choose-bank').val(),\r\n                        bankAccountAvatar: utopiasoftware.saveup.controller.addAccountPageViewModel.bankAccountImage\r\n                    };\r\n\r\n                    // call the utility method used to add a specified bank account to the bank account collection\r\n                    return utopiasoftware.saveup.bankAccountOperations.\r\n                    addMyAccount(editedBankAcctData);\r\n                }).\r\n                then(function(){\r\n                    // wait for approximately 4 secs for the saving animation to run (at least once before concluding animation\r\n                    window.setTimeout(function(){\r\n                        // reset the form validator object on the page\r\n                        utopiasoftware.saveup.controller.addAccountPageViewModel.formValidator.reset();\r\n                        // reset the form object\r\n                        $('#add-account-page #add-account-form').get(0).reset();\r\n                        $('#add-account-page select').material_select();\r\n                        // reset the account number validation check and all its related actions\r\n                        utopiasoftware.saveup.controller.addAccountPageViewModel.\r\n                        isbankAccountNumberValidated($('#add-account-page #add-account-verify-account'));\r\n                        // reset the bank account properties\r\n                        utopiasoftware.saveup.controller.addAccountPageViewModel.bankAccountName = \"\";\r\n                        utopiasoftware.saveup.controller.addAccountPageViewModel.tokenData = \"\";\r\n                        utopiasoftware.saveup.controller.addAccountPageViewModel.bankAccountImage = \"\";\r\n                        // reset the page scroll position to the top\r\n                        $('#add-account-page .page__content').scrollTop(0);\r\n\r\n                        $('#secure-storage-modal').get(0).hide(); // hide loader\r\n                        // inform user that acct has been successfully added to secure storage\r\n                        Materialize.toast('Bank Account updated', 4000);\r\n                    }, 4000);\r\n                }).\r\n                catch(function(){\r\n                    $('#secure-storage-modal').get(0).hide(); // hide loader\r\n                    ons.notification.alert({title: \"Update Error\",\r\n                        messageHTML: '<ons-icon icon=\"md-close-circle-o\" size=\"30px\" ' +\r\n                        'style=\"color: red;\"></ons-icon> <span>' + (err.message || \"\") + ' Sorry, this bank account could not be updated. ' +\r\n                        '<br>You can try again' + '</span>',\r\n                        cancelable: true\r\n                    });\r\n                });\r\n            }\r\n            else { // this is a CREATE/ADD OPERATION\r\n\r\n                var newBankAcctData = {\r\n                    uniqueAccountId: \"\" + utopiasoftware.saveup.model.deviceUUID + Date.now(),\r\n                    bankAccountNumber: $('#add-account-form #add-account-number').val(),\r\n                    bankAccountName: $('#add-account-form #add-account-account-name').val(),\r\n                    bankName: $('#add-account-form #add-account-choose-bank option:selected').text().trim(),\r\n                    flutterwave_bankCode: $('#add-account-form #add-account-choose-bank').val(),\r\n                    bankAccountAvatar: utopiasoftware.saveup.controller.addAccountPageViewModel.bankAccountImage\r\n                };\r\n\r\n                utopiasoftware.saveup.bankAccountOperations.\r\n                addMyAccount(newBankAcctData).\r\n                then(function(){\r\n                    // wait for approximately 4 secs for the saving animation to run (at least once before concluding animation\r\n                    window.setTimeout(function(){\r\n                        // reset the form validator object on the page\r\n                        utopiasoftware.saveup.controller.addAccountPageViewModel.formValidator.reset();\r\n                        // reset the form object\r\n                        $('#add-account-page #add-account-form').get(0).reset();\r\n                        $('#add-account-page select').material_select();\r\n                        // reset the account number validation check and all its related actions\r\n                        utopiasoftware.saveup.controller.addAccountPageViewModel.\r\n                        isbankAccountNumberValidated($('#add-account-page #add-account-verify-account'));\r\n                        // reset the bank account properties\r\n                        utopiasoftware.saveup.controller.addAccountPageViewModel.bankAccountName = \"\";\r\n                        utopiasoftware.saveup.controller.addAccountPageViewModel.tokenData = \"\";\r\n                        utopiasoftware.saveup.controller.addAccountPageViewModel.bankAccountImage = \"\";\r\n                        // reset the page scroll position to the top\r\n                        $('#add-account-page .page__content').scrollTop(0);\r\n\r\n                        $('#secure-storage-modal').get(0).hide(); // hide loader\r\n                        // inform user that user's bank account has been successfully added to secure storage\r\n                        Materialize.toast('New bank account added', 4000);\r\n                    }, 4000);\r\n                }).\r\n                catch(function(err){\r\n\r\n                    $('#secure-storage-modal').get(0).hide(); // hide loader\r\n                    ons.notification.alert({title: \"Save Error\",\r\n                        messageHTML: '<ons-icon icon=\"md-close-circle-o\" size=\"30px\" ' +\r\n                        'style=\"color: red;\"></ons-icon> <span>' + (err.message || \"\") + ' Sorry, this bank account could not be added. ' +\r\n                        '<br>You can try again' + '</span>',\r\n                        cancelable: true\r\n                    });\r\n                });\r\n\r\n            }\r\n\r\n        },\r\n\r\n\r\n        /**\r\n         * method is used to check if user has asked for bank account number to be validated.\r\n         * It sets or remove the appropriate attributes need to activate or deactivate\r\n         * remote account validation\r\n         */\r\n        isbankAccountNumberValidated: function(checkElem){\r\n            // check if user wants acct number validated or not\r\n            if($(checkElem).is(\":checked\")){ // user wants the account number remotely validated\r\n                // add the necessary attributes to the account number input in order to enable remote account number validation\r\n                $('#add-account-number').attr(\"data-parsley-remote-validator\", \"accountnumbercheck\");\r\n                // also make the account name input disabled & wipe its previous content\r\n                $('#add-account-account-name').attr(\"disabled\", true);\r\n                $('#add-account-account-name').val(\"\");\r\n                // remove tooltip from account name\r\n                $(\"#add-account-account-name\").parent().find('label:eq(0)').removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                $(\"#add-account-account-name\").parent().find('label:eq(0)').removeAttr(\"data-hint\");\r\n                // display the notice that an internet connection is required for verification\r\n                $('#add-account-verify-account-notice').css(\"display\", \"block\");\r\n            }\r\n            else{ // user does not want account number remotely validated\r\n                // remove attributes to prevent remote account number validation\r\n                $('#add-account-number').removeAttr(\"data-parsley-remote-validator\");\r\n                // also make the account name input enabled & wipe its previous content\r\n                $('#add-account-account-name').removeAttr(\"disabled\");\r\n                $('#add-account-account-name').val(\"\");\r\n                // hide the notice that an internet connection is required for verification\r\n                $('#add-account-verify-account-notice').css(\"display\", \"none\");\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is used to listen for scroll event of the page content\r\n         *\r\n         * @param event\r\n         */\r\n        pageContentScrolled: function(event){\r\n\r\n            // set the current scrolltop position\r\n            utopiasoftware.saveup.controller.addAccountPageViewModel.currentScrollPosition = $(this).scrollTop();\r\n\r\n            if(utopiasoftware.saveup.controller.addAccountPageViewModel.currentScrollPosition >\r\n                utopiasoftware.saveup.controller.addAccountPageViewModel.previousScrollPosition){ // user scrolled up\r\n                // set the current position as previous position\r\n                utopiasoftware.saveup.controller.addAccountPageViewModel.previousScrollPosition =\r\n                    utopiasoftware.saveup.controller.addAccountPageViewModel.currentScrollPosition;\r\n\r\n                // check if the header image left after scrolling is <= height of page toolbar\r\n                if((140 - utopiasoftware.saveup.controller.addAccountPageViewModel.currentScrollPosition) <= 56){\r\n                    // the header image left after scrolling is <= height of page toolbar\r\n                    // check if the toolbar for the page has already been made opaque\r\n                    if(this.isToolBarOpaque != true){ // toolbar has not been made opaque\r\n\r\n                        $('#add-account-page ons-toolbar').removeClass(\"toolbar--transparent\"); // make the toolbar opaque\r\n                        // also pin the help header on the page just below the toolbar\r\n                        $('#add-account-page ons-list-header').css(\r\n                            {\"display\": \"block\", \"position\": \"fixed\", \"top\": \"56px\", \"width\": \"100%\"});\r\n                        this.isToolBarOpaque = true; // flag that toolbar has been made opaque\r\n                    }\r\n                }\r\n\r\n                return;\r\n            }\r\n\r\n            if(utopiasoftware.saveup.controller.addAccountPageViewModel.currentScrollPosition <\r\n                utopiasoftware.saveup.controller.addAccountPageViewModel.previousScrollPosition){ // user scrolled down\r\n                // set the current position as previous position\r\n                utopiasoftware.saveup.controller.addAccountPageViewModel.previousScrollPosition =\r\n                    utopiasoftware.saveup.controller.addAccountPageViewModel.currentScrollPosition;\r\n\r\n                // check if the header image left after scrolling is > height of page toolbar\r\n                if((140 - utopiasoftware.saveup.controller.addAccountPageViewModel.currentScrollPosition) > 56){\r\n                    // the header image left after scrolling is > height of page toolbar\r\n                    // check if the toolbar for the page has already been made transparent\r\n                    if(this.isToolBarOpaque == true){ // toolbar has NOT been made transparent\r\n\r\n                        $('#add-account-page ons-toolbar').addClass(\"toolbar--transparent\"); // make the toolbar transparent\r\n                        // also unpin the help header on the page from just below the toolbar\r\n                        $('#add-account-page ons-list-header').css({\"display\": \"block\", \"position\": \"static\", \"top\": \"56px\"});\r\n                        this.isToolBarOpaque = false; // flag that toolbar has been made transparent\r\n                    }\r\n                }\r\n\r\n                return;\r\n            }\r\n        },\r\n\r\n\r\n        /**\r\n         * method is used to reset/wipe the content of the account name IF\r\n         * remote account validation has been enabled\r\n         */\r\n        resetAccountNameDisplay: function(){\r\n            if($('#add-account-page #add-account-verify-account').is(\":checked\")) { // user wants the account number remotely validated\r\n                $('#add-account-page #add-account-account-name').val(\"\");\r\n            }\r\n        },\r\n\r\n        /**\r\n         * custom parsley validator for bank account number\r\n         *\r\n         * @param jqxhr {jqueryXhr}\r\n         */\r\n        accountNumberValidator: function(jqxhr){\r\n            var serverResponse = \"\"; // holds the server response\r\n\r\n            // check the validator response\r\n            if(jqxhr.status != 200){ // request was NOT success\r\n                return false;\r\n            }\r\n\r\n            // convert the server response to json\r\n            serverResponse = JSON.parse(jqxhr.responseText.trim());\r\n\r\n            if(serverResponse.status != \"success\"){ // the server api response was NOT successful\r\n\r\n                return false;\r\n            }\r\n            else { // the server api response was successful\r\n                // set the bank account name\r\n                utopiasoftware.saveup.controller.addAccountPageViewModel.bankAccountName = serverResponse.data.account_name;\r\n                return true; // validation successful\r\n            }\r\n\r\n        }\r\n\r\n    },\r\n\r\n\r\n    /**\r\n     * object is view-model for saved-recipients page page\r\n     */\r\n    savedRecipientsPageViewModel: {\r\n\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n            // enable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').attr(\"swipeable\", true);\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            function loadPageOnAppReady(){\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if(!ons.isReady() || utopiasoftware.saveup.model.isAppReady === false){\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                $('#app-main-navigator').get(0).topPage.onDeviceBackButton = function(){\r\n\r\n                    // check if the side menu is open\r\n                    if($('ons-splitter').get(0).left.isOpen){ // side menu open, so close it\r\n                        $('ons-splitter').get(0).left.close();\r\n                        return; // exit the method\r\n                    }\r\n\r\n                    $('#app-main-navigator').get(0).resetToPage(\"main-menu-page.html\");\r\n                };\r\n\r\n                // register listener for the pull-to-refresh widget\r\n                $('#saved-recipients-pull-hook', $thisPage).on(\"changestate\", function(event){\r\n\r\n                    // check the state of the pull-to-refresh widget\r\n                    switch (event.originalEvent.state){\r\n                        case 'initial':\r\n                            // update the displayed icon\r\n                            $('#saved-recipients-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"fa-long-arrow-down\" size=\"24px\"></ons-icon>');\r\n                            break;\r\n\r\n                        case 'preaction':\r\n\r\n                            $('#saved-recipients-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"fa-long-arrow-up\" size=\"24px\"></ons-icon>');\r\n                            break;\r\n\r\n                        case 'action':\r\n                            $('#saved-recipients-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"fa-repeat\" size=\"24px\" spin></ons-icon>');\r\n                            break;\r\n                    }\r\n                });\r\n\r\n                // add method to handle the loading action of the pull-to-refresh widget\r\n                $('#saved-recipients-pull-hook', $thisPage).get(0).onAction = function(loadingDone){\r\n                    // disable pull-to-refresh widget till loading is done\r\n                    $('#saved-recipients-pull-hook', $thisPage).attr(\"disabled\", true);\r\n\r\n                    // load the saved recipients account data from the device secure store\r\n                    utopiasoftware.saveup.savedRecipientsBankAccountOperations.loadSavedRecipientsAccountsData().\r\n                    then(function(banksAcctsArray){ // the bank acct array collection has been returned\r\n                        if(banksAcctsArray.length == 0){ // there are no bank account data available\r\n                            // remove the page preloader progress bar\r\n                            $('.progress', $thisPage).remove();\r\n                            // display the help button\r\n                            $('#saved-recipients-help-1', $thisPage).css(\"display\", \"inline-block\");\r\n                            // enable the pull-to-refresh widget for the page\r\n                            $('#saved-recipients-pull-hook', $thisPage).removeAttr(\"disabled\");\r\n                            // display a message to inform user that there are no accounts available\r\n                            $('#saved-recipients-page-message', $thisPage).css(\"display\", \"block\");\r\n                            // hide the error message from displaying\r\n                            $('#saved-recipients-page-error', $thisPage).css(\"display\", \"none\");\r\n                            // hide the my-accounts-list from display\r\n                            $('#saved-recipients-list', $thisPage).css(\"display\", \"none\");\r\n                            // enable the 'Add Recipient' button\r\n                            $('#saved-recipients-add-recipient-button', $thisPage).removeAttr(\"disabled\");\r\n                            // flag that loading is done\r\n                            loadingDone();\r\n                        }\r\n                        else{ // there are card data available\r\n                            // empty the contents of the saved recipients list\r\n                            $('#saved-recipients-list', $thisPage).html(\"\");\r\n\r\n                            for(let index = 0; index < banksAcctsArray.length; index++){ // append the stored bank accounts to the \"Saved Recipients\" list\r\n                                // create the bank account content\r\n                                let bankAcctContent = `<div class=\"row\"><div class=\"col s12\"><div class=\"card horizontal\">\r\n                                <div class=\"card-image\" style=\"padding: 3%;\">\r\n                                <img src=\"${banksAcctsArray[index].bankAccountAvatar}\">\r\n                                </div>\r\n                                <div class=\"card-stacked\">\r\n                                <div class=\"card-content\" style=\"padding-bottom: 0;\">\r\n                                <div style=\"font-weight: bold; font-size: 0.75em; font-style: italic; color: #464646;\r\n                                padding-bottom: 0.5em;\">${banksAcctsArray[index].bankAccountName}</div>\r\n                                </div><div class=\"card-action\" style=\"font-weight: bold; font-size: 0.75em;\r\n                                color: #464646; padding-bottom: 0.5em;\">${banksAcctsArray[index].bankAccountNumber}</div>\r\n                                <div  class=\"card-action\" style=\"font-weight: bold; font-size: 0.75em;\r\n                                color: #464646; padding-bottom: 0.5em;\">${banksAcctsArray[index].bankName}</div>\r\n                                <div class=\"card-action\" style=\"padding: 0;\">\r\n                                <div style=\"display: inline-block; margin-left: auto; margin-right: auto\">\r\n                                <ons-button data-id=\"${banksAcctsArray[index].uniqueAccountId}\"\r\n                                data-acct-object='${JSON.stringify({recipientAccountName: banksAcctsArray[index].bankAccountName, recipientAccount: banksAcctsArray[index].bankAccountNumber,recipientBankCode:banksAcctsArray[index].flutterwave_bankCode})}' modifier=\"quiet\" disable-auto-styling class=\"right\"\r\n                                        style=\"color: #464646; padding:0; margin-top: 0.5em; margin-left: 1em; margin-right: 1em;\"\r\n                                        onclick=\"utopiasoftware.saveup.controller.savedRecipientsPageViewModel.transferCashButtonClicked(this);\">\r\n                                <ons-icon icon=\"md-saveup-icon-saveup-transfer-cash\" size=\"29px\">\r\n                                </ons-icon>\r\n                                </ons-button>\r\n                                <ons-button data-id=\"${banksAcctsArray[index].uniqueAccountId}\" modifier=\"quiet\"\r\n                                disable-auto-styling class=\"right\"\r\n                                        style=\"color: #464646; padding:0; margin-top: 0.5em; margin-left: 1em;\"\r\n                                        onclick=\"utopiasoftware.saveup.controller.savedRecipientsPageViewModel.editRecipientButtonClicked(this);\">\r\n                                   <ons-icon icon=\"md-edit\" size=\"25px\">\r\n                                </ons-icon>\r\n                                </ons-button>\r\n                                <ons-button data-id=\"${banksAcctsArray[index].uniqueAccountId}\" modifier=\"quiet\" disable-auto-styling class=\"right\"\r\n                                        style=\"color: #464646; padding:0; margin-top: 0.5em; margin-left: 1em;\"\r\n                                        onclick=\"utopiasoftware.saveup.controller.savedRecipientsPageViewModel.deleteRecipientButtonClicked(this);\">\r\n                                <ons-icon icon=\"md-delete\" size=\"25px\"></ons-icon>\r\n                                </ons-button>\r\n                                </div></div></div></div></div></div>` ;\r\n                                // append the bank account content to the \"saved recipients\" list\r\n                                $('#saved-recipients-list', $thisPage).append(bankAcctContent);\r\n                            }\r\n                            // remove the page preloader progress bar\r\n                            $('.progress', $thisPage).remove();\r\n                            // display the help button\r\n                            $('#saved-recipients-help-1', $thisPage).css(\"display\", \"inline-block\");\r\n                            // enable the pull-to-refresh widget for the page\r\n                            $('#saved-recipients-pull-hook', $thisPage).removeAttr(\"disabled\");\r\n                            // hide message to inform user that there are no accounts available\r\n                            $('#saved-recipients-page-message', $thisPage).css(\"display\", \"none\");\r\n                            // hide the error message from displaying\r\n                            $('#saved-recipients-page-error', $thisPage).css(\"display\", \"none\");\r\n                            // display the saved-recipients-list\r\n                            $('#saved-recipients-list', $thisPage).css(\"display\", \"block\");\r\n                            // enable the 'Add Recipient' button\r\n                            $('#saved-recipients-add-recipient-button', $thisPage).removeAttr(\"disabled\");\r\n                            // flag that loading is done\r\n                            loadingDone();\r\n                        }\r\n                    }).\r\n                    catch(function(){ // an error occurred, so display the error message to the user\r\n                        // remove the page preloader progress bar\r\n                        $('.progress', $thisPage).remove();\r\n                        // display the help button\r\n                        $('#saved-recipients-help-1', $thisPage).css(\"display\", \"inline-block\");\r\n                        // enable the pull-to-refresh widget for the page\r\n                        $('#saved-recipients-pull-hook', $thisPage).removeAttr(\"disabled\");\r\n                        // hide a message to inform user that there are no accounts available\r\n                        $('#saved-recipients-page-message', $thisPage).css(\"display\", \"none\");\r\n                        // display the error message to user\r\n                        $('#saved-recipients-page-error', $thisPage).css(\"display\", \"block\");\r\n                        // hide the my-accounts-list from display\r\n                        $('#saved-recipients-list', $thisPage).css(\"display\", \"none\");\r\n                        // disable the 'Add Recipient' button\r\n                        $('#saved-recipients-add-recipient-button', $thisPage).attr(\"disabled\", true);\r\n                        // flag that loading is done\r\n                        loadingDone();\r\n                    });\r\n                };\r\n\r\n                // load the saved recipients account data from the device secure store\r\n                utopiasoftware.saveup.savedRecipientsBankAccountOperations.loadSavedRecipientsAccountsData().\r\n                then(function(banksAcctsArray){ // the bank acct array collection has been returned\r\n                    if(banksAcctsArray.length == 0){ // there are no bank account data available\r\n                        // remove the page preloader progress bar\r\n                        $('.progress', $thisPage).remove();\r\n                        // display the help button\r\n                        $('#saved-recipients-help-1', $thisPage).css(\"display\", \"inline-block\");\r\n                        // enable the pull-to-refresh widget for the page\r\n                        $('#saved-recipients-pull-hook', $thisPage).removeAttr(\"disabled\");\r\n                        // display a message to inform user that there are no accounts available\r\n                        $('#saved-recipients-page-message', $thisPage).css(\"display\", \"block\");\r\n                        // hide the error message from displaying\r\n                        $('#saved-recipients-page-error', $thisPage).css(\"display\", \"none\");\r\n                        // hide the my-accounts-list from display\r\n                        $('#saved-recipients-list', $thisPage).css(\"display\", \"none\");\r\n                        // enable the 'Add Recipient' button\r\n                        $('#saved-recipients-add-recipient-button', $thisPage).removeAttr(\"disabled\");\r\n                    }\r\n                    else{ // there are card data available\r\n                        // empty the contents of the saved recipients list\r\n                        $('#saved-recipients-list', $thisPage).html(\"\");\r\n\r\n                        for(let index = 0; index < banksAcctsArray.length; index++){ // append the stored bank accounts to the \"Saved Recipients\" list\r\n                            // create the bank account content\r\n                            let bankAcctContent = `<div class=\"row\"><div class=\"col s12\"><div class=\"card horizontal\">\r\n                                <div class=\"card-image\" style=\"padding: 3%;\">\r\n                                <img src=\"${banksAcctsArray[index].bankAccountAvatar}\">\r\n                                </div>\r\n                                <div class=\"card-stacked\">\r\n                                <div class=\"card-content\" style=\"padding-bottom: 0;\">\r\n                                <div style=\"font-weight: bold; font-size: 0.75em; font-style: italic; color: #464646;\r\n                                padding-bottom: 0.5em;\">${banksAcctsArray[index].bankAccountName}</div>\r\n                                </div><div class=\"card-action\" style=\"font-weight: bold; font-size: 0.75em;\r\n                                color: #464646; padding-bottom: 0.5em;\">${banksAcctsArray[index].bankAccountNumber}</div>\r\n                                <div  class=\"card-action\" style=\"font-weight: bold; font-size: 0.75em;\r\n                                color: #464646; padding-bottom: 0.5em;\">${banksAcctsArray[index].bankName}</div>\r\n                                <div class=\"card-action\" style=\"padding: 0;\">\r\n                                <div style=\"display: inline-block; margin-left: auto; margin-right: auto\">\r\n                                <ons-button data-id=\"${banksAcctsArray[index].uniqueAccountId}\"\r\n                                data-acct-object='${JSON.stringify({recipientAccountName: banksAcctsArray[index].bankAccountName, recipientAccount: banksAcctsArray[index].bankAccountNumber,recipientBankCode:banksAcctsArray[index].flutterwave_bankCode})}' modifier=\"quiet\" disable-auto-styling class=\"right\"\r\n                                        style=\"color: #464646; padding:0; margin-top: 0.5em; margin-left: 1em; margin-right: 1em;\"\r\n                                        onclick=\"utopiasoftware.saveup.controller.savedRecipientsPageViewModel.transferCashButtonClicked(this);\">\r\n                                <ons-icon icon=\"md-saveup-icon-saveup-transfer-cash\" size=\"29px\">\r\n                                </ons-icon>\r\n                                </ons-button>\r\n                                <ons-button data-id=\"${banksAcctsArray[index].uniqueAccountId}\" modifier=\"quiet\"\r\n                                disable-auto-styling class=\"right\"\r\n                                        style=\"color: #464646; padding:0; margin-top: 0.5em; margin-left: 1em;\"\r\n                                        onclick=\"utopiasoftware.saveup.controller.savedRecipientsPageViewModel.editRecipientButtonClicked(this);\">\r\n                                   <ons-icon icon=\"md-edit\" size=\"25px\">\r\n                                </ons-icon>\r\n                                </ons-button>\r\n                                <ons-button data-id=\"${banksAcctsArray[index].uniqueAccountId}\" modifier=\"quiet\" disable-auto-styling class=\"right\"\r\n                                        style=\"color: #464646; padding:0; margin-top: 0.5em; margin-left: 1em;\"\r\n                                        onclick=\"utopiasoftware.saveup.controller.savedRecipientsPageViewModel.deleteRecipientButtonClicked(this);\">\r\n                                <ons-icon icon=\"md-delete\" size=\"25px\"></ons-icon>\r\n                                </ons-button>\r\n                                </div></div></div></div></div></div>` ;\r\n                            // append the bank account content to the \"saved recipients\" list\r\n                            $('#saved-recipients-list', $thisPage).append(bankAcctContent);\r\n                        }\r\n                        // remove the page preloader progress bar\r\n                        $('.progress', $thisPage).remove();\r\n                        // display the help button\r\n                        $('#saved-recipients-help-1', $thisPage).css(\"display\", \"inline-block\");\r\n                        // enable the pull-to-refresh widget for the page\r\n                        $('#saved-recipients-pull-hook', $thisPage).removeAttr(\"disabled\");\r\n                        // hide message to inform user that there are no accounts available\r\n                        $('#saved-recipients-page-message', $thisPage).css(\"display\", \"none\");\r\n                        // hide the error message from displaying\r\n                        $('#saved-recipients-page-error', $thisPage).css(\"display\", \"none\");\r\n                        // display the saved-recipients-list\r\n                        $('#saved-recipients-list', $thisPage).css(\"display\", \"block\");\r\n                        // enable the 'Add Recipient' button\r\n                        $('#saved-recipients-add-recipient-button', $thisPage).removeAttr(\"disabled\");\r\n                    }\r\n                }).\r\n                catch(function(){ // an error occurred, so display the error message to the user\r\n                    // remove the page preloader progress bar\r\n                    $('.progress', $thisPage).remove();\r\n                    // display the help button\r\n                    $('#saved-recipients-help-1', $thisPage).css(\"display\", \"inline-block\");\r\n                    // enable the pull-to-refresh widget for the page\r\n                    $('#saved-recipients-pull-hook', $thisPage).removeAttr(\"disabled\");\r\n                    // hide a message to inform user that there are no accounts available\r\n                    $('#saved-recipients-page-message', $thisPage).css(\"display\", \"none\");\r\n                    // display the error message to user\r\n                    $('#saved-recipients-page-error', $thisPage).css(\"display\", \"block\");\r\n                    // hide the my-accounts-list from display\r\n                    $('#saved-recipients-list', $thisPage).css(\"display\", \"none\");\r\n                    // disable the 'Add Recipient' button\r\n                    $('#saved-recipients-add-recipient-button', $thisPage).attr(\"disabled\", true);\r\n                });\r\n\r\n                // hide the loader\r\n                $('#loader-modal').get(0).hide();\r\n\r\n            }\r\n\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         *\r\n         * @param event\r\n         */\r\n        pageShow: function(event){\r\n            var $thisPage = $(event.target); // get the current page shown\r\n            // enable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').attr(\"swipeable\", true);\r\n\r\n            // check if the data on the page should be refreshed\r\n            if($('#app-main-navigator').get(0).topPage.data && $('#app-main-navigator').get(0).topPage.data.refresh\r\n                && $('#app-main-navigator').get(0).topPage.data.refresh === true){ // user wants this page refreshed\r\n                // add & display the preloader for the page\r\n                $('#saved-recipients-pull-hook', $thisPage).after('<div class=\"progress\"><div class=\"indeterminate\"></div> </div>');\r\n\r\n                // load the saved recipients account data from the device secure store\r\n                utopiasoftware.saveup.savedRecipientsBankAccountOperations.loadSavedRecipientsAccountsData().\r\n                then(function(banksAcctsArray){ // the bank acct array collection has been returned\r\n                    if(banksAcctsArray.length == 0){ // there are no bank account data available\r\n                        // remove the page preloader progress bar\r\n                        $('.progress', $thisPage).remove();\r\n                        // display the help button\r\n                        $('#saved-recipients-help-1', $thisPage).css(\"display\", \"inline-block\");\r\n                        // enable the pull-to-refresh widget for the page\r\n                        $('#saved-recipients-pull-hook', $thisPage).removeAttr(\"disabled\");\r\n                        // display a message to inform user that there are no accounts available\r\n                        $('#saved-recipients-page-message', $thisPage).css(\"display\", \"block\");\r\n                        // hide the error message from displaying\r\n                        $('#saved-recipients-page-error', $thisPage).css(\"display\", \"none\");\r\n                        // hide the my-accounts-list from display\r\n                        $('#saved-recipients-list', $thisPage).css(\"display\", \"none\");\r\n                        // enable the 'Add Recipient' button\r\n                        $('#saved-recipients-add-recipient-button', $thisPage).removeAttr(\"disabled\");\r\n                    }\r\n                    else{ // there are card data available\r\n                        // empty the contents of the saved recipients list\r\n                        $('#saved-recipients-list', $thisPage).html(\"\");\r\n\r\n                        for(let index = 0; index < banksAcctsArray.length; index++){ // append the stored bank accounts to the \"Saved Recipients\" list\r\n                            // create the bank account content\r\n                            let bankAcctContent = `<div class=\"row\"><div class=\"col s12\"><div class=\"card horizontal\">\r\n                                <div class=\"card-image\" style=\"padding: 3%;\">\r\n                                <img src=\"${banksAcctsArray[index].bankAccountAvatar}\">\r\n                                </div>\r\n                                <div class=\"card-stacked\">\r\n                                <div class=\"card-content\" style=\"padding-bottom: 0;\">\r\n                                <div style=\"font-weight: bold; font-size: 0.75em; font-style: italic; color: #464646;\r\n                                padding-bottom: 0.5em;\">${banksAcctsArray[index].bankAccountName}</div>\r\n                                </div><div class=\"card-action\" style=\"font-weight: bold; font-size: 0.75em;\r\n                                color: #464646; padding-bottom: 0.5em;\">${banksAcctsArray[index].bankAccountNumber}</div>\r\n                                <div  class=\"card-action\" style=\"font-weight: bold; font-size: 0.75em;\r\n                                color: #464646; padding-bottom: 0.5em;\">${banksAcctsArray[index].bankName}</div>\r\n                                <div class=\"card-action\" style=\"padding: 0;\">\r\n                                <div style=\"display: inline-block; margin-left: auto; margin-right: auto\">\r\n                                <ons-button data-id=\"${banksAcctsArray[index].uniqueAccountId}\"\r\n                                data-acct-object='${JSON.stringify({recipientAccountName: banksAcctsArray[index].bankAccountName, recipientAccount: banksAcctsArray[index].bankAccountNumber,recipientBankCode:banksAcctsArray[index].flutterwave_bankCode})}' modifier=\"quiet\" disable-auto-styling class=\"right\"\r\n                                        style=\"color: #464646; padding:0; margin-top: 0.5em; margin-left: 1em; margin-right: 1em;\"\r\n                                        onclick=\"utopiasoftware.saveup.controller.savedRecipientsPageViewModel.transferCashButtonClicked(this);\">\r\n                                <ons-icon icon=\"md-saveup-icon-saveup-transfer-cash\" size=\"29px\">\r\n                                </ons-icon>\r\n                                </ons-button>\r\n                                <ons-button data-id=\"${banksAcctsArray[index].uniqueAccountId}\" modifier=\"quiet\"\r\n                                disable-auto-styling class=\"right\"\r\n                                        style=\"color: #464646; padding:0; margin-top: 0.5em; margin-left: 1em;\"\r\n                                        onclick=\"utopiasoftware.saveup.controller.savedRecipientsPageViewModel.editRecipientButtonClicked(this);\">\r\n                                   <ons-icon icon=\"md-edit\" size=\"25px\">\r\n                                </ons-icon>\r\n                                </ons-button>\r\n                                <ons-button data-id=\"${banksAcctsArray[index].uniqueAccountId}\" modifier=\"quiet\" disable-auto-styling class=\"right\"\r\n                                        style=\"color: #464646; padding:0; margin-top: 0.5em; margin-left: 1em;\"\r\n                                        onclick=\"utopiasoftware.saveup.controller.savedRecipientsPageViewModel.deleteRecipientButtonClicked(this);\">\r\n                                <ons-icon icon=\"md-delete\" size=\"25px\"></ons-icon>\r\n                                </ons-button>\r\n                                </div></div></div></div></div></div>` ;\r\n                            // append the bank account content to the \"saved recipients\" list\r\n                            $('#saved-recipients-list', $thisPage).append(bankAcctContent);\r\n                        }\r\n                        // remove the page preloader progress bar\r\n                        $('.progress', $thisPage).remove();\r\n                        // display the help button\r\n                        $('#saved-recipients-help-1', $thisPage).css(\"display\", \"inline-block\");\r\n                        // enable the pull-to-refresh widget for the page\r\n                        $('#saved-recipients-pull-hook', $thisPage).removeAttr(\"disabled\");\r\n                        // hide message to inform user that there are no accounts available\r\n                        $('#saved-recipients-page-message', $thisPage).css(\"display\", \"none\");\r\n                        // hide the error message from displaying\r\n                        $('#saved-recipients-page-error', $thisPage).css(\"display\", \"none\");\r\n                        // display the saved-recipients-list\r\n                        $('#saved-recipients-list', $thisPage).css(\"display\", \"block\");\r\n                        // enable the 'Add Recipient' button\r\n                        $('#saved-recipients-add-recipient-button', $thisPage).removeAttr(\"disabled\");\r\n                    }\r\n                }).\r\n                catch(function(){ // an error occurred, so display the error message to the user\r\n                    // remove the page preloader progress bar\r\n                    $('.progress', $thisPage).remove();\r\n                    // display the help button\r\n                    $('#saved-recipients-help-1', $thisPage).css(\"display\", \"inline-block\");\r\n                    // enable the pull-to-refresh widget for the page\r\n                    $('#saved-recipients-pull-hook', $thisPage).removeAttr(\"disabled\");\r\n                    // hide a message to inform user that there are no accounts available\r\n                    $('#saved-recipients-page-message', $thisPage).css(\"display\", \"none\");\r\n                    // display the error message to user\r\n                    $('#saved-recipients-page-error', $thisPage).css(\"display\", \"block\");\r\n                    // hide the my-accounts-list from display\r\n                    $('#saved-recipients-list', $thisPage).css(\"display\", \"none\");\r\n                    // disable the 'Add Recipient' button\r\n                    $('#saved-recipients-add-recipient-button', $thisPage).attr(\"disabled\", true);\r\n                });\r\n            }\r\n\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when the 'Add Recipient' button is clicked\r\n         */\r\n        addRecipientButtonClicked: function(){\r\n            $('#app-main-navigator').get(0).pushPage(\"add-recipient-page.html\", {\r\n                animation: \"lift-md\"\r\n            });\r\n        },\r\n\r\n\r\n        /**\r\n         * method is used to trigger the delete operation of a user's bank account\r\n         * and updating the user-interface (UI)\r\n         *\r\n         * @param buttonElem\r\n         */\r\n        deleteRecipientButtonClicked: function(buttonElem){\r\n\r\n            // confirm that user wants to delete the account before proceeding\r\n            ons.notification.confirm(\"Do you want to delete this recipient's bank account?\", {title: 'Confirm Delete',\r\n                    buttonLabels: ['No', 'Yes']}) // Ask for confirmation\r\n                .then(function(index) {\r\n                    if (index === 1) { // YES button clicked\r\n                        // call the utility method used to delete a specified recipient bank account\r\n                        utopiasoftware.saveup.savedRecipientsBankAccountOperations.\r\n                        deleteSavedRecipientAccount($(buttonElem).attr(\"data-id\")).\r\n                        then(function(){ // account has been deleted\r\n                            $(buttonElem).closest('.row').remove(); // remove the account from display\r\n                            // inform the user that card was deleted\r\n                            Materialize.toast(\"Recipient's Bank Account deleted\", 3000);\r\n                        }).\r\n                        catch(function(){\r\n                            // inform the user that the specified bank account could not be deleted\r\n                            window.plugins.toast.showWithOptions({\r\n                                message: \"Sorry, the recipient's bank account could not be deleted.\\n Try again\",\r\n                                duration: 4000,\r\n                                position: \"top\",\r\n                                styling: {\r\n                                    opacity: 1,\r\n                                    backgroundColor: '#ff0000', //red\r\n                                    textColor: '#FFFFFF',\r\n                                    textSize: 14\r\n                                }\r\n                            }, function(toastEvent){\r\n                                if(toastEvent && toastEvent.event == \"touch\"){ // user tapped the toast, so hide toast immediately\r\n                                    window.plugins.toast.hide();\r\n                                }\r\n                            });\r\n                        });\r\n                    }\r\n                });\r\n        },\r\n\r\n\r\n        /**\r\n         * method is used to trigger the edit operation of a user's bank account\r\n         * and updating/changing the user-interface (UI)\r\n         *\r\n         * @param buttonElem\r\n         */\r\n        editRecipientButtonClicked: function(buttonElem){\r\n            $('#app-main-navigator').get(0).pushPage(\"add-recipient-page.html\", {\r\n                animation: \"lift-md\", data: {edit: $(buttonElem).attr(\"data-id\")}\r\n            });\r\n        },\r\n\r\n\r\n        /**\r\n         * method is used to trigger the transfer cash operation. It uses the\r\n         * selected user's 'Saved Recipient' object as the recipient account for the initiated\r\n         * cash transfer\r\n         *\r\n         * @param buttonElem\r\n         */\r\n        transferCashButtonClicked: function(buttonElem){\r\n\r\n            // ask user for secure PIN before proceeding. secure pin MUST match\r\n            ons.notification.prompt({title: \"Security Check\", id: \"pin-security-check\", class: \"utopiasoftware-no-style\",\r\n                messageHTML: '<div><ons-icon icon=\"ion-lock-combination\" size=\"24px\" ' +\r\n                'style=\"color: #b388ff; float: left; width: 26px;\"></ons-icon> <span style=\"float: right; width: calc(100% - 26px);\">' +\r\n                'Please enter your PostCash Secure PIN to proceed</span></div>',\r\n                cancelable: true, placeholder: \"Secure PIN\", inputType: \"number\", defaultValue: \"\", autofocus: true,\r\n                submitOnEnter: true\r\n            }).\r\n            then(function(userInput){ // user has provided a secured PIN , now authenticate it\r\n                if(userInput === utopiasoftware.saveup.model.appUserDetails.securePin){ // authentication successful\r\n                    // close the 'verify account' the bottom sheets\r\n                    $('#verify-account-bottom-sheet').modal('close');\r\n                    $('#transfer-cash-page').remove(); // remove previous transfer cash pages\r\n                    // call the transfer-cash-page and pass the 'saved recipient' details contained in the data attribute as recipient details data\r\n                    $('#app-main-navigator').get(0).pushPage(\"transfer-cash-page.html\", {\r\n                        data: {\r\n                            recipient_details: JSON.parse($(buttonElem).attr(\"data-acct-object\"))}\r\n                    }); // navigate to the specified page\r\n                }\r\n                else{ // inform user that security check failed/user authentication failed\r\n                    ons.notification.alert({title: \"Security Check\",\r\n                        messageHTML: '<ons-icon icon=\"md-close-circle-o\" size=\"30px\" ' +\r\n                        'style=\"color: red;\"></ons-icon> <span>' + 'Security check failed. Invalid credentials' + '</span>',\r\n                        cancelable: true\r\n                    });\r\n                }\r\n            }).\r\n            catch(function(){});\r\n\r\n            return;\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * object is view-model for add-recipient page\r\n     */\r\n    addRecipientPageViewModel: {\r\n\r\n        /**\r\n         * used to hold the parsley form validation object for the page\r\n         */\r\n        formValidator: null,\r\n\r\n        /**\r\n         * property used to keep track of the immediate last scroll position of the\r\n         * page content\r\n         */\r\n        previousScrollPosition: 0,\r\n\r\n        /**\r\n         * property used to keep track of the current scroll position of the\r\n         * page content\r\n         */\r\n        currentScrollPosition: 0,\r\n\r\n        /**\r\n         * property stores the name of the bank account being added.\r\n         * Default value is an empty string\r\n         */\r\n        bankAccountName: \"\",\r\n\r\n        /**\r\n         * property holds the image to be used for the bank account\r\n         */\r\n        bankAccountImage: \"\",\r\n\r\n        /**\r\n         * property holds the randomly generated number used to generate\r\n         * bank account avatar images\r\n         */\r\n        bankAccountImageRandomNum: null,\r\n\r\n        /**\r\n         * property holds authorisation token used for\r\n         * verifying bank account number\r\n         */\r\n        tokenData: \"\",\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n            // find all onsen-ui input targets and insert a special class to prevent materialize-css from updating the styles\r\n            $('ons-input input', $thisPage).addClass('utopiasoftware-no-style');\r\n            // disable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').removeAttr(\"swipeable\", true);\r\n\r\n            // reset the previous & current scroll positions of the page contents\r\n            utopiasoftware.saveup.controller.addRecipientPageViewModel.previousScrollPosition = 0;\r\n            utopiasoftware.saveup.controller.addRecipientPageViewModel.currentScrollPosition = 0;\r\n\r\n            // reset the bank account properties\r\n            utopiasoftware.saveup.controller.addRecipientPageViewModel.bankAccountName = \"\";\r\n            utopiasoftware.saveup.controller.addRecipientPageViewModel.tokenData = \"\";\r\n            utopiasoftware.saveup.controller.addRecipientPageViewModel.bankAccountImage = \"\";\r\n\r\n            // generate the random number used to display the bank account image/avatar\r\n            var randomGen = new Random(Random.engines.nativeMath); // random number generator\r\n            // generate the random number\r\n            utopiasoftware.saveup.controller.addRecipientPageViewModel.bankAccountImageRandomNum = randomGen.integer(1, 6);\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            function loadPageOnAppReady(){\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if(!ons.isReady() || utopiasoftware.saveup.model.isAppReady === false){\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n\r\n                // listen for the back button event\r\n                $('#app-main-navigator').get(0).topPage.onDeviceBackButton = function(){\r\n\r\n                    // check if the side menu is open\r\n                    if($('ons-splitter').get(0).left.isOpen){ // side menu open, so close it\r\n                        $('ons-splitter').get(0).left.close();\r\n                        return; // exit the method\r\n                    }\r\n\r\n                    $('#app-main-navigator').get(0).popPage();\r\n                };\r\n\r\n                // listen for the scroll event of the page content\r\n                $('#add-recipient-page .page__content').on(\"scroll\", utopiasoftware.saveup.controller.addRecipientPageViewModel.pageContentScrolled);\r\n\r\n                // initialise the form validation\r\n                utopiasoftware.saveup.controller.addRecipientPageViewModel.formValidator = $('#add-recipient-form').parsley();\r\n\r\n                // attach listener for the 'save' button click\r\n                $('#add-recipient-save-button').get(0).onclick = function(){\r\n                    // check if the user requested for remote account number validation\r\n                    if($('#add-recipient-account-verify-account').is(\":checked\")){ //user asked for remote validation\r\n                        // display loader message to the user\r\n                        $('#loader-modal #loader-modal-message').html(\"Preparing Device Storage...\");\r\n                        $('#loader-modal').get(0).show();\r\n                        // request for gateway authorization token used in account number validation\r\n                        utopiasoftware.saveup.moneyWaveObject.useToken.\r\n                        then(function(tokenData){\r\n                            // set the token data used for verifying the bank account number\r\n                            utopiasoftware.saveup.controller.addRecipientPageViewModel.tokenData = tokenData;\r\n                            // hide loader message\r\n                            $('#loader-modal').get(0).hide();\r\n                            // run the validation method for the form\r\n                            utopiasoftware.saveup.controller.addRecipientPageViewModel.formValidator.whenValidate();\r\n                        }).\r\n                        catch(function(){\r\n                            // clear the token data used for verifying the bank account number\r\n                            utopiasoftware.saveup.controller.addRecipientPageViewModel.tokenData = \"\";\r\n                            // hide loader message\r\n                            $('#loader-modal').get(0).hide();\r\n                            // run the validation method for the form\r\n                            utopiasoftware.saveup.controller.addRecipientPageViewModel.formValidator.whenValidate();\r\n                        });\r\n                    }\r\n                    else{ // user did not ask for remote account number validation\r\n                        // run the validation method for the form\r\n                        utopiasoftware.saveup.controller.addRecipientPageViewModel.formValidator.whenValidate();\r\n                    }\r\n                };\r\n\r\n                // listen for form field validation failure event\r\n                utopiasoftware.saveup.controller.addRecipientPageViewModel.formValidator.on('field:ajaxoptions',\r\n                    function(fieldInstance, ajaxOptions){\r\n                        // edit the ajax options object to include the necessary authorization header\r\n                        ajaxOptions.headers = {\"Authorization\":utopiasoftware.saveup.controller.addRecipientPageViewModel.tokenData};\r\n                        ajaxOptions.data = JSON.stringify({\r\n                            account_number: $('#add-recipient-form #add-recipient-account-number').val(),\r\n                            bank_code: $('#add-recipient-form #add-recipient-choose-bank').val()\r\n                        });\r\n\r\n                        // display the loading icon for account number validation\r\n                        $('#add-recipient-account-number-validation-loading', $thisPage).css(\"display\", \"block\");\r\n                    });\r\n\r\n                // listen for form field validation failure event\r\n                utopiasoftware.saveup.controller.addRecipientPageViewModel.formValidator.on('field:error', function(fieldInstance) {\r\n                    // get the element that triggered the field validation error and use it to display tooltip\r\n                    // display tooltip\r\n                    $(fieldInstance.$element).parent().find('label:eq(0)').addClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                    $(fieldInstance.$element).parent().find('label:eq(0)').attr(\"data-hint\", fieldInstance.getErrorsMessages()[0]);\r\n                    // check if the element that triggered that validation error was the account number input\r\n                    if($(fieldInstance.$element).is('#add-recipient-account-number')){ // it is the account number input\r\n                        // hide the loading icon\r\n                        $('#add-recipient-account-number-validation-loading', $thisPage).css(\"display\", \"none\");\r\n\r\n                        // check if the user requested for remote account number validation\r\n                        if($('#add-recipient-account-verify-account').is(\":checked\")){ //user asked for remote validation\r\n                            // empty the content of the account name input (based on remote validation result)\r\n                            $('#add-recipient-page #add-recipient-account-name').val(\"\");\r\n                        }\r\n                        else{ // user did not ask for remote account number validation\r\n                        }\r\n                    }\r\n                });\r\n\r\n                // listen for form field validation success event\r\n                utopiasoftware.saveup.controller.addRecipientPageViewModel.formValidator.on('field:success', function(fieldInstance) {\r\n                    // remove tooltip from element\r\n                    $(fieldInstance.$element).parent().find('label:eq(0)').removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                    $(fieldInstance.$element).parent().find('label:eq(0)').removeAttr(\"data-hint\");\r\n                    // check if the element that triggered that validation success was the account number input\r\n                    if($(fieldInstance.$element).is('#add-recipient-account-number')){ // it is the account number input\r\n                        // hide the loading icon\r\n                        $('#add-recipient-account-number-validation-loading', $thisPage).css(\"display\", \"none\");\r\n                        // check if the user requested for remote account number validation\r\n                        if($('#add-recipient-account-verify-account').is(\":checked\")){ //user asked for remote validation\r\n                            // display the account name to the user (based on remote validation result)\r\n                            $('#add-recipient-page #add-recipient-account-name').val(utopiasoftware.saveup.controller.\r\n                                addRecipientPageViewModel.bankAccountName);\r\n                            // update input field display\r\n                            Materialize.updateTextFields();\r\n                        }\r\n                        else{ // user did not ask for remote account number validation\r\n                        }\r\n                    }\r\n                });\r\n\r\n                // listen for form validation success\r\n                utopiasoftware.saveup.controller.addRecipientPageViewModel.formValidator.on('form:success',\r\n                    utopiasoftware.saveup.controller.addRecipientPageViewModel.addRecipientFormValidated);\r\n\r\n                /** dynamically create the contents of the various select elements **/\r\n                    // retrieve the sorted array of banks\r\n                Promise.resolve(utopiasoftware.saveup.sortBanksData()).\r\n                then(function(bankArrayData){\r\n                    var optionTags = \"\"; // string to hold all created option tags\r\n\r\n                    // get each object in bank array and use it to create the select element\r\n                    for(var index = 0; index < bankArrayData.length; index++){\r\n                        var bankObject = bankArrayData[index]; // get the bank object\r\n                        // update the banks select element option tags\r\n                        for(var prop in bankObject){\r\n                            optionTags += '<option value=\"' + prop + '\">' + bankObject[prop] + '</option>';\r\n                        }\r\n                    }\r\n\r\n                    $('#add-recipient-choose-bank', $thisPage).append(optionTags); // append all the created option tags\r\n                    // initialise the select element\r\n                    $('#add-recipient-choose-bank', $thisPage).material_select();\r\n                    return; // return at this point, so the page can continue initialisation\r\n                }).\r\n                then(function(){\r\n\r\n                    // initialise the character counter plugin\r\n                    $('#add-recipient-account-number', $thisPage).characterCounter();\r\n                    return;\r\n                }).\r\n                then(function(){\r\n                    // check if the page was sent a bank account id.\r\n                    // if so preload the bank account data into the form\r\n                    if($('#app-main-navigator').get(0).topPage.data && $('#app-main-navigator').get(0).topPage.data.edit){\r\n                        // get the details of the account to be edited\r\n                        utopiasoftware.saveup.savedRecipientsBankAccountOperations.\r\n                        getSavedRecipientAccount($('#app-main-navigator').get(0).topPage.data.edit).then(function(bankAcct){\r\n                            $('#add-recipient-page #add-recipient-unique-id').val(bankAcct.uniqueAccountId);\r\n                            $('#add-recipient-page #add-recipient-account-number').val(bankAcct.bankAccountNumber);\r\n                            $('#add-recipient-page #add-recipient-account-name').val(bankAcct.bankAccountName);\r\n                            $('#add-recipient-page #add-recipient-choose-bank').val(bankAcct.flutterwave_bankCode);\r\n                            $('#add-recipient-page #hidden-choose-bank-input').val(bankAcct.flutterwave_bankCode);\r\n\r\n                            // re-update the form input fields\r\n                            Materialize.updateTextFields();\r\n                            //re-initialise the form select elements\r\n                            $('select', $thisPage).material_select();\r\n\r\n                            // remove the progress indeterminate loader\r\n                            $('.progress', $thisPage).remove();\r\n                            // make the add recipient form visible\r\n                            $('#add-recipient-form', $thisPage).css(\"display\", \"block\");\r\n                            // enable the 'Cancel' & 'Save' buttons\r\n                            $('#add-recipient-cancel-button, #add-recipient-save-button', $thisPage).removeAttr(\"disabled\");\r\n                            // hide the loader\r\n                            $('#loader-modal').get(0).hide();\r\n                        });\r\n                    }\r\n                    else { // this is not an edit operation, but a CREATE operation\r\n                        // remove the progress indeterminate loader\r\n                        $('.progress', $thisPage).remove();\r\n                        // make the add recipient form visible\r\n                        $('#add-recipient-form', $thisPage).css(\"display\", \"block\");\r\n                        // enable the 'Cancel' & 'Save' buttons\r\n                        $('#add-recipient-cancel-button, #add-recipient-save-button', $thisPage).removeAttr(\"disabled\");\r\n                        // hide the loader\r\n                        $('#loader-modal').get(0).hide();\r\n                    }\r\n                }).\r\n                catch();\r\n\r\n\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the page is hidden\r\n         * @param event\r\n         */\r\n        pageHide: (event) => {\r\n            try {\r\n                // remove any tooltip being displayed on all forms on the page\r\n                $('#add-recipient-page [data-hint]').removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                $('#add-recipient-page [data-hint]').removeAttr(\"data-hint\");\r\n                // reset the form validator object on the page\r\n                utopiasoftware.saveup.controller.addRecipientPageViewModel.formValidator.reset();\r\n            }\r\n            catch(err){}\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the page is destroyed\r\n         * @param event\r\n         */\r\n        pageDestroy: (event) => {\r\n            try{\r\n                // remove any tooltip being displayed on all forms on the page\r\n                $('#add-recipient-page [data-hint]').removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                $('#add-recipient-page [data-hint]').removeAttr(\"data-hint\");\r\n                // destroy the form validator objects on the page\r\n                utopiasoftware.saveup.controller.addRecipientPageViewModel.formValidator.destroy();\r\n                // destroy the form inputs which need to be destroyed\r\n                $('#add-recipient-page select').material_select('destroy');\r\n                $('#add-recipient-page #add-recipient-account-number').off();\r\n                $('#add-recipient-page #add-recipient-account-number').removeData();\r\n            }\r\n            catch(err){}\r\n        },\r\n\r\n        /**\r\n         * method is triggered when add card form is successfully validated\r\n         */\r\n        addRecipientFormValidated: function(){\r\n\r\n            // display the secure storage modal to indicate that Recipient's Bank Account is being securely stored\r\n            $('#secure-storage-modal .modal-message').html(\"Storing Recipient's Bank Account on Device...\");\r\n            $('#secure-storage-modal').get(0).show(); // show loader\r\n\r\n            // update the bank account image/avatar property\r\n            utopiasoftware.saveup.controller.addRecipientPageViewModel.bankAccountImage = \"css/app-images/avatar-\" +\r\n                utopiasoftware.saveup.controller.addRecipientPageViewModel.bankAccountImageRandomNum + \".png\";\r\n\r\n            // check if this is an EDIT or CREATE operation\r\n            if($('#app-main-navigator').get(0).topPage.data && $('#app-main-navigator').get(0).topPage.data.edit){ //this is an EDIT operation\r\n                // call the utility method used to delete a specified bank account\r\n                utopiasoftware.saveup.savedRecipientsBankAccountOperations.\r\n                deleteSavedRecipientAccount($('#app-main-navigator').get(0).topPage.data.edit).\r\n                then(function(){\r\n                    // create an edited bank account data\r\n                    var editedBankAcctData = {\r\n                        uniqueAccountId: $('#app-main-navigator').get(0).topPage.data.edit,\r\n                        bankAccountNumber: $('#add-recipient-form #add-recipient-account-number').val(),\r\n                        bankAccountName: $('#add-recipient-form #add-recipient-account-name').val(),\r\n                        bankName: $('#add-recipient-form #add-recipient-choose-bank option:selected').text().trim(),\r\n                        flutterwave_bankCode: $('#add-recipient-form #add-recipient-choose-bank').val(),\r\n                        bankAccountAvatar: utopiasoftware.saveup.controller.addRecipientPageViewModel.bankAccountImage\r\n                    };\r\n\r\n                    // call the utility method used to add a specified bank account to the bank account collection\r\n                    return utopiasoftware.saveup.savedRecipientsBankAccountOperations.\r\n                    addSavedRecipientAccount(editedBankAcctData);\r\n                }).\r\n                then(function(){\r\n                    // wait for approximately 4 secs for the saving animation to run (at least once before concluding animation\r\n                    window.setTimeout(function(){\r\n                        // reset the form validator object on the page\r\n                        utopiasoftware.saveup.controller.addRecipientPageViewModel.formValidator.reset();\r\n                        // reset the form object\r\n                        $('#add-recipient-page #add-recipient-form').get(0).reset();\r\n                        $('#add-recipient-page select').material_select();\r\n                        // reset the account number validation check and all its related actions\r\n                        utopiasoftware.saveup.controller.addRecipientPageViewModel.\r\n                        isbankAccountNumberValidated($('#add-recipient-page #add-recipient-account-verify-account'));\r\n                        // reset the bank account properties\r\n                        utopiasoftware.saveup.controller.addRecipientPageViewModel.bankAccountName = \"\";\r\n                        utopiasoftware.saveup.controller.addRecipientPageViewModel.tokenData = \"\";\r\n                        utopiasoftware.saveup.controller.addRecipientPageViewModel.bankAccountImage = \"\";\r\n                        // reset the page scroll position to the top\r\n                        $('#add-recipient-page .page__content').scrollTop(0);\r\n\r\n                        $('#secure-storage-modal').get(0).hide(); // hide loader\r\n                        // inform user that acct has been successfully added to secure storage\r\n                        Materialize.toast(\"Recipient Account updated\", 4000);\r\n                    }, 4000);\r\n                }).\r\n                catch(function(){\r\n                    $('#secure-storage-modal').get(0).hide(); // hide loader\r\n                    ons.notification.alert({title: \"Update Error\",\r\n                        messageHTML: '<ons-icon icon=\"md-close-circle-o\" size=\"30px\" ' +\r\n                        'style=\"color: red;\"></ons-icon> <span>' + (err.message || \"\") + \" Sorry, this recipient's bank account could not be updated. \" +\r\n                        '<br>You can try again' + '</span>',\r\n                        cancelable: true\r\n                    });\r\n                });\r\n            }\r\n            else { // this is a CREATE/ADD OPERATION\r\n\r\n                var newBankAcctData = {\r\n                    uniqueAccountId: \"\" + utopiasoftware.saveup.model.deviceUUID + Date.now(),\r\n                    bankAccountNumber: $('#add-recipient-form #add-recipient-account-number').val(),\r\n                    bankAccountName: $('#add-recipient-form #add-recipient-account-name').val(),\r\n                    bankName: $('#add-recipient-form #add-recipient-choose-bank option:selected').text().trim(),\r\n                    flutterwave_bankCode: $('#add-recipient-form #add-recipient-choose-bank').val(),\r\n                    bankAccountAvatar: utopiasoftware.saveup.controller.addRecipientPageViewModel.bankAccountImage\r\n                };\r\n\r\n                utopiasoftware.saveup.savedRecipientsBankAccountOperations.\r\n                addSavedRecipientAccount(newBankAcctData).\r\n                then(function(){\r\n                    // wait for approximately 4 secs for the saving animation to run (at least once before concluding animation\r\n                    window.setTimeout(function(){\r\n                        // reset the form validator object on the page\r\n                        utopiasoftware.saveup.controller.addRecipientPageViewModel.formValidator.reset();\r\n                        // reset the form object\r\n                        $('#add-recipient-page #add-recipient-form').get(0).reset();\r\n                        $('#add-recipient-page select').material_select();\r\n                        // reset the account number validation check and all its related actions\r\n                        utopiasoftware.saveup.controller.addRecipientPageViewModel.\r\n                        isbankAccountNumberValidated($('#add-recipient-page #add-recipient-account-verify-account'));\r\n                        // reset the bank account properties\r\n                        utopiasoftware.saveup.controller.addRecipientPageViewModel.bankAccountName = \"\";\r\n                        utopiasoftware.saveup.controller.addRecipientPageViewModel.tokenData = \"\";\r\n                        utopiasoftware.saveup.controller.addRecipientPageViewModel.bankAccountImage = \"\";\r\n                        // reset the page scroll position to the top\r\n                        $('#add-recipient-page .page__content').scrollTop(0);\r\n\r\n                        $('#secure-storage-modal').get(0).hide(); // hide loader\r\n                        // inform user that recipient's bank account has been successfully added to secure storage\r\n                        Materialize.toast(\"Recipient's bank account added\", 4000);\r\n                    }, 4000);\r\n                }).\r\n                catch(function(err){\r\n                    $('#secure-storage-modal').get(0).hide(); // hide loader\r\n                    ons.notification.alert({title: \"Save Error\",\r\n                        messageHTML: '<ons-icon icon=\"md-close-circle-o\" size=\"30px\" ' +\r\n                        'style=\"color: red;\"></ons-icon> <span>' + (err.message || \"\") + \" Sorry, this recipient's bank account could not be added. \" +\r\n                        '<br>You can try again' + '</span>',\r\n                        cancelable: true\r\n                    });\r\n                });\r\n\r\n            }\r\n\r\n        },\r\n\r\n\r\n        /**\r\n         * method is used to check if user has asked for bank account number to be validated.\r\n         * It sets or remove the appropriate attributes need to activate or deactivate\r\n         * remote account validation\r\n         */\r\n        isbankAccountNumberValidated: function(checkElem){\r\n            // check if user wants acct number validated or not\r\n            if($(checkElem).is(\":checked\")){ // user wants the account number remotely validated\r\n                // add the necessary attributes to the account number input in order to enable remote account number validation\r\n                $('#add-recipient-account-number').attr(\"data-parsley-remote-validator\", \"recipientaccountnumbercheck\");\r\n                // also make the account name input disabled & wipe its previous content\r\n                $('#add-recipient-account-name').attr(\"disabled\", true);\r\n                $('#add-recipient-account-name').val(\"\");\r\n                // remove tooltip from account name\r\n                $(\"#add-recipient-account-name\").parent().find('label:eq(0)').removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                $(\"#add-recipient-account-name\").parent().find('label:eq(0)').removeAttr(\"data-hint\");\r\n                // display the notice that an internet connection is required for verification\r\n                $('#add-recipient-account-verify-account-notice').css(\"display\", \"block\");\r\n            }\r\n            else{ // user does not want account number remotely validated\r\n                // remove attributes to prevent remote account number validation\r\n                $('#add-recipient-account-number').removeAttr(\"data-parsley-remote-validator\");\r\n                // also make the account name input enabled & wipe its previous content\r\n                $('#add-recipient-account-name').removeAttr(\"disabled\");\r\n                $('#add-recipient-account-name').val(\"\");\r\n                // hide the notice that an internet connection is required for verification\r\n                $('#add-recipient-account-verify-account-notice').css(\"display\", \"none\");\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is used to listen for scroll event of the page content\r\n         *\r\n         * @param event\r\n         */\r\n        pageContentScrolled: function(event){\r\n\r\n            // set the current scrolltop position\r\n            utopiasoftware.saveup.controller.addRecipientPageViewModel.currentScrollPosition = $(this).scrollTop();\r\n\r\n            if(utopiasoftware.saveup.controller.addRecipientPageViewModel.currentScrollPosition >\r\n                utopiasoftware.saveup.controller.addRecipientPageViewModel.previousScrollPosition){ // user scrolled up\r\n                // set the current position as previous position\r\n                utopiasoftware.saveup.controller.addRecipientPageViewModel.previousScrollPosition =\r\n                    utopiasoftware.saveup.controller.addRecipientPageViewModel.currentScrollPosition;\r\n\r\n                // check if the header image left after scrolling is <= height of page toolbar\r\n                if((140 - utopiasoftware.saveup.controller.addRecipientPageViewModel.currentScrollPosition) <= 56){\r\n                    // the header image left after scrolling is <= height of page toolbar\r\n                    // check if the toolbar for the page has already been made opaque\r\n                    if(this.isToolBarOpaque != true){ // toolbar has not been made opaque\r\n\r\n                        $('#add-recipient-page ons-toolbar').removeClass(\"toolbar--transparent translucent-toolbar\"); // make the toolbar opaque\r\n                        // also pin the help header on the page just below the toolbar\r\n                        $('#add-recipient-page ons-list-header').css(\r\n                            {\"display\": \"block\", \"position\": \"fixed\", \"top\": \"56px\", \"width\": \"100%\"});\r\n                        this.isToolBarOpaque = true; // flag that toolbar has been made opaque\r\n                    }\r\n                }\r\n\r\n                return;\r\n            }\r\n\r\n            if(utopiasoftware.saveup.controller.addRecipientPageViewModel.currentScrollPosition <\r\n                utopiasoftware.saveup.controller.addRecipientPageViewModel.previousScrollPosition){ // user scrolled down\r\n                // set the current position as previous position\r\n                utopiasoftware.saveup.controller.addRecipientPageViewModel.previousScrollPosition =\r\n                    utopiasoftware.saveup.controller.addRecipientPageViewModel.currentScrollPosition;\r\n\r\n                // check if the header image left after scrolling is > height of page toolbar\r\n                if((140 - utopiasoftware.saveup.controller.addRecipientPageViewModel.currentScrollPosition) > 56){\r\n                    // the header image left after scrolling is > height of page toolbar\r\n                    // check if the toolbar for the page has already been made transparent\r\n                    if(this.isToolBarOpaque == true){ // toolbar has NOT been made transparent\r\n\r\n                        $('#add-recipient-page ons-toolbar').addClass(\"toolbar--transparent translucent-toolbar\"); // make the toolbar transparent\r\n                        // also unpin the help header on the page from just below the toolbar\r\n                        $('#add-recipient-page ons-list-header').css({\"display\": \"block\", \"position\": \"static\", \"top\": \"56px\"});\r\n                        this.isToolBarOpaque = false; // flag that toolbar has been made transparent\r\n                    }\r\n                }\r\n\r\n                return;\r\n            }\r\n        },\r\n\r\n\r\n        /**\r\n         * method is used to reset/wipe the content of the account name IF\r\n         * remote account validation has been enabled\r\n         */\r\n        resetAccountNameDisplay: function(){\r\n            if($('#add-recipient-page #add-recipient-account-verify-account').is(\":checked\")) { // user wants the account number remotely validated\r\n                $('#add-recipient-page #add-recipient-account-name').val(\"\");\r\n            }\r\n        },\r\n\r\n        /**\r\n         * custom parsley validator for bank account number\r\n         *\r\n         * @param jqxhr {jqueryXhr}\r\n         */\r\n        recipientAccountNumberValidator: function(jqxhr){\r\n            var serverResponse = \"\"; // holds the server response\r\n\r\n            // check the validator response\r\n            if(jqxhr.status != 200){ // request was NOT success\r\n                return false;\r\n            }\r\n\r\n            // convert the server response to json\r\n            serverResponse = JSON.parse(jqxhr.responseText.trim());\r\n\r\n            if(serverResponse.status != \"success\"){ // the server api response was NOT successful\r\n\r\n                return false;\r\n            }\r\n            else { // the server api response was successful\r\n                // set the bank account name\r\n                utopiasoftware.saveup.controller.addRecipientPageViewModel.bankAccountName = serverResponse.data.account_name;\r\n                return true; // validation successful\r\n            }\r\n\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * object is view-model for transfer-cash-card page\r\n     */\r\n    transferCashCardPageViewModel: {\r\n\r\n        /**\r\n         * used to hold the parsley form validation object for the page\r\n         */\r\n        formValidator: null,\r\n\r\n        /**\r\n         * used to hold the parsley field validation object for the 'transfer amount' input\r\n         */\r\n        transferAmountFieldValidator: null,\r\n\r\n        /**\r\n         * property used to keep track of the immediate last scroll position of the\r\n         * page content\r\n         */\r\n        previousScrollPosition: 0,\r\n\r\n        /**\r\n         * property used to keep track of the current scroll position of the\r\n         * page content\r\n         */\r\n        currentScrollPosition: 0,\r\n\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n            // find all onsen-ui input targets and insert a special class to prevent materialize-css from updating the styles\r\n            $('ons-input input', $thisPage).addClass('utopiasoftware-no-style');\r\n            // enable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').attr(\"swipeable\", true);\r\n\r\n            // reset the previous & current scroll positions of the page contents\r\n            utopiasoftware.saveup.controller.transferCashCardPageViewModel.previousScrollPosition = 0;\r\n            utopiasoftware.saveup.controller.transferCashCardPageViewModel.currentScrollPosition = 0;\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            function loadPageOnAppReady(){\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if(!ons.isReady() || utopiasoftware.saveup.model.isAppReady === false){\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                $('#app-main-navigator').get(0).topPage.onDeviceBackButton = function(){\r\n\r\n                    // check if the side menu is open\r\n                    if($('ons-splitter').get(0).left.isOpen){ // side menu open, so close it\r\n                        $('ons-splitter').get(0).left.close();\r\n                        return; // exit the method\r\n                    }\r\n\r\n                    // check which tab is active and navigate appropriately\r\n                    if($('.transfer-cash-tabbar').get(0).getActiveTabIndex() == 0){ // the first tab is active\r\n                        // navigate to the main menu\r\n                        $('#app-main-navigator').get(0).resetToPage(\"main-menu-page.html\");\r\n                    }\r\n                    else{ // the second tab is active\r\n                        // move the tab view to the Card tab\r\n                        $('.transfer-cash-tabbar').get(0).setActiveTab(0, {animation: \"slide\"});\r\n                    }\r\n\r\n                };\r\n\r\n                // listen for the scroll event of the page carousel content\r\n                $('ons-carousel', $thisPage).on(\"scroll\",\r\n                    utopiasoftware.saveup.controller.transferCashCardPageViewModel.pageContentScrolled);\r\n\r\n                // initialise the form validation objects.\r\n                utopiasoftware.saveup.controller.transferCashCardPageViewModel.transferAmountFieldValidator =\r\n                    $('#transfer-cash-card-amount', $thisPage).parsley({ // used solely for the transfer-cash-amount input\r\n                        value: function(parsley) {\r\n                            // convert the amount back to a plain text without the thousand separator\r\n                            let parsedNumber = kendo.parseFloat($('#transfer-cash-card-amount', $thisPage).val());\r\n                            return (parsedNumber ? parsedNumber : $('#transfer-cash-card-amount', $thisPage).val());\r\n                        }\r\n                    });\r\n\r\n                utopiasoftware.saveup.controller.transferCashCardPageViewModel.formValidator =\r\n                    $('#transfer-cash-card-form', $thisPage).parsley(); // used for the form in general\r\n\r\n\r\n                 // attach listener for the 'transfer cash' card button click\r\n                $('#transfer-cash-card-button', $thisPage).get(0).onclick = function(){\r\n                    // run the validation method for the transfer-cash-card form\r\n                    utopiasoftware.saveup.controller.transferCashCardPageViewModel.formValidator.whenValidate();\r\n                };\r\n\r\n                // listen for form field validation failure event\r\n                utopiasoftware.saveup.controller.transferCashCardPageViewModel.formValidator.on('field:error', function(fieldInstance) {\r\n                    // get the element that triggered the field validation error and use it to display tooltip\r\n                    // display tooltip\r\n                    $(fieldInstance.$element).parent().find('label:eq(0)').addClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                    $(fieldInstance.$element).parent().find('label:eq(0)').attr(\"data-hint\", fieldInstance.getErrorsMessages()[0]);\r\n                });\r\n\r\n                // listen for form field validation success event\r\n                utopiasoftware.saveup.controller.transferCashCardPageViewModel.formValidator.on('field:success', function(fieldInstance) {\r\n                    // remove tooltip from element\r\n                    $(fieldInstance.$element).parent().find('label:eq(0)').removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                    $(fieldInstance.$element).parent().find('label:eq(0)').removeAttr(\"data-hint\");\r\n                });\r\n\r\n\r\n                // listen for transfer-cash-card form validation success\r\n                utopiasoftware.saveup.controller.transferCashCardPageViewModel.formValidator.on('form:success',\r\n                    utopiasoftware.saveup.controller.transferCashCardPageViewModel.transferCashCardFormValidated);\r\n\r\n                // initialise the card number autocomplete widget\r\n                utopiasoftware.saveup.financialCardOperations.loadCardData().\r\n                then(function(cardsArrayData){\r\n                    var autoCompleteData = {}; // holds the data used to initialise the autocomplete widget\r\n                    cardsArrayData.forEach(function(arrayElem){ // function to convert each array element to a format for autocomplete\r\n                        autoCompleteData[arrayElem.cardNickName + \" - \" +  arrayElem.cardNumber] = arrayElem.cardImage;\r\n\r\n                    });\r\n                    // intialise widget\r\n                    $('#transfer-cash-card-number.autocomplete', $thisPage).autocomplete({\r\n                        data: autoCompleteData,\r\n                        onAutocomplete: function(val) {\r\n                            // callback function when value is autocompleted\r\n                        },\r\n                        minLength: 1 // The minimum length of the input for the autocomplete to start. Default: 1.\r\n                    });\r\n\r\n                    // call the method to retrieve saved bank account recipient's used to populate recipient autocomplete widget\r\n                    return utopiasoftware.saveup.savedRecipientsBankAccountOperations.loadSavedRecipientsAccountsData();\r\n\r\n                }, function(){return [];}).\r\n                then(function(savedRecipientsArray){\r\n                    var autoCompleteData = {}; // holds the data used to initialise the autocomplete widget\r\n                    savedRecipientsArray.forEach(function(arrayElem){ // function to convert each array element to a format for autocomplete\r\n                        autoCompleteData[arrayElem.bankAccountName + \" - \" +  arrayElem.bankAccountNumber] =\r\n                            arrayElem.bankAccountAvatar;\r\n\r\n                    });\r\n                    // initialise widget\r\n                    $('#transfer-cash-card-recipient-account-name.autocomplete', $thisPage).autocomplete({\r\n                        data: autoCompleteData,\r\n                        onAutocomplete: function(val) {\r\n                            // Callback function when value is autcompleted.\r\n                        },\r\n                        minLength: 1 // The minimum length of the input for the autocomplete to start. Default: 1.\r\n                    });\r\n                    return utopiasoftware.saveup.sortBanksData(); // retrieve data for banks\r\n                }, function(){return [];}).\r\n                then(function(bankArrayData){\r\n                    var optionTags = \"\"; // string to hold all created option tags\r\n\r\n                    // get each object in bank array and use it to create the 'bank' select element\r\n                    for(var index = 0; index < bankArrayData.length; index++){\r\n                        var bankObject = bankArrayData[index]; // get the bank object\r\n                        // update the banks select element option tags\r\n                        for(var prop in bankObject){\r\n                            optionTags += '<option value=\"' + prop + '\">' + bankObject[prop] + '</option>';\r\n                        }\r\n                    }\r\n\r\n                    $('#transfer-cash-card-choose-bank', $thisPage).append(optionTags); // append all the created option tags\r\n                    // initialise the 'bank' select element\r\n                    $('#transfer-cash-card-choose-bank', $thisPage).material_select();\r\n                    return; // return at this point, so the page can continue initialisation\r\n                }, function(){return null;}).\r\n                then(function(){\r\n                    /** dynamically create the contents of the 'year' select elements **/\r\n                    var optionTags = \"\"; // string to hold all created option tags for the Card Expiry Year\r\n                    var yearOption = (new Date()).getFullYear(); // get the current year\r\n                    // add current year to the options tag\r\n                    optionTags += '<option value=\"' + yearOption + '\">' + yearOption + '</option>';\r\n\r\n                    // add 3 more years to the option tags for the Card Expiry Year\r\n                    for(var index = 0; index < 3; index++){\r\n                        // increase the yearOption by 1\r\n                        yearOption += 1;\r\n                        // add current year to the options tag\r\n                        optionTags += '<option value=\"' + yearOption + '\">' + yearOption + '</option>';\r\n                    }\r\n\r\n                    $('#transfer-cash-card-expiry-year', $thisPage).append(optionTags); // append all the created option tags\r\n\r\n                    // initialise all the select element\r\n                    $('select', $thisPage).material_select();\r\n                    return null;\r\n                }, function(){return null;}).\r\n                then(function(){\r\n                    var pageDataObject = $('#app-main-navigator').get(0).topPage.data; // get the data attached to this page\r\n\r\n                    // check if the data contains recipient account details\r\n                    if(pageDataObject && pageDataObject.recipient_details){ // recipient account details are present\r\n                        // update the form details to contains the received recipient account details\r\n                        $('#transfer-cash-card-recipient-account-name', $thisPage).\r\n                        val(pageDataObject.recipient_details.recipientAccountName + \" - \" +\r\n                            pageDataObject.recipient_details.recipientAccount);\r\n                        $('#transfer-cash-card-choose-bank', $thisPage).\r\n                        val(pageDataObject.recipient_details.recipientBankCode);\r\n                        $('#hidden-choose-bank-input', $thisPage).\r\n                        val(pageDataObject.recipient_details.recipientBankCode);\r\n                    }\r\n\r\n                    // check if the data contains sender account details\r\n                    if(pageDataObject && pageDataObject.sender_details){ // sender account details are present\r\n                        // move the tab view to the Bank tab\r\n                        $('.transfer-cash-tabbar').get(0).setActiveTab(1, {animation: \"slide\"});\r\n                    }\r\n\r\n                    // check if the data contains sender card details\r\n                    if(pageDataObject && pageDataObject.sender_card_details){ // sender card details are present\r\n                        // update the form details to contain the sender card details\r\n                        $('#transfer-cash-card-number', $thisPage).\r\n                        val(pageDataObject.sender_card_details.senderCardNickName + \" - \" +\r\n                            pageDataObject.sender_card_details.senderCardNumber);\r\n                        $('#transfer-cash-card-cvv', $thisPage).\r\n                        val(pageDataObject.sender_card_details.senderCardCvv);\r\n                        $('#transfer-cash-card-expiry-month', $thisPage).\r\n                        val(pageDataObject.sender_card_details.senderCardExpiryMonth);\r\n                        $('#hidden-card-expiry-month-input', $thisPage).\r\n                        val(pageDataObject.sender_card_details.senderCardExpiryMonth);\r\n                        $('#transfer-cash-card-expiry-year', $thisPage).\r\n                        val(pageDataObject.sender_card_details.senderCardExpiryYear);\r\n                        $('#hidden-card-expiry-year-input', $thisPage).\r\n                        val(pageDataObject.sender_card_details.senderCardExpiryYear);\r\n\r\n                        // display the verify card type checkbox to the user\r\n                        $('.postcash-transfer-cash-card-hidden-info:eq(0)', $thisPage).css(\"display\", \"block\");\r\n                    }\r\n\r\n                    // update the display of all the select element\r\n                    $('select', $thisPage).material_select();\r\n                    Materialize.updateTextFields(); // update the display of text input fields\r\n                    return null; // return null to move to the next step\r\n                }, function(){return null;}).\r\n                then(function(){\r\n                    // remove the progress indeterminate loader\r\n                    $('.progress', $thisPage).remove();\r\n                    // make the transfer-cash-card form visible\r\n                    $('#transfer-cash-card-form', $thisPage).css(\"display\", \"block\");\r\n                    // enable the 'Cancel' & 'Save' buttons for the transfer-cash-card form\r\n                    $('#transfer-cash-card-cancel-button-1, #transfer-cash-card-button', $thisPage).removeAttr(\"disabled\");\r\n                    // hide the loader\r\n                    $('#loader-modal').get(0).hide();\r\n                }, function(){});\r\n\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: (event) => {\r\n            // enable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').attr(\"swipeable\", true);\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the create-account page is hidden\r\n         * @param event\r\n         */\r\n        pageHide: (event) => {\r\n            var $thisPage = $(event.target); // get the current page shown\r\n            try {\r\n                // remove any tooltip being displayed on all forms on the page\r\n                $('[data-hint]', $thisPage).removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                $('[data-hint]', $thisPage).removeAttr(\"data-hint\");\r\n                // reset the transfer-cash-card form validator object on the page\r\n                utopiasoftware.saveup.controller.transferCashCardPageViewModel.transferAmountFieldValidator.reset();\r\n                utopiasoftware.saveup.controller.transferCashCardPageViewModel.formValidator.reset();\r\n            }\r\n            catch(err){}\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the sign-in page is destroyed\r\n         * @param event\r\n         */\r\n        pageDestroy: (event) => {\r\n            var $thisPage = $(event.target); // get the current page shown\r\n            try{\r\n                // remove any tooltip being displayed on all forms on the page\r\n                $('[data-hint]', $thisPage).removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                $('[data-hint]', $thisPage).removeAttr(\"data-hint\");\r\n                // destroy the form validator objects on the page\r\n                utopiasoftware.saveup.controller.transferCashCardPageViewModel.transferAmountFieldValidator.reset();\r\n                utopiasoftware.saveup.controller.transferCashCardPageViewModel.formValidator.destroy();\r\n                // destroy the form inputs which need to be destroyed\r\n                $('select', $thisPage).material_select('destroy');\r\n                $('input.autocomplete', $thisPage).off();\r\n                $('input.autocomplete', $thisPage).removeData();\r\n            }\r\n            catch(err){}\r\n        },\r\n\r\n        /**\r\n         * method is triggered when transfer-cash-card form is successfully validated\r\n         */\r\n        transferCashCardFormValidated: function(){\r\n\r\n            // check if Internet Connection is available before proceeding\r\n            if(navigator.connection.type === Connection.NONE){ // no Internet Connection\r\n                // inform the user that they cannot proceed without Internet\r\n                window.plugins.toast.showWithOptions({\r\n                    message: \"You cannot transfer cash without an active Internet Connection\",\r\n                    duration: 4500,\r\n                    position: \"top\",\r\n                    styling: {\r\n                        opacity: 1,\r\n                        backgroundColor: '#ff0000', //red\r\n                        textColor: '#FFFFFF',\r\n                        textSize: 14\r\n                    }\r\n                }, function(toastEvent){\r\n                    if(toastEvent && toastEvent.event == \"touch\"){ // user tapped the toast, so hide toast immediately\r\n                        window.plugins.toast.hide();\r\n                    }\r\n                });\r\n\r\n                return; // exit method immediately\r\n            }\r\n\r\n            // confirm transfer-cash-card operation\r\n            ons.notification.confirm({title: '<ons-icon icon=\"md-alert-triangle\" size=\"36px\" ' +\r\n                'style=\"color: orange;\"></ons-icon> Confirm Transfer',\r\n                messageHTML: '<span>Cash transfers cannot be undone or reversed when completed. <br>' +\r\n                'Do you want to continue?</span>',\r\n                cancelable: false,\r\n                buttonLabels: [\"No\", \"Yes\"]\r\n            }).\r\n            then(function(buttonIndex){\r\n                if(buttonIndex === 1){ // user wants to continue transfer\r\n                    // display message to user\r\n                    $('#loader-modal-message').html(\"Initiating Transfer...\");\r\n                    $('#loader-modal').get(0).show(); // show loader\r\n                    // retrieve the necessary authorisation token\r\n                    return utopiasoftware.saveup.moneyWaveObject.useToken;\r\n                }\r\n                else{ // user terminated transfer\r\n                    throw null;\r\n                }\r\n            }).\r\n            then(function(token){\r\n\r\n                if(token === null){ // user already terminated transfer\r\n                    throw null;\r\n                }\r\n                else{ // use retrieved token to initiate transfer\r\n\r\n                    //create the cash transfer data\r\n                    var cashTransferData = {\r\n                        firstname: utopiasoftware.saveup.model.appUserDetails.firstName.split(\" \")[0],\r\n                        lastname: utopiasoftware.saveup.model.appUserDetails.lastName.split(\" \")[0],\r\n                        phonenumber: utopiasoftware.saveup.model.appUserDetails.phoneNumber_intlFormat,\r\n                        email: (utopiasoftware.saveup.model.appUserDetails.firstName.split(\" \")[0] +\r\n                        utopiasoftware.saveup.model.appUserDetails.lastName.split(\" \")[0]) + Date.now() + \"@mymail.com\",\r\n                        apiKey: utopiasoftware.saveup.moneyWaveObject.key.apiKey,\r\n                        medium: \"mobile\",\r\n                        fee: utopiasoftware.saveup.model.fee,\r\n                        redirecturl: \"https://postcash.000webhostapp.com/transfer-cash-card.html\",\r\n                        card_no: $('#transfer-cash-card-number', '#transfer-cash-card-page').val().split(\" - \").pop(),\r\n                        cvv: $('#transfer-cash-card-cvv', '#transfer-cash-card-page').val(),\r\n                        expiry_year: $('#transfer-cash-card-expiry-year', '#transfer-cash-card-page').val(),\r\n                        expiry_month: $('#transfer-cash-card-expiry-month', '#transfer-cash-card-page').val(),\r\n                        amount: kendo.parseFloat($('#transfer-cash-card-amount', '#transfer-cash-card-page').val()),\r\n                        narration: $('#transfer-cash-card-narration', '#transfer-cash-card-page').val(),\r\n                        recipient_bank: $('#transfer-cash-card-choose-bank', '#transfer-cash-card-page').val(),\r\n                        recipient_account_number:\r\n                            $('#transfer-cash-card-recipient-account-name', '#transfer-cash-card-page').val().split(\" - \").pop()\r\n                    };\r\n                    // check if user want to transfer using a local mastercard OR verve\r\n                    if(! $('#transfer-cash-card-pin', '#transfer-cash-card-form').is(':disabled')){\r\n                        // user wants to transfer using a local mastercard or verve\r\n                        cashTransferData.charge_auth  = \"PIN\";\r\n                        cashTransferData.pin  = $('#transfer-cash-card-pin', '#transfer-cash-card-page').val();\r\n                    }\r\n\r\n                    // initiate the cash transfer request\r\n                    return new Promise(function(resolve, reject){\r\n                        var cashTransferRequest = $.ajax(\r\n                            {\r\n                                url: utopiasoftware.saveup.moneyWaveObject.gateway + \"v1/transfer\",\r\n                                type: \"post\",\r\n                                contentType: \"application/json\",\r\n                                beforeSend: function(jqxhr) {\r\n                                    jqxhr.setRequestHeader(\"Authorization\", token);\r\n                                },\r\n                                dataType: \"json\",\r\n                                timeout: 240000, // wait for 4 minutes before timeout of request\r\n                                processData: false,\r\n                                data: JSON.stringify(cashTransferData)\r\n                            }\r\n                        );\r\n\r\n                        // server responded to cash transfer request\r\n                        cashTransferRequest.done(function(responseData){\r\n                            if(responseData.status === \"success\"){ // the server responded with a successful transfer initiation\r\n                                resolve(responseData); // resolve the cash transfer promise\r\n                            }\r\n                            else { // the server responded unsuccessfully\r\n                                reject(responseData); // reject the cash transfer promise\r\n                            }\r\n                        });\r\n\r\n                        // server responded with a failure to the cash transfer request\r\n                        cashTransferRequest.fail(function(jqxhr){\r\n                            if(jqxhr.status == 500){\r\n                                reject(JSON.parse(jqxhr.responseText.trim()));\r\n                            }\r\n                            else{\r\n                                reject(jqxhr.responseText.trim());\r\n                            }\r\n                        });\r\n                    });\r\n                }\r\n            }).\r\n            then(function(responseData){ // securely store the transaction history from the responseData on the user's device\r\n                responseData.data.transfer.postcash_transaction_type = \"Cash Transfer (Card)\"; // set the postcash transaction type\r\n                return Promise.all([utopiasoftware.saveup.transactionHistoryOperations.\r\n                addTransactionHistory(responseData.data.transfer), Promise.resolve(responseData)]);\r\n            }).\r\n            then(function(responseDataArray){\r\n                if(responseDataArray == null || responseDataArray[1] == null){ // user already terminated transfer\r\n                    throw null;\r\n                }\r\n\r\n                var responseData = responseDataArray[1]; // retrieve the response from the server\r\n\r\n                // update the display info for the card transaction\r\n\r\n                $('#transfer-cash-card-authorize-amount', '#transfer-cash-card-page').\r\n                html(kendo.toString(kendo.parseFloat(responseData.data.transfer.amountToSend), \"n2\"));\r\n                $('#transfer-cash-card-authorize-fee', '#transfer-cash-card-page').\r\n                html(kendo.toString(kendo.parseFloat(responseData.data.transfer.chargedFee), \"n2\"));\r\n                $('#transfer-cash-card-authorize-total', '#transfer-cash-card-page').\r\n                html(kendo.toString(kendo.parseFloat(responseData.data.transfer.amountToCharge), \"n2\"));\r\n                $('#transfer-cash-card-authorize-message', '#transfer-cash-card-page').\r\n                html(responseData.data.transfer.flutterChargeResponseMessage);\r\n\r\n                // store the transaction id & transaction reference in the session storage\r\n                window.sessionStorage.setItem(\"transaction_id\", responseData.data.transfer.id);\r\n                window.sessionStorage.setItem(\"transaction_ref\", responseData.data.transfer.flutterChargeReference);\r\n\r\n                // hide the transfer bottom-toolbar\r\n                $('.transfer-cash-card-page-bottom-toolbar-transfer-block').css(\"display\", \"none\");\r\n\r\n                // check whether to display the authorisation form OR authorisation iframe\r\n                if($('#transfer-cash-card-pin', '#transfer-cash-card-form').is(':disabled')){ // user does not require the ATM pin\r\n\r\n                    // store the transaction auth_url in the session storage to be used by the authorization iframe\r\n                    window.sessionStorage.setItem(\"transaction_authurl\", responseData.data.authurl);\r\n\r\n                    // hide the authorization form\r\n                    $('#transfer-cash-card-authorise-form', '#transfer-cash-card-page').css(\"display\", \"none\");\r\n                    // disable the 'Authorize' button, show the otp authorise bottom toolbar & hide the pin authorise bottom toolbar\r\n                    $('#transfer-cash-card-authorise-button').attr(\"disabled\", true);\r\n                    $('.transfer-cash-card-page-bottom-toolbar-authorize-otp-block').css(\"display\", \"block\");\r\n                    $('.transfer-cash-card-page-bottom-toolbar-authorize-pin-block').css(\"display\", \"none\");\r\n                }\r\n                else{ // display the authorization form\r\n                    $('#transfer-cash-card-authorise-form', '#transfer-cash-card-page').css(\"display\", \"block\");\r\n                    //  hide the authorization iframe\r\n                    //$('#transfer-cash-card-authorise-iframe', '#transfer-cash-card-page').css(\"display\", \"none\");\r\n                    // enable the 'Authorize' button, hide the otp authorise bottom toolbar & show the pin authorise bottom toolbar\r\n                    $('#transfer-cash-card-authorise-button').removeAttr(\"disabled\");\r\n                    $('.transfer-cash-card-page-bottom-toolbar-authorize-otp-block').css(\"display\", \"none\");\r\n                    $('.transfer-cash-card-page-bottom-toolbar-authorize-pin-block').css(\"display\", \"block\");\r\n                }\r\n\r\n                // update the transaction indicators\r\n                $('.postcash-pay-progress .col:eq(0) span:eq(0)').\r\n                removeClass('postcash-pay-progress-milestone-active').addClass('postcash-pay-progress-milestone');\r\n                $('.postcash-pay-progress .col:eq(0) span:eq(1)').\r\n                removeClass('postcash-pay-progress-milestone-text-active').addClass('postcash-pay-progress-milestone-text');\r\n\r\n                $('.postcash-pay-progress .col:eq(1) span:eq(0)').\r\n                removeClass('postcash-pay-progress-milestone').addClass('postcash-pay-progress-milestone-active');\r\n                $('.postcash-pay-progress .col:eq(1) span:eq(1)').\r\n                removeClass('postcash-pay-progress-milestone-text').addClass('postcash-pay-progress-milestone-text-active');\r\n\r\n                // transition to 'authorize' block\r\n                return $('.transfer-cash-card-carousel').get(0).next({animation: 'none'});\r\n            }).\r\n            then(function(serverResponse){\r\n                if(serverResponse == null){ // user already terminated transfer\r\n                    throw null;\r\n                }\r\n\r\n                $('#loader-modal').get(0).hide(); // hide loader\r\n            }).\r\n            catch(function(error){\r\n\r\n                $('#loader-modal').get(0).hide(); // hide loader\r\n                if(error == null){ // the user decided NOT to proceed with the transfer\r\n                    return; // do nothing\r\n                }\r\n\r\n                ons.notification.alert({title: \"Cash Transfer Failed\",\r\n                    messageHTML: '<ons-icon icon=\"md-close-circle-o\" size=\"30px\" ' +\r\n                    'style=\"color: red;\"></ons-icon> <span>' + (error.data || \"\") + ' Sorry, your cash transfer failed. ' +\r\n                    '<br>You can try again' + '</span>',\r\n                    cancelable: true\r\n                });\r\n\r\n            });\r\n\r\n        },\r\n\r\n\r\n        /**\r\n         * method is used to check authorization of a card cash transfer\r\n         * (AUTHORIZATION VIA OTP)\r\n         */\r\n        transferCashCardOtpAuthorize: function(){\r\n\r\n            var tokenData = \"\"; /// holds the authorisation token\r\n            // check if user has completed transfer authorisation\r\n            if(true){ // user completed transfer authorisation\r\n                // display message to user\r\n                $('#loader-modal-message').html(\"Checking Authorization... Please Wait\");\r\n                $('#loader-modal').get(0).show(); // show loader\r\n                // get the authorisation token\r\n                utopiasoftware.saveup.moneyWaveObject.useToken.\r\n                then(function(token){\r\n                    tokenData = token; // set the token data\r\n                    // initiate the cash transfer authorisation check\r\n                    return new Promise(function(resolve, reject){\r\n                        var cashTransferAuthorisation = $.ajax(\r\n                            {\r\n                                url: utopiasoftware.saveup.moneyWaveObject.gateway + \"v1/transfer/\" +\r\n                                window.sessionStorage.getItem(\"transaction_id\"),\r\n                                type: \"post\",\r\n                                contentType: \"application/json\",\r\n                                beforeSend: function(jqxhr) {\r\n                                    jqxhr.setRequestHeader(\"Authorization\", token);\r\n                                },\r\n                                dataType: \"json\",\r\n                                timeout: 240000, // wait for 4 minutes before timeout of request\r\n                                processData: false,\r\n                                data: JSON.stringify({})\r\n                            }\r\n                        );\r\n\r\n                        // server responded to cash transfer authorisation check\r\n                        cashTransferAuthorisation.done(function(responseData){\r\n                            if(responseData.status === \"success\"){ // the server responded with a successful transfer authorisation\r\n                                resolve(responseData); // resolve the cash transfer authorisation promise\r\n                            }\r\n                            else { // the server responded unsuccessfully\r\n                                reject(responseData); // reject the cash transfer authorisation promise\r\n                            }\r\n                        });\r\n\r\n                        // server responded with a failure to the cash authorisation check\r\n                        cashTransferAuthorisation.fail(function(jqxhr){\r\n                            reject(JSON.parse(jqxhr.responseText.trim()));\r\n                        });\r\n                    });\r\n                }).\r\n                then(function(responseData){\r\n                    if(responseData.data.flutterChargeResponseMessage.toLocaleUpperCase() == \"APPROVED\"){ // cash transfer was success\r\n                        // update the transaction indicators\r\n                        $('.postcash-pay-progress .col:eq(0) span:eq(0)').\r\n                        removeClass('postcash-pay-progress-milestone-active').addClass('postcash-pay-progress-milestone');\r\n                        $('.postcash-pay-progress .col:eq(0) span:eq(1)').\r\n                        removeClass('postcash-pay-progress-milestone-text-active').addClass('postcash-pay-progress-milestone-text');\r\n\r\n                        $('.postcash-pay-progress .col:eq(1) span:eq(0)').\r\n                        removeClass('postcash-pay-progress-milestone-active').addClass('postcash-pay-progress-milestone');\r\n                        $('.postcash-pay-progress .col:eq(1) span:eq(1)').\r\n                        removeClass('postcash-pay-progress-milestone-text-active').addClass('postcash-pay-progress-milestone-text');\r\n\r\n                        $('.postcash-pay-progress .col:eq(2) span:eq(0)').\r\n                        removeClass('postcash-pay-progress-milestone').addClass('postcash-pay-progress-milestone-active');\r\n                        $('.postcash-pay-progress .col:eq(2) span:eq(1)').\r\n                        removeClass('postcash-pay-progress-milestone-text').addClass('postcash-pay-progress-milestone-text-active');\r\n\r\n                        // hide ALL the bottom-toolbar blocks\r\n                        $('.transfer-cash-card-page-bottom-toolbar-transfer-block').css(\"display\", \"none\");\r\n                        $('.transfer-cash-card-page-bottom-toolbar-authorize-otp-block').css(\"display\", \"none\");\r\n                        $('.transfer-cash-card-page-bottom-toolbar-authorize-pin-block').css(\"display\", \"none\");\r\n\r\n                        $('#transfer-cash-card-authorise-iframe').attr(\"src\", \"\"); // reset the src of the authorization iframe\r\n                        // hide the modal that contains the authorisation iframe\r\n                        return $('#transfer-cash-card-authorise-modal').get(0).hide();\r\n                    }\r\n                    else{\r\n                        throw responseData; // cash transfer could not be authorised\r\n                    }\r\n                }).\r\n                then(function(){\r\n                    return utopiasoftware.saveup.transactionHistoryOperations.\r\n                    updateTransactionHistory(window.sessionStorage.getItem(\"transaction_ref\"), \"APPROVED\");\r\n                }).\r\n                then(function(){\r\n                    // call the method to check if the kinvey library has been initialised\r\n                    return new Promise(function(resolve, reject){\r\n                        utopiasoftware.saveup.kinveyBaasOperations.checkKinveyInitialised().\r\n                        then(function(){ // the kinvey Baas library has already been initialised\r\n                            resolve({}); // resolve Promise\r\n                        }, function(){ // kinvey has NOT been initialised, so initialise it\r\n                            resolve(Promise.resolve(utopiasoftware.saveup.kinveyBaasOperations.initialiseKinvey()));\r\n                        })\r\n                    });\r\n                }).\r\n                then(function(){\r\n                    var transferData = {  // holds the data to be sent to the kinvey business logic (for wallet transfer)\r\n                        authorizationToken: tokenData,\r\n                        postcash_fee: utopiasoftware.saveup.model.fee\r\n                    };\r\n\r\n                    return utopiasoftware.saveup.kinveyBaasOperations.transferWalletCash(transferData); // send funds to developer\r\n                }).\r\n                then(function(){\r\n                    // hide loader & move carousel to the confirmation item\r\n                    return Promise.all([$('#loader-modal').get(0).hide(), $('.transfer-cash-card-carousel').get(0).next({animation: 'none'})]);\r\n                }).\r\n                then(function(){\r\n                    // show transaction confirmation modal\r\n                    return $('#financial-operations-success-modal').get(0).show();\r\n                }).\r\n                then(function(){\r\n                    // show the financial operations success modal after 1 second\r\n                    window.setTimeout(function(){\r\n                        $('#financial-operations-success-modal .circle').addClass(\"show\");\r\n                    }, 1000);\r\n                }).\r\n                catch(function(error){\r\n\r\n                    $('#loader-modal').get(0).hide(); // hide loader\r\n                    // hide the modal that contains the authorisation iframe\r\n                    $('#transfer-cash-card-authorise-modal').get(0).hide();\r\n\r\n                    ons.notification.alert({title: \"Cash Transfer Failed\",\r\n                        messageHTML: '<ons-icon icon=\"md-close-circle-o\" size=\"30px\" ' +\r\n                        'style=\"color: red;\"></ons-icon> <span>' + (error.message || \"\") + ' Sorry, your cash transfer was not authorised. ' +\r\n                        '<br>You can check this transaction status OR resend the cash transfer' + '</span>',\r\n                        cancelable: true\r\n                    }).\r\n                    then(function(){$('#app-main-navigator').get(0).resetToPage('main-menu-page.html');});\r\n\r\n                });\r\n            }\r\n\r\n        },\r\n\r\n\r\n        /**\r\n         * method is used to check authorization of a card cash transfer\r\n         * (AUTHORIZATION VIA PIN)\r\n         */\r\n        transferCashCardPinAuthorize: function(){\r\n\r\n            // check if Internet Connection is available before proceeding\r\n            if(navigator.connection.type === Connection.NONE){ // no Internet Connection\r\n                // inform the user that they cannot proceed without Internet\r\n                window.plugins.toast.showWithOptions({\r\n                    message: \"You cannot transfer cash without an active Internet Connection\",\r\n                    duration: 4500,\r\n                    position: \"top\",\r\n                    styling: {\r\n                        opacity: 1,\r\n                        backgroundColor: '#ff0000', //red\r\n                        textColor: '#FFFFFF',\r\n                        textSize: 14\r\n                    }\r\n                }, function(toastEvent){\r\n                    if(toastEvent && toastEvent.event == \"touch\"){ // user tapped the toast, so hide toast immediately\r\n                        window.plugins.toast.hide();\r\n                    }\r\n                });\r\n\r\n                return; // exit method immediately\r\n            }\r\n\r\n            var tokenData = \"\"; // holds the authorisation token\r\n            // display message to user\r\n            $('#loader-modal-message').html(\"Checking Authorization... Please Wait\");\r\n            $('#loader-modal').get(0).show(); // show loader\r\n            // get the authorisation token\r\n            utopiasoftware.saveup.moneyWaveObject.useToken.\r\n            then(function(token){\r\n                tokenData = token; // assign the authorisation token to the variable\r\n\r\n                // initiate the cash transfer request\r\n                return new Promise(function(resolve, reject){\r\n                    var cashTransferAuthoriseRequest = $.ajax(\r\n                        {\r\n                            url: utopiasoftware.saveup.moneyWaveObject.gateway + \"v1/transfer/charge/auth/card\",\r\n                            type: \"post\",\r\n                            contentType: \"application/json\",\r\n                            beforeSend: function(jqxhr) {\r\n                                jqxhr.setRequestHeader(\"Authorization\", token);\r\n                            },\r\n                            dataType: \"json\",\r\n                            timeout: 240000, // wait for 4 minutes before timeout of request\r\n                            processData: false,\r\n                            data: JSON.stringify({transactionRef: window.sessionStorage.getItem(\"transaction_ref\"),\r\n                                otp: $('#transfer-cash-card-otp', '#transfer-cash-card-page').val()})\r\n                        }\r\n                    );\r\n\r\n                    // server responded to cash transfer request\r\n                    cashTransferAuthoriseRequest.done(function(responseData){\r\n                        if(responseData.status === \"success\"){ // the server responded with a successful transfer initiation\r\n                            resolve(responseData); // resolve the cash transfer promise\r\n                        }\r\n                        else { // the server responded unsuccessfully\r\n                            reject(responseData); // reject the cash transfer promise\r\n                        }\r\n                    });\r\n\r\n                    // server responded with a failure to the cash transfer request\r\n                    cashTransferAuthoriseRequest.fail(function(jqxhr){\r\n                        if(jqxhr.status == 500){\r\n                            reject(JSON.parse(jqxhr.responseText.trim()));\r\n                        }\r\n                        else{\r\n                            reject(jqxhr.responseText.trim());\r\n                        }\r\n                    });\r\n                });\r\n            }).\r\n            then(function(responseData){\r\n                if(responseData.data.flutterChargeResponseMessage.toLocaleUpperCase().indexOf(\"APPROVED\") > -1){ // cash transfer was success\r\n                    // update the transaction indicators\r\n                    $('.postcash-pay-progress .col:eq(0) span:eq(0)').\r\n                    removeClass('postcash-pay-progress-milestone-active').addClass('postcash-pay-progress-milestone');\r\n                    $('.postcash-pay-progress .col:eq(0) span:eq(1)').\r\n                    removeClass('postcash-pay-progress-milestone-text-active').addClass('postcash-pay-progress-milestone-text');\r\n\r\n                    $('.postcash-pay-progress .col:eq(1) span:eq(0)').\r\n                    removeClass('postcash-pay-progress-milestone-active').addClass('postcash-pay-progress-milestone');\r\n                    $('.postcash-pay-progress .col:eq(1) span:eq(1)').\r\n                    removeClass('postcash-pay-progress-milestone-text-active').addClass('postcash-pay-progress-milestone-text');\r\n\r\n                    $('.postcash-pay-progress .col:eq(2) span:eq(0)').\r\n                    removeClass('postcash-pay-progress-milestone').addClass('postcash-pay-progress-milestone-active');\r\n                    $('.postcash-pay-progress .col:eq(2) span:eq(1)').\r\n                    removeClass('postcash-pay-progress-milestone-text').addClass('postcash-pay-progress-milestone-text-active');\r\n\r\n                    // hide ALL the bottom-toolbar blocks\r\n                    $('.transfer-cash-card-page-bottom-toolbar-transfer-block').css(\"display\", \"none\");\r\n                    $('.transfer-cash-card-page-bottom-toolbar-authorize-otp-block').css(\"display\", \"none\");\r\n                    $('.transfer-cash-card-page-bottom-toolbar-authorize-pin-block').css(\"display\", \"none\");\r\n\r\n                    return null;\r\n                }\r\n                else{\r\n                    throw responseData; // cash transfer could not be authorised\r\n                }\r\n            }).\r\n            then(function(){\r\n                return utopiasoftware.saveup.transactionHistoryOperations.\r\n                updateTransactionHistory(window.sessionStorage.getItem(\"transaction_ref\"), \"APPROVED\");\r\n            }).\r\n            then(function(){\r\n                // call the method to check if the kinvey library has been initialised\r\n                return new Promise(function(resolve, reject){\r\n                    utopiasoftware.saveup.kinveyBaasOperations.checkKinveyInitialised().\r\n                    then(function(){ // the kinvey Baas library has already been initialised\r\n                        resolve({}); // resolve Promise\r\n                    }, function(){ // kinvey has NOT been initialised, so initialise it\r\n                        resolve(Promise.resolve(utopiasoftware.saveup.kinveyBaasOperations.initialiseKinvey()));\r\n                    })\r\n                });\r\n            }).\r\n            then(function(){\r\n                var transferData = {  // holds the data to be sent to the kinvey business logic (for wallet transfer)\r\n                    authorizationToken: tokenData,\r\n                    postcash_fee: utopiasoftware.saveup.model.fee\r\n                };\r\n\r\n                return utopiasoftware.saveup.kinveyBaasOperations.transferWalletCash(transferData);\r\n            }).\r\n            then(function(){\r\n                // hide loader & move the carousel to the confirmation item\r\n                return Promise.all([$('#loader-modal').get(0).hide(), $('.transfer-cash-card-carousel').get(0).next({animation: 'none'})]);\r\n            }).\r\n            then(function(){\r\n                // show transaction confirmation modal\r\n                return $('#financial-operations-success-modal').get(0).show();\r\n            }).\r\n            then(function(){\r\n                // show the financial operations success modal after 1 second\r\n                window.setTimeout(function(){\r\n                    $('#financial-operations-success-modal .circle').addClass(\"show\");\r\n                }, 1000);\r\n            }).\r\n            catch(function(error){\r\n\r\n                $('#loader-modal').get(0).hide(); // hide loader\r\n\r\n                ons.notification.alert({title: \"Cash Transfer Failed\",\r\n                    messageHTML: '<ons-icon icon=\"md-close-circle-o\" size=\"30px\" ' +\r\n                    'style=\"color: red;\"></ons-icon> <span>' + (error.message || \"\") + ' Sorry, your cash transfer was not authorised. ' +\r\n                    '<br>You can check this transaction status OR resend the cash transfer' + '</span>',\r\n                    cancelable: true\r\n                }).\r\n                then(function(){$('#app-main-navigator').get(0).resetToPage('main-menu-page.html');});\r\n\r\n            });\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the card number autocomplete input is changed\r\n         *\r\n         * @param inputElem\r\n         */\r\n        cardNumberChanged: function(inputElem){\r\n            // display the preloaders that block input so certain card information can be autofilled\r\n            $('.postcash-preloader-transfer-cash-card-form-container', utopiasoftware.saveup.controller.\r\n                transferCashCardPageViewModel.formValidator.$element).css(\"display\", \"block\");\r\n            // split the input value so can can extract just the card number\r\n            var valueSplitArray = $(inputElem).val().split(\" - \");\r\n            //get the card number from the array\r\n            var cardNumber = valueSplitArray.pop();\r\n            // get the financial card object from secure storage using the retrieved card number\r\n            utopiasoftware.saveup.financialCardOperations.getCardByNumber(cardNumber).\r\n            then(function(cardObject){\r\n                // autofill the contents of the cash transfer form (card section) with the contents of card object\r\n                if(! cardObject){ // card object is null\r\n                    throw \"error\";\r\n                }\r\n\r\n                $('#transfer-cash-card-cvv', utopiasoftware.saveup.controller.\r\n                    transferCashCardPageViewModel.formValidator.$element).val(cardObject.cvv);\r\n                $('#transfer-cash-card-expiry-month', utopiasoftware.saveup.controller.\r\n                    transferCashCardPageViewModel.formValidator.$element).val(cardObject.cardExpiryMonth);\r\n                $('#transfer-cash-card-expiry-year', utopiasoftware.saveup.controller.\r\n                    transferCashCardPageViewModel.formValidator.$element).val(cardObject.cardExpiryYear);\r\n                $('#hidden-card-expiry-month-input', utopiasoftware.saveup.controller.\r\n                    transferCashCardPageViewModel.formValidator.$element).val(cardObject.cardExpiryMonth);\r\n                $('#hidden-card-expiry-year-input', utopiasoftware.saveup.controller.\r\n                    transferCashCardPageViewModel.formValidator.$element).val(cardObject.cardExpiryYear);\r\n\r\n                // remove any tooltip being displayed on the transfer cash form\r\n                $('[data-hint]', utopiasoftware.saveup.controller.\r\n                    transferCashCardPageViewModel.formValidator.$element).removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                $('[data-hint]', utopiasoftware.saveup.controller.\r\n                    transferCashCardPageViewModel.formValidator.$element).removeAttr(\"data-hint\");\r\n\r\n                if(cardObject.cardBrand == \"Unknown\" || cardObject.cardLocale == \"Unknown\"){ // card brand/locale is unknown\r\n                    // display the verify card brand/locale checkbox\r\n                    $('.postcash-transfer-cash-card-hidden-info:eq(0)', utopiasoftware.saveup.controller.\r\n                        transferCashCardPageViewModel.formValidator.$element).css(\"display\", \"block\");\r\n                }\r\n                else{ // card brand/locale is known\r\n                    // hide the verify card brand/locale checkbox\r\n                    $('.postcash-transfer-cash-card-hidden-info:eq(0)', utopiasoftware.saveup.controller.\r\n                        transferCashCardPageViewModel.formValidator.$element).css(\"display\", \"none\");\r\n                }\r\n\r\n                if((cardObject.cardBrand == \"Mastercard\" || cardObject.cardBrand == \"Verve\") &&\r\n                    cardObject.cardLocale == \"local\"){ // card is a local mastercard or verve\r\n                    // display the card atm pin input & enable it\r\n                    $('.postcash-transfer-cash-card-hidden-info:eq(1)', utopiasoftware.saveup.controller.\r\n                        transferCashCardPageViewModel.formValidator.$element).css(\"display\", \"block\");\r\n                    $('#transfer-cash-card-pin', utopiasoftware.saveup.controller.\r\n                        transferCashCardPageViewModel.formValidator.$element).removeAttr(\"disabled\");\r\n                }\r\n                else { // card is not a local mastercard or verve\r\n                    // hide the card atm pin input & disable it\r\n                    $('.postcash-transfer-cash-card-hidden-info:eq(1)', utopiasoftware.saveup.controller.\r\n                        transferCashCardPageViewModel.formValidator.$element).css(\"display\", \"none\");\r\n                    $('#transfer-cash-card-pin', utopiasoftware.saveup.controller.\r\n                        transferCashCardPageViewModel.formValidator.$element).attr(\"disabled\", true);\r\n                }\r\n\r\n                // update the display of the updated fields\r\n                Materialize.updateTextFields();\r\n                $('select', utopiasoftware.saveup.controller.\r\n                    transferCashCardPageViewModel.formValidator.$element).material_select();\r\n\r\n                // hide the preloaders that block input, autofill has been completed\r\n                $('.postcash-preloader-transfer-cash-card-form-container', utopiasoftware.saveup.controller.\r\n                    transferCashCardPageViewModel.formValidator.$element).css(\"display\", \"none\");\r\n\r\n            }).\r\n            catch(function(){ // an error occurred OR user entered a card that has not be previously saved\r\n                // display the verify card brand/locale checkbox\r\n                $('.postcash-transfer-cash-card-hidden-info:eq(0)', utopiasoftware.saveup.controller.\r\n                    transferCashCardPageViewModel.formValidator.$element).css(\"display\", \"block\");\r\n                // hide the card atm pin input & disable it\r\n                $('.postcash-transfer-cash-card-hidden-info:eq(1)', utopiasoftware.saveup.controller.\r\n                    transferCashCardPageViewModel.formValidator.$element).css(\"display\", \"none\");\r\n                $('#transfer-cash-card-pin', utopiasoftware.saveup.controller.\r\n                    transferCashCardPageViewModel.formValidator.$element).attr(\"disabled\", true);\r\n\r\n                // update the display of the updated fields\r\n                Materialize.updateTextFields();\r\n                $('select', utopiasoftware.saveup.controller.\r\n                    transferCashCardPageViewModel.formValidator.$element).material_select();\r\n\r\n                // hide the preloaders that block input\r\n                $('.postcash-preloader-transfer-cash-card-form-container', utopiasoftware.saveup.controller.\r\n                    transferCashCardPageViewModel.formValidator.$element).css(\"display\", \"none\");\r\n            });\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when the verify card type checkbox input is clicked\r\n         *\r\n         * @param inputElem\r\n         */\r\n        verifyCardTypeCheckboxClicked: function(inputElem){\r\n            // find out if input checkbox is checked or not\r\n            if($('#transfer-cash-card-verify-card-type', utopiasoftware.saveup.controller.\r\n                    transferCashCardPageViewModel.formValidator.$element).is(':checked')){ // the input was checked\r\n\r\n                // display the card atm pin input & enable it\r\n                $('.postcash-transfer-cash-card-hidden-info:eq(1)', utopiasoftware.saveup.controller.\r\n                    transferCashCardPageViewModel.formValidator.$element).css(\"display\", \"block\");\r\n                $('#transfer-cash-card-pin', utopiasoftware.saveup.controller.\r\n                    transferCashCardPageViewModel.formValidator.$element).removeAttr(\"disabled\");\r\n            }\r\n            else{ // the input was unchecked\r\n\r\n                // hide the card atm pin input & disable it\r\n                $('.postcash-transfer-cash-card-hidden-info:eq(1)', utopiasoftware.saveup.controller.\r\n                    transferCashCardPageViewModel.formValidator.$element).css(\"display\", \"none\");\r\n                $('#transfer-cash-card-pin', utopiasoftware.saveup.controller.\r\n                    transferCashCardPageViewModel.formValidator.$element).attr(\"disabled\", true);\r\n            }\r\n\r\n            // update the display of the updated field\r\n            Materialize.updateTextFields();\r\n        },\r\n\r\n\r\n        /**\r\n         * method is used to listen for scroll event of the page content\r\n         *\r\n         * @param event\r\n         */\r\n        pageContentScrolled: function(event){\r\n\r\n            // set the current scrolltop position\r\n            utopiasoftware.saveup.controller.transferCashCardPageViewModel.currentScrollPosition = $(this).scrollTop();\r\n\r\n            if(utopiasoftware.saveup.controller.transferCashCardPageViewModel.currentScrollPosition >\r\n                utopiasoftware.saveup.controller.transferCashCardPageViewModel.previousScrollPosition){ // user scrolled up\r\n                // set the current position as previous position\r\n                utopiasoftware.saveup.controller.transferCashCardPageViewModel.previousScrollPosition =\r\n                    utopiasoftware.saveup.controller.transferCashCardPageViewModel.currentScrollPosition;\r\n\r\n                // check if the user has scrolled at least 10px up\r\n                if(utopiasoftware.saveup.controller.transferCashCardPageViewModel.currentScrollPosition >= 10){\r\n                    // the user scrolled at least 10px up\r\n                    // check if the tab-bar is visible\r\n                    if($('.transfer-cash-tabbar').last().get(0).visible == true){ // tab-bar is visible\r\n\r\n                        $('.transfer-cash-tabbar').last().get(0).setTabbarVisibility(false); // hide the tab-bar\r\n                    }\r\n                }\r\n\r\n                return;\r\n            }\r\n\r\n            if(utopiasoftware.saveup.controller.transferCashCardPageViewModel.currentScrollPosition <\r\n                utopiasoftware.saveup.controller.transferCashCardPageViewModel.previousScrollPosition){ // user scrolled down\r\n                // set the current position as previous position\r\n                utopiasoftware.saveup.controller.transferCashCardPageViewModel.previousScrollPosition =\r\n                    utopiasoftware.saveup.controller.transferCashCardPageViewModel.currentScrollPosition;\r\n\r\n                // check if the tabbar is hidden\r\n                if($('.transfer-cash-tabbar').last().get(0).visible == false){ // tab-bar is hidden\r\n\r\n                    $('.transfer-cash-tabbar').last().get(0).setTabbarVisibility(true); // show the tab-bar\r\n                }\r\n\r\n                return;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the recipient account number autocomplete input is changed\r\n         *\r\n         * @param inputElem\r\n         */\r\n        recipientAccountNumberChanged: function(inputElem){\r\n            // display the preloaders that block input so certain card information can be autofilled\r\n            $('.postcash-preloader-transfer-cash-card-form-container', utopiasoftware.saveup.controller.\r\n                transferCashCardPageViewModel.formValidator.$element).css(\"display\", \"block\");\r\n            // split the input value so can can extract just the recipient account number\r\n            var valueSplitArray = $(inputElem).val().split(\" - \");\r\n            //get the account number from the array\r\n            var accountNumber = valueSplitArray.pop();\r\n            // get the recipient account object from secure storage using the retrieved account number\r\n            utopiasoftware.saveup.savedRecipientsBankAccountOperations.getSavedRecipientAccountByNumber(accountNumber).\r\n            then(function(acctObject){\r\n                // autofill the contents of the cash transfer form (recipient section) with the contents of recipient account object\r\n                if(! acctObject){ // account object is null\r\n                    throw \"error\";\r\n                }\r\n\r\n                $('#transfer-cash-card-choose-bank', utopiasoftware.saveup.controller.\r\n                    transferCashCardPageViewModel.formValidator.$element).val(acctObject.flutterwave_bankCode);\r\n                $('#hidden-choose-bank-input', utopiasoftware.saveup.controller.\r\n                    transferCashCardPageViewModel.formValidator.$element).val(acctObject.flutterwave_bankCode);\r\n\r\n                // remove any tooltip being displayed on the transfer cash form\r\n                $('[data-hint]', utopiasoftware.saveup.controller.\r\n                    transferCashCardPageViewModel.formValidator.$element).removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                $('[data-hint]', utopiasoftware.saveup.controller.\r\n                    transferCashCardPageViewModel.formValidator.$element).removeAttr(\"data-hint\");\r\n\r\n\r\n                // update the display of the updated fields\r\n                //Materialize.updateTextFields();\r\n                $('select', utopiasoftware.saveup.controller.\r\n                    transferCashCardPageViewModel.formValidator.$element).material_select();\r\n\r\n                // hide the preloaders that block input, autofill has been completed\r\n                $('.postcash-preloader-transfer-cash-card-form-container', utopiasoftware.saveup.controller.\r\n                    transferCashCardPageViewModel.formValidator.$element).css(\"display\", \"none\");\r\n\r\n            }).\r\n            catch(function(){ // an error occurred OR user entered a recipient account that has not been previously saved\r\n\r\n                // update the display of the updated fields\r\n                //Materialize.updateTextFields();\r\n                $('select', utopiasoftware.saveup.controller.\r\n                    transferCashCardPageViewModel.formValidator.$element).material_select();\r\n\r\n                // hide the preloaders that block input\r\n                $('.postcash-preloader-transfer-cash-card-form-container', utopiasoftware.saveup.controller.\r\n                    transferCashCardPageViewModel.formValidator.$element).css(\"display\", \"none\");\r\n            });\r\n        },\r\n\r\n\r\n        transferCashCardAuthorizeProceed: function(){\r\n\r\n            // change the content of the card authorisation iframe\r\n            $('#transfer-cash-card-authorise-iframe').attr(\"src\", \"\");\r\n            $('#transfer-cash-card-authorise-iframe').attr(\"src\", window.sessionStorage.getItem(\"transaction_authurl\"));\r\n            // show the modal that contains the iframe\r\n            $('#transfer-cash-card-authorise-modal').get(0).show();\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * object is view-model for transfer-cash-bank page\r\n     */\r\n    transferCashBankPageViewModel: {\r\n\r\n        /**\r\n         * used to hold the parsley form validation object for the page\r\n         */\r\n        formValidator: null,\r\n\r\n        /**\r\n         * used to hold the parsley field validation object for the 'transfer amount' input\r\n         */\r\n        transferAmountFieldValidator: null,\r\n\r\n        /**\r\n         * property used to keep track of the immediate last scroll position of the\r\n         * page content\r\n         */\r\n        previousScrollPosition: 0,\r\n\r\n        /**\r\n         * property used to keep track of the current scroll position of the\r\n         * page content\r\n         */\r\n        currentScrollPosition: 0,\r\n\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n            // find all onsen-ui input targets and insert a special class to prevent materialize-css from updating the styles\r\n            $('ons-input input', $thisPage).addClass('utopiasoftware-no-style');\r\n            // enable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').attr(\"swipeable\", true);\r\n\r\n            // reset the previous & current scroll positions of the page contents\r\n            utopiasoftware.saveup.controller.transferCashBankPageViewModel.previousScrollPosition = 0;\r\n            utopiasoftware.saveup.controller.transferCashBankPageViewModel.currentScrollPosition = 0;\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            function loadPageOnAppReady(){\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if(!ons.isReady() || utopiasoftware.saveup.model.isAppReady === false){\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n\r\n                // listen for the back button event\r\n                // listen for the back button event\r\n                $('#app-main-navigator').get(0).topPage.onDeviceBackButton = function(){\r\n\r\n                    // check if the side menu is open\r\n                    if($('ons-splitter').get(0).left.isOpen){ // side menu open, so close it\r\n                        $('ons-splitter').get(0).left.close();\r\n                        return; // exit the method\r\n                    }\r\n\r\n                    // check which tab is active and navigate appropriately\r\n                    if($('.transfer-cash-tabbar').get(0).getActiveTabIndex() == 0){ // the first tab is active\r\n                        // navigate to the main menu\r\n                        $('#app-main-navigator').get(0).resetToPage(\"main-menu-page.html\");\r\n                    }\r\n                    else{ // the second tab is active\r\n                        // move the tab view to the Card tab\r\n                        $('.transfer-cash-tabbar').get(0).setActiveTab(0, {animation: \"slide\"});\r\n                    }\r\n\r\n                };\r\n\r\n                // listen for the scroll event of the page carousel content\r\n                $('ons-carousel', $thisPage).on(\"scroll\",\r\n                    utopiasoftware.saveup.controller.transferCashBankPageViewModel.pageContentScrolled);\r\n\r\n                // initialise the form validation objects.\r\n                utopiasoftware.saveup.controller.transferCashBankPageViewModel.transferAmountFieldValidator =\r\n                    $('#transfer-cash-bank-amount', $thisPage).parsley({ // used solely for the transfer-cash-amount input\r\n                        value: function(parsley) {\r\n                            // convert the amount back to a plain text without the thousand separator\r\n                            let parsedNumber = kendo.parseFloat($('#transfer-cash-bank-amount', $thisPage).val());\r\n                            return (parsedNumber ? parsedNumber : $('#transfer-cash-bank-amount', $thisPage).val());\r\n                        }\r\n                    });\r\n\r\n                utopiasoftware.saveup.controller.transferCashBankPageViewModel.formValidator =\r\n                    $('#transfer-cash-bank-form', $thisPage).parsley(); // used for the form in general\r\n\r\n\r\n                // attach listener for the 'transfer cash' card button click\r\n                $('#transfer-cash-bank-button', $thisPage).get(0).onclick = function(){\r\n                    // run the validation method for the transfer-cash-bank form\r\n                    utopiasoftware.saveup.controller.transferCashBankPageViewModel.formValidator.whenValidate();\r\n                };\r\n\r\n                // listen for form field validation failure event\r\n                utopiasoftware.saveup.controller.transferCashBankPageViewModel.formValidator.on('field:error', function(fieldInstance) {\r\n                    // get the element that triggered the field validation error and use it to display tooltip\r\n                    // display tooltip\r\n                    $(fieldInstance.$element).parent().find('label:eq(0)').addClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                    $(fieldInstance.$element).parent().find('label:eq(0)').attr(\"data-hint\", fieldInstance.getErrorsMessages()[0]);\r\n                });\r\n\r\n                // listen for form field validation success event\r\n                utopiasoftware.saveup.controller.transferCashBankPageViewModel.formValidator.on('field:success', function(fieldInstance) {\r\n                    // remove tooltip from element\r\n                    $(fieldInstance.$element).parent().find('label:eq(0)').removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                    $(fieldInstance.$element).parent().find('label:eq(0)').removeAttr(\"data-hint\");\r\n                });\r\n\r\n\r\n                // listen for transfer-cash-Bank form validation success\r\n                utopiasoftware.saveup.controller.transferCashBankPageViewModel.formValidator.on('form:success',\r\n                    utopiasoftware.saveup.controller.transferCashBankPageViewModel.transferCashBankFormValidated);\r\n\r\n                // initialise the sender account autocomplete widget\r\n                utopiasoftware.saveup.bankAccountOperations.loadMyAccountsData().\r\n                then(function(bankAcctArrayData){\r\n                    var autoCompleteData = {}; // holds the data used to initialise the autocomplete widget\r\n                    bankAcctArrayData.forEach(function(arrayElem){ // function to convert each array element to a format for autocomplete\r\n                        autoCompleteData[arrayElem.bankAccountName + \" - \" +  arrayElem.bankAccountNumber] =\r\n                            arrayElem.bankAccountAvatar;\r\n\r\n                    });\r\n                    // intialise widget\r\n                    $('#transfer-cash-bank-sender-account-name.autocomplete', $thisPage).autocomplete({\r\n                        data: autoCompleteData,\r\n                        onAutocomplete: function(val) {\r\n                            // callback function when value is autocompleted\r\n                        },\r\n                        minLength: 1 // The minimum length of the input for the autocomplete to start. Default: 1.\r\n                    });\r\n\r\n                    // call the method to retrieve saved bank account recipient's used to populate recipient autocomplete widget\r\n                    return utopiasoftware.saveup.savedRecipientsBankAccountOperations.loadSavedRecipientsAccountsData();\r\n\r\n                }, function(){return [];}).\r\n                then(function(savedRecipientsArray){\r\n                    var autoCompleteData = {}; // holds the data used to initialise the autocomplete widget\r\n                    savedRecipientsArray.forEach(function(arrayElem){ // function to convert each array element to a format for autocomplete\r\n                        autoCompleteData[arrayElem.bankAccountName + \" - \" +  arrayElem.bankAccountNumber] =\r\n                            arrayElem.bankAccountAvatar;\r\n\r\n                    });\r\n                    // initialise widget\r\n                    $('#transfer-cash-bank-recipient-account-name.autocomplete', $thisPage).autocomplete({\r\n                        data: autoCompleteData,\r\n                        onAutocomplete: function(val) {\r\n                            // Callback function when value is autcompleted.\r\n                        },\r\n                        minLength: 1 // The minimum length of the input for the autocomplete to start. Default: 1.\r\n                    });\r\n                    return Promise.all([utopiasoftware.saveup.filteredSenderBanksData(),\r\n                        utopiasoftware.saveup.sortBanksData()]); // retrieve data for banks\r\n                }, function(){return [[],[]];}).\r\n                then(function(bankArrayData){\r\n                    var optionTags = \"\"; // string to hold all created option tags\r\n\r\n                    // get each object in bank array and use it to create the 'bank' select element\r\n                    for(var index = 0; index < bankArrayData[0].length; index++){\r\n                        var bankObject = bankArrayData[0][index]; // get the bank object\r\n                        // update the banks select element option tags\r\n                        for(var prop in bankObject){\r\n                            optionTags += '<option value=\"' + prop + '\">' + bankObject[prop] + '</option>';\r\n                        }\r\n                    }\r\n\r\n                    $('#transfer-cash-bank-sender-choose-bank', $thisPage).append(optionTags); // append all the created option tags\r\n                    // initialise the 'sender bank' select element\r\n                    $('#transfer-cash-bank-sender-choose-bank', $thisPage).material_select();\r\n                    return bankArrayData; // return at this point, so the page can continue initialisation\r\n                }, function(){return [[],[]];}).\r\n                then(function(bankArrayData){\r\n                    var optionTags = \"\"; // string to hold all created option tags\r\n\r\n                    // get each object in bank array and use it to create the 'bank' select element\r\n                    for(var index = 0; index < bankArrayData[1].length; index++){\r\n                        var bankObject = bankArrayData[1][index]; // get the bank object\r\n                        // update the banks select element option tags\r\n                        for(var prop in bankObject){\r\n                            optionTags += '<option value=\"' + prop + '\">' + bankObject[prop] + '</option>';\r\n                        }\r\n                    }\r\n\r\n                    $('#transfer-cash-bank-recipient-choose-bank', $thisPage).append(optionTags); // append all the created option tags\r\n                    // initialise the 'recipient bank' select element\r\n                    $('#transfer-cash-bank-recipient-choose-bank', $thisPage).material_select();\r\n                    return bankArrayData; // return at this point, so the page can continue initialisation\r\n                }, function(){return null;}).\r\n                then(function(){\r\n                    var pageDataObject = $('#app-main-navigator').get(0).topPage.data; // get the data attached to this page\r\n\r\n                    // check if the data contains recipient account details\r\n                    if(pageDataObject && pageDataObject.recipient_details){ // recipient account details are present\r\n                        // update the form details to contains the received recipient account details\r\n                        $('#transfer-cash-bank-recipient-account-name', $thisPage).\r\n                        val(pageDataObject.recipient_details.recipientAccountName + \" - \" +\r\n                            pageDataObject.recipient_details.recipientAccount);\r\n                        $('#transfer-cash-bank-recipient-choose-bank', $thisPage).\r\n                        val(pageDataObject.recipient_details.recipientBankCode);\r\n                        $('#hidden-choose-recipient-bank-input', $thisPage).\r\n                        val(pageDataObject.recipient_details.recipientBankCode);\r\n                    }\r\n\r\n                    // check if the data contains sender account details\r\n                    if(pageDataObject && pageDataObject.sender_details){\r\n                        // update the form details to contain the received sender account details\r\n                        $('#transfer-cash-bank-sender-account-name', $thisPage).\r\n                        val(pageDataObject.sender_details.senderAccountName + \" - \" +\r\n                            pageDataObject.sender_details.senderAccount);\r\n                        $('#transfer-cash-bank-sender-choose-bank', $thisPage).\r\n                        val(pageDataObject.sender_details.senderBankCode);\r\n                        $('#hidden-choose-sender-bank-input', $thisPage).\r\n                        val(pageDataObject.sender_details.senderBankCode);\r\n                    }\r\n\r\n                    // update the display of all the select element\r\n                    $('select', $thisPage).material_select();\r\n                    Materialize.updateTextFields(); // update the display of text input fields\r\n                    return null; // return null to move to the next step\r\n                }, function(){return null;}).\r\n                then(function(){\r\n                    // remove the progress indeterminate loader\r\n                    $('.progress', $thisPage).remove();\r\n                    // make the transfer-cash-bank form visible\r\n                    $('#transfer-cash-bank-form', $thisPage).css(\"display\", \"block\");\r\n                    // enable the 'Cancel' & 'Transfer' buttons for the transfer-cash-bank form\r\n                    $('#transfer-cash-bank-cancel-button-1, #transfer-cash-bank-button', $thisPage).removeAttr(\"disabled\");\r\n                    // hide the loader\r\n                    $('#loader-modal').get(0).hide();\r\n                }, function(){});\r\n\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: (event) => {\r\n            // enable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').attr(\"swipeable\", true);\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the page is hidden\r\n         * @param event\r\n         */\r\n        pageHide: (event) => {\r\n            var $thisPage = $(event.target); // get the current page shown\r\n            try {\r\n                // remove any tooltip being displayed on all forms on the page\r\n                $('[data-hint]', $thisPage).removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                $('[data-hint]', $thisPage).removeAttr(\"data-hint\");\r\n                // reset the transfer-cash-bank form validator object on the page\r\n                utopiasoftware.saveup.controller.transferCashBankPageViewModel.transferAmountFieldValidator.reset();\r\n                utopiasoftware.saveup.controller.transferCashBankPageViewModel.formValidator.reset();\r\n            }\r\n            catch(err){}\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the page is destroyed\r\n         * @param event\r\n         */\r\n        pageDestroy: (event) => {\r\n            var $thisPage = $(event.target); // get the current page shown\r\n            try{\r\n                // remove any tooltip being displayed on all forms on the page\r\n                $('[data-hint]', $thisPage).removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                $('[data-hint]', $thisPage).removeAttr(\"data-hint\");\r\n                // destroy the form validator objects on the page\r\n                utopiasoftware.saveup.controller.transferCashBankPageViewModel.transferAmountFieldValidator.reset();\r\n                utopiasoftware.saveup.controller.transferCashBankPageViewModel.formValidator.destroy();\r\n                // destroy the form inputs which need to be destroyed\r\n                $('select', $thisPage).material_select('destroy');\r\n                $('input.autocomplete', $thisPage).off();\r\n                $('input.autocomplete', $thisPage).removeData();\r\n            }\r\n            catch(err){}\r\n        },\r\n\r\n        /**\r\n         * method is triggered when transfer-cash-bank form is successfully validated\r\n         */\r\n        transferCashBankFormValidated: function(){\r\n\r\n            // check if Internet Connection is available before proceeding\r\n            if(navigator.connection.type === Connection.NONE){ // no Internet Connection\r\n                // inform the user that they cannot proceed without Internet\r\n                window.plugins.toast.showWithOptions({\r\n                    message: \"You cannot transfer cash without an active Internet Connection\",\r\n                    duration: 4500,\r\n                    position: \"top\",\r\n                    styling: {\r\n                        opacity: 1,\r\n                        backgroundColor: '#ff0000', //red\r\n                        textColor: '#FFFFFF',\r\n                        textSize: 14\r\n                    }\r\n                }, function(toastEvent){\r\n                    if(toastEvent && toastEvent.event == \"touch\"){ // user tapped the toast, so hide toast immediately\r\n                        window.plugins.toast.hide();\r\n                    }\r\n                });\r\n\r\n                return; // exit method immediately\r\n            }\r\n\r\n            // confirm transfer-cash-card operation\r\n            ons.notification.confirm({title: '<ons-icon icon=\"md-alert-triangle\" size=\"36px\" ' +\r\n            'style=\"color: orange;\"></ons-icon> Confirm Transfer',\r\n                messageHTML: '<span>Cash transfers cannot be undone or reversed when completed. <br>' +\r\n                'To securely complete cash transfers your banking authorization is required.<br>' +\r\n                'Do you want to continue?</span>',\r\n                cancelable: false,\r\n                buttonLabels: [\"No\", \"Yes\"]\r\n            }).\r\n            then(function(buttonIndex){\r\n                if(buttonIndex === 1){ // user wants to continue transfer\r\n                    // display message to user\r\n                    $('#loader-modal-message').html(\"Initiating Transfer...\");\r\n                    $('#loader-modal').get(0).show(); // show loader\r\n                    // retrieve the necessary authorisation token\r\n                    return utopiasoftware.saveup.moneyWaveObject.useToken;\r\n                }\r\n                else{ // user terminated transfer\r\n                    throw null;\r\n                }\r\n            }).\r\n            then(function(token){\r\n\r\n                if(token === null){ // user already terminated transfer\r\n                    throw null;\r\n                }\r\n                else{ // use retrieved token to initiate transfer\r\n\r\n                    //create the cash transfer data\r\n                    var cashTransferData = {\r\n                        firstname: utopiasoftware.saveup.model.appUserDetails.firstName.split(\" \")[0],\r\n                        lastname: utopiasoftware.saveup.model.appUserDetails.lastName.split(\" \")[0],\r\n                        phonenumber: utopiasoftware.saveup.model.appUserDetails.phoneNumber_intlFormat,\r\n                        email: (utopiasoftware.saveup.model.appUserDetails.firstName.split(\" \")[0] +\r\n                        utopiasoftware.saveup.model.appUserDetails.lastName.split(\" \")[0]) + Date.now() + \"@mymail.com\",\r\n                        apiKey: utopiasoftware.saveup.moneyWaveObject.key.apiKey,\r\n                        medium: \"mobile\",\r\n                        recipient: \"wallet\",\r\n                        fee: utopiasoftware.saveup.model.fee + 45.00,\r\n                        amount: kendo.parseFloat($('#transfer-cash-bank-amount', '#transfer-cash-bank-page').val())\r\n\r\n                    };\r\n                    // check if user want to transfer using any of the approve banks (apart from access bank)\r\n                    if($('#transfer-cash-bank-sender-choose-bank', '#transfer-cash-bank-form').val() != \"044\"){\r\n                        // user wants to transfer uding other banks NOT access bank\r\n                        cashTransferData.charge_with = \"ext_account\";\r\n                        cashTransferData.charge_auth = \"INTERNETBANKING\";\r\n                        cashTransferData.sender_bank  =\r\n                            $('#transfer-cash-bank-sender-choose-bank', '#transfer-cash-bank-form').val();\r\n                        cashTransferData.redirecturl = \"https://postcash.000webhostapp.com/transfer-cash-bank.html\";\r\n                    }\r\n\r\n                    // initiate the cash transfer request\r\n                    return new Promise(function(resolve, reject){\r\n                        var cashTransferRequest = $.ajax(\r\n                            {\r\n                                url: utopiasoftware.saveup.moneyWaveObject.gateway + \"v1/transfer\",\r\n                                type: \"post\",\r\n                                contentType: \"application/json\",\r\n                                beforeSend: function(jqxhr) {\r\n                                    jqxhr.setRequestHeader(\"Authorization\", token);\r\n                                },\r\n                                dataType: \"json\",\r\n                                timeout: 240000, // wait for 4 minutes before timeout of request\r\n                                processData: false,\r\n                                data: JSON.stringify(cashTransferData)\r\n                            }\r\n                        );\r\n\r\n                        // server responded to cash transfer request\r\n                        cashTransferRequest.done(function(responseData){\r\n                            if(responseData.status === \"success\"){ // the server responded with a successful transfer initiation\r\n                                resolve(responseData); // resolve the cash transfer promise\r\n                            }\r\n                            else { // the server responded unsuccessfully\r\n                                reject(responseData); // reject the cash transfer promise\r\n                            }\r\n                        });\r\n\r\n                        // server responded with a failure to the cash transfer request\r\n                        cashTransferRequest.fail(function(jqxhr){\r\n                            if(jqxhr.status == 500){\r\n                                reject(JSON.parse(jqxhr.responseText.trim()));\r\n                            }\r\n                            else{\r\n                                reject(jqxhr.responseText.trim());\r\n                            }\r\n                        });\r\n                    });\r\n                }\r\n            }).\r\n            then(function(responseData){ // securely store the transaction history from the responseData on the user's device\r\n                responseData.data.transfer.postcash_transaction_type = \"Cash Transfer (Bank)\"; // set the postcash transaction type\r\n                return Promise.all([utopiasoftware.saveup.transactionHistoryOperations.\r\n                addTransactionHistory(responseData.data.transfer), Promise.resolve(responseData)]);\r\n            }).\r\n            then(function(responseDataArray){\r\n                if(responseDataArray == null || responseDataArray[1] == null){ // user already terminated transfer\r\n                    throw null;\r\n                }\r\n\r\n                var responseData = responseDataArray[1]; // retrieve the response from the server\r\n\r\n                // update the display info for the bank transaction\r\n\r\n                $('#transfer-cash-bank-authorize-amount', '#transfer-cash-bank-page').\r\n                html(kendo.toString(kendo.parseFloat(responseData.data.transfer.amountToSend), \"n2\"));\r\n                $('#transfer-cash-bank-authorize-fee', '#transfer-cash-bank-page').\r\n                html(kendo.toString(kendo.parseFloat(responseData.data.transfer.chargedFee), \"n2\"));\r\n                $('#transfer-cash-bank-authorize-total', '#transfer-cash-bank-page').\r\n                html(kendo.toString(kendo.parseFloat(responseData.data.transfer.amountToCharge), \"n2\"));\r\n                $('#transfer-cash-bank-authorize-message', '#transfer-cash-bank-page').\r\n                html(responseData.data.transfer.flutterChargeResponseMessage);\r\n\r\n                // store the transaction id & transaction reference in the session storage\r\n                window.sessionStorage.setItem(\"transaction_id\", responseData.data.transfer.id);\r\n                window.sessionStorage.setItem(\"transaction_ref\", responseData.data.transfer.flutterChargeReference);\r\n                window.sessionStorage.setItem(\"transaction_authurl\", responseData.data.authurl || \"\");\r\n\r\n                // hide the transfer bottom-toolbar\r\n                $('.transfer-cash-bank-page-bottom-toolbar-transfer-block').css(\"display\", \"none\");\r\n\r\n                // check whether to display the authorisation form OR inapp browser window\r\n                if($('#transfer-cash-bank-sender-choose-bank', '#transfer-cash-bank-form').val() != \"044\"){ // NOT access bank\r\n\r\n                    // hide the authorization form\r\n                    $('#transfer-cash-bank-authorise-form', '#transfer-cash-bank-page').css(\"display\", \"none\");\r\n                    // disable the 'Authorize' button, show the bank authorise bottom toolbar & hide the pin authorise bottom toolbar\r\n                    $('#transfer-cash-bank-authorise-button').attr(\"disabled\", true);\r\n                    $('.transfer-cash-bank-page-bottom-toolbar-authorize-bank-block').css(\"display\", \"block\");\r\n                    $('.transfer-cash-bank-page-bottom-toolbar-authorize-pin-block').css(\"display\", \"none\");\r\n                }\r\n                else{ // display the authorization form\r\n                    /*\r\n                    $('#transfer-cash-card-authorise-form', '#transfer-cash-card-page').css(\"display\", \"block\");\r\n                    //  hide the authorization iframe\r\n                    $('#transfer-cash-card-authorise-iframe', '#transfer-cash-card-page').css(\"display\", \"none\");\r\n                    // enable the 'Authorize' button, hide the otp authorise bottom toolbar & show the pin authorise bottom toolbar\r\n                    $('#transfer-cash-card-authorise-button').removeAttr(\"disabled\");\r\n                    $('.transfer-cash-card-page-bottom-toolbar-authorize-otp-block').css(\"display\", \"none\");\r\n                    $('.transfer-cash-card-page-bottom-toolbar-authorize-pin-block').css(\"display\", \"block\");\r\n                    */\r\n                }\r\n\r\n                // update the transaction indicators\r\n                $('.postcash-pay-progress .col:eq(0) span:eq(0)').\r\n                removeClass('postcash-pay-progress-milestone-active').addClass('postcash-pay-progress-milestone');\r\n                $('.postcash-pay-progress .col:eq(0) span:eq(1)').\r\n                removeClass('postcash-pay-progress-milestone-text-active').addClass('postcash-pay-progress-milestone-text');\r\n\r\n                $('.postcash-pay-progress .col:eq(1) span:eq(0)').\r\n                removeClass('postcash-pay-progress-milestone').addClass('postcash-pay-progress-milestone-active');\r\n                $('.postcash-pay-progress .col:eq(1) span:eq(1)').\r\n                removeClass('postcash-pay-progress-milestone-text').addClass('postcash-pay-progress-milestone-text-active');\r\n\r\n                // transition to 'authorize' block\r\n                return $('.transfer-cash-bank-carousel').get(0).next({animation: 'none'});\r\n            }).\r\n            then(function(object){\r\n                if(object == null){ // user already terminated transfer\r\n                    throw null;\r\n                }\r\n\r\n                $('#loader-modal').get(0).hide(); // hide loader\r\n            }).\r\n            catch(function(error){\r\n\r\n                $('#loader-modal').get(0).hide(); // hide loader\r\n                if(error == null){ // the user decided NOT to proceed with the transfer\r\n                    return; // do nothing\r\n                }\r\n\r\n                ons.notification.alert({title: \"Cash Transfer Failed\",\r\n                    messageHTML: '<ons-icon icon=\"md-close-circle-o\" size=\"30px\" ' +\r\n                    'style=\"color: red;\"></ons-icon> <span>' + (error.data || \"\") + ' Sorry, your cash transfer failed. ' +\r\n                    '<br>You can try again' + '</span>',\r\n                    cancelable: true\r\n                });\r\n\r\n            });\r\n\r\n        },\r\n\r\n\r\n        /**\r\n         * method is used to check authorization of a bank cash transfer.\r\n         * The transfer is thereafter completed on the app's remote business logic container\r\n         *\r\n         */\r\n        transferCashBankRemoteAuthorize: function(authorizationStage, authorizationResponseData){\r\n\r\n            var secureToken = null; // holds the secure transaction token\r\n\r\n            // check if user has completed stage 1 of transfer authorisation\r\n            if(authorizationStage == \"stage 1\"){ // user completed stage 1 of transfer authorisation\r\n                // display message to user\r\n                $('#loader-modal-message').html(\"Checking Authorization... Please Wait\");\r\n                $('#loader-modal').get(0).show(); // show loader\r\n                // hide the transfer-cash-authorise modal, but let the iframe continue authorisation process\r\n                $('#transfer-cash-bank-authorise-modal').get(0).hide();\r\n                // get the authorisation token\r\n                utopiasoftware.saveup.moneyWaveObject.useToken.\r\n                then(function(token){\r\n                    secureToken = token; // assign the retrieved authorization token\r\n\r\n                    // initiate the cash transfer authorisation check\r\n                    return new Promise(function(resolve, reject){\r\n                        var cashTransferAuthorisation = $.ajax(\r\n                            {\r\n                                url: utopiasoftware.saveup.moneyWaveObject.gateway + \"v1/transfer/\" +\r\n                                window.sessionStorage.getItem(\"transaction_id\"),\r\n                                type: \"post\",\r\n                                contentType: \"application/json\",\r\n                                beforeSend: function(jqxhr) {\r\n                                    jqxhr.setRequestHeader(\"Authorization\", token);\r\n                                },\r\n                                dataType: \"json\",\r\n                                timeout: 240000, // wait for 4 minutes before timeout of request\r\n                                processData: false,\r\n                                data: JSON.stringify({})\r\n                            }\r\n                        );\r\n\r\n                        // server responded to cash transfer authorisation check\r\n                        cashTransferAuthorisation.done(function(responseData){\r\n                            if(responseData.status === \"success\" &&\r\n                                (responseData.data.flutterChargeResponseMessage.toLocaleUpperCase().indexOf(\"APPROVED\") > -1\r\n                            || responseData.data.flutterChargeResponseMessage.toLocaleUpperCase().indexOf(\"SUCCESSFUL\") > -1)){ // the server responded with a successful transfer authorisation\r\n\r\n                                resolve(responseData); // resolve the cash transfer authorisation promise\r\n                            }\r\n                            else { // the server responded unsuccessfully\r\n                                reject(responseData); // reject the cash transfer authorisation promise\r\n                            }\r\n                        });\r\n\r\n                        // server responded with a failure to the cash authorisation check\r\n                        cashTransferAuthorisation.fail(function(jqxhr){\r\n                            reject(JSON.parse(jqxhr.responseText.trim()));\r\n                        });\r\n                    });\r\n                }).\r\n                then(function(responseData){ // send the server data to the postcash business logic container\r\n                    // create the data to be sent to the postcash business logic container\r\n                    var transferData = {\r\n                        transferData: responseData.data,\r\n                        authorizationToken: secureToken,\r\n                        postcash_fee: utopiasoftware.saveup.model.fee,\r\n                        postcash_transferDetails: {\r\n                            narration: $('#transfer-cash-bank-narration', '#transfer-cash-bank-page').val(),\r\n                            sender_bank: $('#transfer-cash-bank-sender-choose-bank', '#transfer-cash-bank-page').val(),\r\n                            sender_account_number:\r\n                             $('#transfer-cash-bank-sender-account-name', '#transfer-cash-bank-page').val().split(\" - \").pop(),\r\n                            recipient_bank: $('#transfer-cash-bank-recipient-choose-bank', '#transfer-cash-bank-page').val(),\r\n                            recipient_account_number:\r\n                             $('#transfer-cash-bank-recipient-account-name', '#transfer-cash-bank-page').val().split(\" - \").pop()\r\n                        }\r\n                    };\r\n\r\n                    // post the transfer details to the transfer authorization iframe for stage 2 processing\r\n                    $('#transfer-cash-bank-authorise-modal #transfer-cash-bank-authorise-iframe').get(0).\r\n                        contentWindow.postMessage(JSON.stringify(transferData), \"https://postcash.000webhostapp.com\");\r\n                }).\r\n                catch(function(error){\r\n                    // update the transaction history for the cash transfer (bank) transaction to mark failure\r\n                    utopiasoftware.saveup.transactionHistoryOperations.\r\n                    updateTransactionHistoryData(window.sessionStorage.getItem(\"transaction_ref\"), error).\r\n                    then(function(){\r\n                        return $('#loader-modal').get(0).hide(); // hide loader\r\n                    }).\r\n                    then(function(){\r\n\r\n                       return ons.notification.alert({title: \"Cash Transfer Failed\",\r\n                           messageHTML: '<ons-icon icon=\"md-close-circle-o\" size=\"30px\" ' +\r\n                           'style=\"color: red;\"></ons-icon> <span>' + (error.message || \"\") + ' Sorry, your cash transfer was not authorised. ' +\r\n                           '<br>You can check this transaction status OR resend the cash transfer' + '</span>',\r\n                           cancelable: true\r\n                       });\r\n                    }).\r\n                    then(function(){\r\n                        $('#app-main-navigator').get(0).resetToPage('main-menu-page.html');\r\n                    }).catch(function(){\r\n                        $('#loader-modal').get(0).hide();\r\n                    });\r\n\r\n                });\r\n            }\r\n\r\n            // check if user has completed stage 2 of transfer authorisation\r\n            if(authorizationStage == \"stage 2\"){ // user has completed stage 2 of transfer authorisation\r\n                // display message to user\r\n                $('#loader-modal-message').html(\"Checking Authorization... Please Wait\");\r\n                $('#loader-modal').get(0).show(); // show loader\r\n\r\n                Promise.resolve(authorizationResponseData).\r\n                then(function(authorizationResponseData){ // process the response gotten from the authorization iframe\r\n                    // check that the transfer was completed successfully\r\n                    if(authorizationResponseData.walletToWallet.status == \"success\" &&\r\n                        authorizationResponseData.walletToWallet.data.toLocaleUpperCase().indexOf(\"SUCCESSFUL\") > -1 &&\r\n                        authorizationResponseData.walletToAccount.status == \"success\" &&\r\n                        authorizationResponseData.walletToAccount.data.data.responsemessage.toLocaleUpperCase().indexOf(\"SUCCESSFUL\") > -1\r\n                    ){\r\n                        // cash transfer was successful\r\n                        // update the transaction indicators\r\n                        $('.postcash-pay-progress .col:eq(0) span:eq(0)').\r\n                        removeClass('postcash-pay-progress-milestone-active').addClass('postcash-pay-progress-milestone');\r\n                        $('.postcash-pay-progress .col:eq(0) span:eq(1)').\r\n                        removeClass('postcash-pay-progress-milestone-text-active').addClass('postcash-pay-progress-milestone-text');\r\n\r\n                        $('.postcash-pay-progress .col:eq(1) span:eq(0)').\r\n                        removeClass('postcash-pay-progress-milestone-active').addClass('postcash-pay-progress-milestone');\r\n                        $('.postcash-pay-progress .col:eq(1) span:eq(1)').\r\n                        removeClass('postcash-pay-progress-milestone-text-active').addClass('postcash-pay-progress-milestone-text');\r\n\r\n                        $('.postcash-pay-progress .col:eq(2) span:eq(0)').\r\n                        removeClass('postcash-pay-progress-milestone').addClass('postcash-pay-progress-milestone-active');\r\n                        $('.postcash-pay-progress .col:eq(2) span:eq(1)').\r\n                        removeClass('postcash-pay-progress-milestone-text').addClass('postcash-pay-progress-milestone-text-active');\r\n\r\n                        // hide ALL the bottom-toolbar blocks\r\n                        $('.transfer-cash-bank-page-bottom-toolbar-transfer-block').css(\"display\", \"none\");\r\n                        $('.transfer-cash-bank-page-bottom-toolbar-authorize-bank-block').css(\"display\", \"none\");\r\n                        $('.transfer-cash-bank-page-bottom-toolbar-authorize-pin-block').css(\"display\", \"none\");\r\n\r\n                        // pass response data for onward processing, hide loader & move to the confirmation item on the carousel\r\n                        return Promise.\r\n                        all([authorizationResponseData, $('#loader-modal').get(0).hide(), $('.transfer-cash-bank-carousel').get(0).next({animation: 'none'})]);\r\n                    }\r\n                    else{\r\n                        throw authorizationResponseData; // cash transfer could not be authorised\r\n                    }\r\n                }).\r\n                then(function(dataArray){ // holds the business logic response\r\n\r\n                    // update the transaction history for the cash transfer (bank) transaction to mark success\r\n                    return utopiasoftware.saveup.transactionHistoryOperations.\r\n                    updateTransactionHistoryData(window.sessionStorage.getItem(\"transaction_ref\"), dataArray[0]);\r\n                }).\r\n                then(function(){\r\n                    // show transaction confirmation modal\r\n                    return $('#financial-operations-success-modal').get(0).show();\r\n                }).\r\n                then(function(){\r\n                    // show the financial operations success modal after 1 second\r\n                    window.setTimeout(function(){\r\n                        $('#financial-operations-success-modal .circle').addClass(\"show\");\r\n                    }, 1000);\r\n                }).\r\n                catch(function(error){\r\n                    // update the transaction history for the cash transfer (bank) transaction to mark failure\r\n                    utopiasoftware.saveup.transactionHistoryOperations.\r\n                    updateTransactionHistoryData(window.sessionStorage.getItem(\"transaction_ref\"), error).\r\n                    then(function(){\r\n                        return $('#loader-modal').get(0).hide(); // hide loader\r\n                    }).\r\n                    then(function(){\r\n\r\n                        return ons.notification.alert({title: \"Cash Transfer Failed\",\r\n                            messageHTML: '<ons-icon icon=\"md-close-circle-o\" size=\"30px\" ' +\r\n                            'style=\"color: red;\"></ons-icon> <span>' + (error.message || \"\") + ' Sorry, your cash transfer was not authorised. ' +\r\n                            '<br>You can check this transaction status OR resend the cash transfer' + '</span>',\r\n                            cancelable: true\r\n                        });\r\n                    }).\r\n                    then(function(){\r\n                        $('#app-main-navigator').get(0).resetToPage('main-menu-page.html');\r\n                    }).catch(function(){\r\n                        $('#loader-modal').get(0).hide();\r\n                    });\r\n\r\n                });\r\n\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is used to trigger the initiation of the Authorization process of\r\n         * cash transfer with Bank Account\r\n         */\r\n        transferCashBankAuthorizeProceed: function(){\r\n\r\n            // change the content of the bank authorisation iframe\r\n            $('#transfer-cash-bank-authorise-iframe').attr(\"src\", \"\");\r\n            $('#transfer-cash-bank-authorise-iframe').attr(\"src\", window.sessionStorage.getItem(\"transaction_authurl\"));\r\n            // show the modal that contains the modal\r\n            $('#transfer-cash-bank-authorise-modal').get(0).show();\r\n        },\r\n\r\n\r\n        /**\r\n         * method is used to listen for scroll event of the page content\r\n         *\r\n         * @param event\r\n         */\r\n        pageContentScrolled: function(event){\r\n\r\n            // set the current scrolltop position\r\n            utopiasoftware.saveup.controller.transferCashBankPageViewModel.currentScrollPosition = $(this).scrollTop();\r\n\r\n            if(utopiasoftware.saveup.controller.transferCashBankPageViewModel.currentScrollPosition >\r\n                utopiasoftware.saveup.controller.transferCashBankPageViewModel.previousScrollPosition){ // user scrolled up\r\n                // set the current position as previous position\r\n                utopiasoftware.saveup.controller.transferCashBankPageViewModel.previousScrollPosition =\r\n                    utopiasoftware.saveup.controller.transferCashBankPageViewModel.currentScrollPosition;\r\n\r\n                // check if the user has scrolled at least 10px up\r\n                if(utopiasoftware.saveup.controller.transferCashBankPageViewModel.currentScrollPosition >= 10){\r\n                    // the user scrolled at least 10px up\r\n                    // check if the tab-bar is visible\r\n                    if($('.transfer-cash-tabbar').last().get(0).visible == true){ // tab-bar is visible\r\n\r\n                        $('.transfer-cash-tabbar').last().get(0).setTabbarVisibility(false); // hide the tab-bar\r\n                    }\r\n                }\r\n\r\n                return;\r\n            }\r\n\r\n            if(utopiasoftware.saveup.controller.transferCashBankPageViewModel.currentScrollPosition <\r\n                utopiasoftware.saveup.controller.transferCashBankPageViewModel.previousScrollPosition){ // user scrolled down\r\n                // set the current position as previous position\r\n                utopiasoftware.saveup.controller.transferCashBankPageViewModel.previousScrollPosition =\r\n                    utopiasoftware.saveup.controller.transferCashBankPageViewModel.currentScrollPosition;\r\n\r\n                // check if the tabbar is hidden\r\n                if($('.transfer-cash-tabbar').last().get(0).visible == false){ // tab-bar is hidden\r\n\r\n                    $('.transfer-cash-tabbar').last().get(0).setTabbarVisibility(true); // show the tab-bar\r\n                }\r\n\r\n                return;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the sender account number autocomplete input is changed\r\n         *\r\n         * @param inputElem\r\n         */\r\n        senderAccountNumberChanged: function(inputElem){\r\n            // display the preloaders that block input so certain account information can be autofilled\r\n            $('.postcash-preloader-transfer-cash-bank-form-container', utopiasoftware.saveup.controller.\r\n                transferCashBankPageViewModel.formValidator.$element).css(\"display\", \"block\");\r\n            // split the input value so can can extract just the recipient account number\r\n            var valueSplitArray = $(inputElem).val().split(\" - \");\r\n            //get the account number from the array\r\n            var accountNumber = valueSplitArray.pop();\r\n            // get the user account object from secure storage using the retrieved account number\r\n            utopiasoftware.saveup.bankAccountOperations.getMyAccountByNumber(accountNumber).\r\n            then(function(acctObject){\r\n                // autofill the contents of the cash transfer form (sender section) with the contents of sender account object\r\n                if(! acctObject){ // account object is null\r\n                    throw \"error\";\r\n                }\r\n\r\n                $('#transfer-cash-bank-sender-choose-bank', utopiasoftware.saveup.controller.\r\n                    transferCashBankPageViewModel.formValidator.$element).val(acctObject.flutterwave_bankCode);\r\n                $('#hidden-choose-sender-bank-input', utopiasoftware.saveup.controller.\r\n                    transferCashBankPageViewModel.formValidator.$element).val(acctObject.flutterwave_bankCode);\r\n\r\n                // remove any tooltip being displayed on the transfer cash form\r\n                $('[data-hint]', utopiasoftware.saveup.controller.\r\n                    transferCashBankPageViewModel.formValidator.$element).removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                $('[data-hint]', utopiasoftware.saveup.controller.\r\n                    transferCashBankPageViewModel.formValidator.$element).removeAttr(\"data-hint\");\r\n\r\n\r\n                // update the display of the updated fields\r\n                //Materialize.updateTextFields();\r\n                $('select', utopiasoftware.saveup.controller.\r\n                    transferCashBankPageViewModel.formValidator.$element).material_select();\r\n\r\n                // hide the preloaders that block input, autofill has been completed\r\n                $('.postcash-preloader-transfer-cash-bank-form-container', utopiasoftware.saveup.controller.\r\n                    transferCashBankPageViewModel.formValidator.$element).css(\"display\", \"none\");\r\n\r\n            }).\r\n            catch(function(){ // an error occurred OR user entered a recipient account that has not been previously saved\r\n\r\n                // update the display of the updated fields\r\n                //Materialize.updateTextFields();\r\n                $('select', utopiasoftware.saveup.controller.\r\n                    transferCashBankPageViewModel.formValidator.$element).material_select();\r\n\r\n                // hide the preloaders that block input\r\n                $('.postcash-preloader-transfer-cash-bank-form-container', utopiasoftware.saveup.controller.\r\n                    transferCashBankPageViewModel.formValidator.$element).css(\"display\", \"none\");\r\n            });\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the recipient account number autocomplete input is changed\r\n         *\r\n         * @param inputElem\r\n         */\r\n        recipientAccountNumberChanged: function(inputElem){\r\n            // display the preloaders that block input so certain account information can be autofilled\r\n            $('.postcash-preloader-transfer-cash-bank-form-container', utopiasoftware.saveup.controller.\r\n                transferCashBankPageViewModel.formValidator.$element).css(\"display\", \"block\");\r\n            // split the input value so can can extract just the recipient account number\r\n            var valueSplitArray = $(inputElem).val().split(\" - \");\r\n            //get the account number from the array\r\n            var accountNumber = valueSplitArray.pop();\r\n            // get the recipient account object from secure storage using the retrieved account number\r\n            utopiasoftware.saveup.savedRecipientsBankAccountOperations.getSavedRecipientAccountByNumber(accountNumber).\r\n            then(function(acctObject){\r\n                // autofill the contents of the cash transfer form (recipient section) with the contents of recipient account object\r\n                if(! acctObject){ // account object is null\r\n                    throw \"error\";\r\n                }\r\n\r\n                $('#transfer-cash-bank-recipient-choose-bank', utopiasoftware.saveup.controller.\r\n                    transferCashBankPageViewModel.formValidator.$element).val(acctObject.flutterwave_bankCode);\r\n                $('#hidden-choose-recipient-bank-input', utopiasoftware.saveup.controller.\r\n                    transferCashBankPageViewModel.formValidator.$element).val(acctObject.flutterwave_bankCode);\r\n\r\n                // remove any tooltip being displayed on the transfer cash form\r\n                $('[data-hint]', utopiasoftware.saveup.controller.\r\n                    transferCashBankPageViewModel.formValidator.$element).removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                $('[data-hint]', utopiasoftware.saveup.controller.\r\n                    transferCashBankPageViewModel.formValidator.$element).removeAttr(\"data-hint\");\r\n\r\n\r\n                // update the display of the updated fields\r\n                //Materialize.updateTextFields();\r\n                $('select', utopiasoftware.saveup.controller.\r\n                    transferCashBankPageViewModel.formValidator.$element).material_select();\r\n\r\n                // hide the preloaders that block input, autofill has been completed\r\n                $('.postcash-preloader-transfer-cash-bank-form-container', utopiasoftware.saveup.controller.\r\n                    transferCashBankPageViewModel.formValidator.$element).css(\"display\", \"none\");\r\n\r\n            }).\r\n            catch(function(){ // an error occurred OR user entered a recipient account that has not been previously saved\r\n\r\n                // update the display of the updated fields\r\n                //Materialize.updateTextFields();\r\n                $('select', utopiasoftware.saveup.controller.\r\n                    transferCashBankPageViewModel.formValidator.$element).material_select();\r\n\r\n                // hide the preloaders that block input\r\n                $('.postcash-preloader-transfer-cash-bank-form-container', utopiasoftware.saveup.controller.\r\n                    transferCashBankPageViewModel.formValidator.$element).css(\"display\", \"none\");\r\n            });\r\n        }\r\n\r\n    },\r\n\r\n\r\n    /**\r\n     * object is view-model for onboarding page\r\n     */\r\n    onboardingPageViewModel: { //todo\r\n\r\n        /**\r\n         * method is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n            // disable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').removeAttr(\"swipeable\");\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            function loadPageOnAppReady(){\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if(!ons.isReady() || utopiasoftware.saveup.model.isAppReady === false){\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // if the onboarding-navigator is active\r\n                if($('#onboarding-navigator').get(0) && $('#onboarding-navigator').get(0).topPage){\r\n                    // set the flag to inform the app NOT to display Security Lock Modal\r\n                    $('#onboarding-navigator').get(0).topPage.alwaysShowSecurityLockModal = false;\r\n                    // listen for the back button event\r\n                    $('#onboarding-navigator').get(0).topPage.onDeviceBackButton = function(){\r\n                        ons.notification.confirm('Do you want to close the app?', {title: 'Exit',\r\n                                buttonLabels: ['No', 'Yes']}) // Ask for confirmation\r\n                            .then(function(index) {\r\n                                if (index === 1) { // OK button\r\n                                    navigator.app.exitApp(); // Close the app\r\n                                }\r\n                            });\r\n                    };\r\n                }\r\n\r\n                // if the app-main-navigator is active\r\n                if($('#app-main-navigator').get(0) && $('#app-main-navigator').get(0).topPage){\r\n                    // set the flag to inform the app NOT to display Security Lock Modal\r\n                    $('#app-main-navigator').get(0).topPage.alwaysShowSecurityLockModal = false;//todo\r\n                    // listen for the back button event\r\n                    $('#app-main-navigator').get(0).topPage.onDeviceBackButton = function(){\r\n                        // check if the side menu is open\r\n                        if($('ons-splitter').get(0).left.isOpen){ // side menu open, so close it\r\n                            $('ons-splitter').get(0).left.close();\r\n                            return; // exit the method\r\n                        }\r\n\r\n                        $('#app-main-navigator').get(0).resetToPage(\"main-menu-page.html\");\r\n                    };\r\n                }\r\n\r\n\r\n                // initialise carousel\r\n                $('#onboarding-carousel', $thisPage).carousel({dist: 0, fullWidth: true, indicators: true, noWrap: true});\r\n                // hide the loader\r\n                $('#loader-modal').get(0).hide();\r\n\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: function(){\r\n            // disable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').removeAttr(\"swipeable\");\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is destroyed\r\n         */\r\n        pageDestroy: function(event){\r\n            var $thisPage = $(event.target); // get the current page shown\r\n\r\n            // destroy the carousel used for the onboarding slide\r\n            $('#onboarding-carousel', $thisPage).off();\r\n            $('#onboarding-carousel', $thisPage).removeData();\r\n        },\r\n\r\n\r\n        /**\r\n         * method is used to move the onboarding presentation to the next slide\r\n         *\r\n         * @param buttonElem\r\n         */\r\n        nextSlideButtonClicked: function(buttonElem){\r\n            $('#onboarding-carousel').carousel('next'); // move to the next slide\r\n            // wait for the slide animation to complete\r\n            setTimeout(function(){\r\n                // check if this is the last slide in the presentation\r\n                if($('.carousel-item.active').is('[href=\"#three!\"]')){ // this is the last slide\r\n                    $(buttonElem).css(\"display\", \"none\"); // hide the Next button\r\n                }\r\n            }, 205);\r\n        },\r\n\r\n\r\n        /**\r\n         * method is used to end the onboarding presentation\r\n         */\r\n        endButtonClicked: function(){\r\n\r\n            // check if the user is currently logged in\r\n            if(window.localStorage.getItem(\"app-status\") && window.localStorage.getItem(\"app-status\") != \"\"){ // user is logged in\r\n                // load the main menu template\r\n                $('ons-splitter').get(0).content.load(\"app-main-template\");\r\n            }\r\n            else{ // user has NOT been logged in\r\n                //set the first page to be displayed to be the login page\r\n                $('ons-splitter').get(0).content.load(\"login-template\");\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n};\r\n"]}