{"version":3,"sources":["controller.js"],"names":[],"mappings":"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","file":"controller-compiled.js","sourcesContent":["/**\r\n * Created by UTOPIA SOFTWARE on 20/03/2017.\r\n */\r\n\r\n/**\r\n * file defines all View-Models, Controllers and Event Listeners used by the app\r\n *\r\n * The 'utopiasoftware.saveup' namespace has being defined in the base js file.\r\n * The author uses the terms 'method' and function interchangeably; likewise the terms 'attribute' and 'property' are\r\n * also used interchangeably\r\n */\r\n\r\n\r\n// define the controller namespace\r\nutopiasoftware.saveup.controller = {\r\n\r\n    /**\r\n     * method is used to handle the special event created by the intel xdk developer library. The special event (app.Ready)\r\n     * is triggered when ALL the hybrid app pluigins have been loaded/readied and also the document DOM content is ready\r\n     */\r\n    appReady: () => {\r\n\r\n        // initialise the onsen library\r\n        ons.ready(function () {\r\n            // set the default handler for the app\r\n            ons.setDefaultDeviceBackButtonListener(function(){\r\n                console.log(\"DEFAULT BACK BUTTON LISTENER\");\r\n\r\n            });\r\n\r\n            if(utopiasoftware.saveup.model.isAppReady === false){ // if app has not completed loading\r\n                // displaying prepping message\r\n                $('#loader-modal-message').html(\"Preparing App...\");\r\n                $('#loader-modal').get(0).show(); // show loader\r\n            }\r\n\r\n            //set the first page to be displayed to be the login page\r\n            $('ons-splitter').get(0).content.load(\"login-template\");\r\n\r\n            // initialise verify-account bottom sheet plugin\r\n            $('#verify-account-bottom-sheet').modal({\r\n                ready: function(){ // callback for when bottom sheet is opened\r\n                    // flag a state that indicates the bottom sheet is currently open\r\n                    $('#verify-account-bottom-sheet').data(\"saveupSheetState\", \"open\");\r\n                },\r\n                complete: function(){ // callback for when bottom sheet is closed\r\n                    // flag a state that indicates the bottom sheet is currently closed\r\n                    $('#verify-account-bottom-sheet').data(\"saveupSheetState\", \"closed\");\r\n                }\r\n            });\r\n\r\n        });\r\n\r\n        /** ADD CUSTOM VALIDATORS FOR PARSLEY HERE **/\r\n        Parsley.addAsyncValidator(\"financialcardcheck\",\r\n            utopiasoftware.saveup.controller.addCardPageViewModel.financialCardValidator,\r\n            utopiasoftware.saveup.paystackObject.gateway + 'decision/bin/{value}');\r\n\r\n        /** CUSTOM VALIDATORS FOR PARSLEY ENDS **/\r\n\r\n        // add listener for when the Internet network connection is offline\r\n        document.addEventListener(\"offline\", function(){\r\n\r\n            // display a toast message to let user no there is no Internet connection\r\n            window.plugins.toast.showWithOptions({\r\n                message: \"No Internet Connection. App functionality may be limited\",\r\n                duration: 4000, // 2000 ms\r\n                position: \"bottom\",\r\n                styling: {\r\n                    opacity: 1,\r\n                    backgroundColor: '#000000',\r\n                    textColor: '#FFFFFF',\r\n                    textSize: 14\r\n                }\r\n            });\r\n\r\n        }, false);\r\n\r\n        try {\r\n            // lock the orientation of the device to 'PORTRAIT'\r\n            screen.lockOrientation('portrait');\r\n        }\r\n        catch(err){}\r\n\r\n        // set status bar color\r\n        StatusBar.backgroundColorByHexString(\"#000000\");\r\n\r\n        // use Promises to load the other cordova plugins\r\n        new Promise(function(resolve, reject){\r\n            // Get device UUID\r\n            window.plugins.uniqueDeviceID.get(resolve, reject);\r\n        }).\r\n        then(function(deviceUUID){\r\n            utopiasoftware.saveup.model.deviceUUID = deviceUUID;\r\n            return;\r\n        }).\r\n        then(function(){ // load the securely stored / encrypted data into the app\r\n            // check if the user is currently logged in\r\n            if(! window.localStorage.getItem(\"app-status\") || window.localStorage.getItem(\"app-status\") == \"\"){ // user is not logged in\r\n                return null;\r\n            }\r\n\r\n            return Promise.resolve(intel.security.secureStorage.read({\"id\": \"postcash-user-details\"}));\r\n        }).then(function(instanceId){\r\n            if(instanceId == null){ // user is not logged in\r\n                return null;\r\n            }\r\n\r\n            return Promise.resolve(intel.security.secureData.getData(instanceId));\r\n        }).\r\n        then(function(secureData){\r\n\r\n            if(secureData == null){ // user is not logged in\r\n                return null;\r\n            }\r\n\r\n            utopiasoftware.saveup.model.appUserDetails = JSON.parse(secureData); // transfer the collected user details to the app\r\n            // update the first name being displayed in the side menu\r\n            $('#side-menu-username').html(utopiasoftware.saveup.model.appUserDetails.firstName);\r\n            return null;\r\n        }).\r\n        then(function(){\r\n            // notify the app that the app has been successfully initialised and is ready for further execution (set app ready flag to true)\r\n            utopiasoftware.saveup.model.isAppReady = true;\r\n            // hide the splash screen\r\n            navigator.splashscreen.hide();\r\n        }).\r\n        catch(function(){\r\n            // provide an empty device uuid\r\n            utopiasoftware.saveup.model.deviceUUID = \"\";\r\n            // notify the app that the app has been successfully initialised and is ready for further execution (set app ready flag to true)\r\n            utopiasoftware.saveup.model.isAppReady = true;\r\n            // hide the splash screen\r\n            navigator.splashscreen.hide();\r\n\r\n            // display a toast message to let user no there is no Internet connection\r\n            window.plugins.toast.showWithOptions({\r\n                message: \"Startup Error. App functionality may be limited. Always update the app to \" +\r\n                \"get the best secure experience. Please contact us if problem continues\",\r\n                duration: 5000, // 5000 ms\r\n                position: \"bottom\",\r\n                styling: {\r\n                    opacity: 1,\r\n                    backgroundColor: '#000000',\r\n                    textColor: '#FFFFFF',\r\n                    textSize: 14\r\n                }\r\n            });\r\n        });\r\n\r\n    },\r\n\r\n    /**\r\n     * method is used to create secondary menus for some app pages.\r\n     * The secondary menus are onsen ui popover elements\r\n     *\r\n     * @param popOverQuerySelector {String} a query selector string that identifies the onsen ui popover element\r\n     *\r\n     * @param targetElem {HTMLElement} HTML element that identifies the\r\n     * target element of the app secondary menu\r\n     */\r\n    createAppSecondaryMenus: function(popOverQuerySelector, targetElem){\r\n\r\n        // show the specified popover element\r\n        $(popOverQuerySelector).get(0).show(targetElem);\r\n    },\r\n\r\n\r\n    /**\r\n     * method is triggered just before pin-security-check prompt dialog is shown\r\n     */\r\n    pinSecurityCheckPreShow: function(){\r\n        // find all input elements and ensure they are not mistakingly styled by materialize.css\r\n        $('#pin-security-check').find('input').addClass(\"utopiasoftware-no-style\");\r\n    },\r\n\r\n    /**\r\n     * method is triggered when an item on the App Secondary Popup Menu is clicked\r\n     *\r\n     * @param label {String} label represents clicked list item in the menu\r\n     */\r\n    appSecondaryMenuListClicked: function(label){\r\n    },\r\n\r\n\r\n    /**\r\n     * object is the view-model for the app side menu\r\n     */\r\n    sideMenuViewModel : {\r\n\r\n        /**\r\n         * method is used to listen for when the list\r\n         * items in the side menu is clicked\r\n         *\r\n         * @param label {String} label represents clicked list item in the side-menu\r\n         */\r\n        sideMenuListClicked: function(label) {\r\n\r\n            if(label == \"transfer cash\"){ // 'transfer cash' button was clicked\r\n\r\n                // close the side menu\r\n                $('ons-splitter').get(0).left.close().\r\n                then(function(){\r\n                    $('#app-main-navigator').get(0).bringPageTop(\"transfer-cash-page.html\", {}); // navigate to the transfer cash page\r\n                }).catch(function(){});\r\n\r\n                return;\r\n            }\r\n\r\n            if(label == \"verify account\"){ // 'verify account' button was clicked\r\n\r\n                // close the side menu\r\n                $('ons-splitter').get(0).left.close().\r\n                then(function(){\r\n                    $('#app-main-navigator').get(0).bringPageTop(\"verify-account-page.html\", {}); // navigate to the verify account page\r\n                }).catch(function(){});\r\n\r\n                return;\r\n            }\r\n\r\n            if(label == \"my cards\"){ // 'my cards' button was clicked\r\n\r\n                // close the side menu\r\n                $('ons-splitter').get(0).left.close().\r\n                then(function(){\r\n                    // ask user for secure PIN before proceeding. secure pin MUST match\r\n                    return ons.notification.prompt({title: \"Security Check\", id: \"pin-security-check\", class: \"utopiasoftware-no-style\",\r\n                        messageHTML: '<div><ons-icon icon=\"ion-lock-combination\" size=\"24px\" ' +\r\n                        'style=\"color: #b388ff; float: left; width: 26px;\"></ons-icon> <span style=\"float: right; width: calc(100% - 26px);\">' +\r\n                        'Please enter your PostCash Secure PIN to proceed</span></div>',\r\n                        cancelable: true, placeholder: \"Secure PIN\", inputType: \"number\", defaultValue: \"\", autofocus: true,\r\n                        submitOnEnter: true\r\n                    });\r\n                }).\r\n                then(function(userInput){ // user has provided a secured PIN , now authenticate it\r\n                    if(userInput === utopiasoftware.saveup.model.appUserDetails.securePin){ // authentication successful\r\n                        $('#app-main-navigator').get(0).bringPageTop(\"my-cards-page.html\", {}); // navigate to the specified page\r\n                    }\r\n                    else{ // inform user that security check failed/user authentication failed\r\n                        ons.notification.alert({title: \"Security Check\",\r\n                            messageHTML: '<ons-icon icon=\"md-close-circle-o\" size=\"30px\" ' +\r\n                            'style=\"color: red;\"></ons-icon> <span>' + 'Security check failed. Invalid credentials' + '</span>',\r\n                            cancelable: true\r\n                        });\r\n                    }\r\n                }).\r\n                catch(function(){});\r\n\r\n                return;\r\n            }\r\n\r\n            if(label == \"my accounts\"){ // 'my accounts' button was clicked\r\n\r\n                // close the side menu\r\n                $('ons-splitter').get(0).left.close().\r\n                then(function(){\r\n                    // ask user for secure PIN before proceeding. secure pin MUST match\r\n                    return ons.notification.prompt({title: \"Security Check\", id: \"pin-security-check\", class: \"utopiasoftware-no-style\",\r\n                        messageHTML: '<div><ons-icon icon=\"ion-lock-combination\" size=\"24px\" ' +\r\n                        'style=\"color: #b388ff; float: left; width: 26px;\"></ons-icon> <span style=\"float: right; width: calc(100% - 26px);\">' +\r\n                        'Please enter your PostCash Secure PIN to proceed</span></div>',\r\n                        cancelable: true, placeholder: \"Secure PIN\", inputType: \"number\", defaultValue: \"\", autofocus: true,\r\n                        submitOnEnter: true\r\n                    });\r\n                }).\r\n                then(function(userInput){ // user has provided a secured PIN , now authenticate it\r\n                    if(userInput === utopiasoftware.saveup.model.appUserDetails.securePin){ // authentication successful\r\n                        $('#app-main-navigator').get(0).bringPageTop(\"my-accounts-page.html\", {}); // navigate to the specified page\r\n                    }\r\n                    else{ // inform user that security check failed/user authentication failed\r\n                        ons.notification.alert({title: \"Security Check\",\r\n                            messageHTML: '<ons-icon icon=\"md-close-circle-o\" size=\"30px\" ' +\r\n                            'style=\"color: red;\"></ons-icon> <span>' + 'Security check failed. Invalid credentials' + '</span>',\r\n                            cancelable: true\r\n                        });\r\n                    }\r\n                }).\r\n                catch(function(){});\r\n\r\n                return;\r\n            }\r\n\r\n            if(label == \"intro\"){ // intro button was clicked\r\n\r\n                // close the side menu\r\n                $('ons-splitter').get(0).left.close().\r\n                then(function(){\r\n                    $('ons-splitter').get(0).content.load(\"onboarding-template\"); // navigate to the onboarding presentation\r\n                }).catch(function(){});\r\n\r\n                return;\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     * object is view-model for sign-in page\r\n     */\r\n    signInPageViewModel: {\r\n\r\n        /**\r\n         * used to hold the parsley form validation object for the sign-in page\r\n         */\r\n        formValidator: null,\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n            // find all onsen-ui input targets and insert a special class to prevent materialize-css from updating the styles\r\n            $('ons-input input', $thisPage).addClass('utopiasoftware-no-style');\r\n            // disable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').removeAttr(\"swipeable\");\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            function loadPageOnAppReady(){\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if(!ons.isReady() || utopiasoftware.saveup.model.isAppReady === false){\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                $thisPage.get(0).onDeviceBackButton = function(){\r\n                    ons.notification.confirm('Do you want to close the app?', {title: 'Exit',\r\n                            buttonLabels: ['No', 'Yes']}) // Ask for confirmation\r\n                        .then(function(index) {\r\n                            if (index === 1) { // OK button\r\n                                navigator.app.exitApp(); // Close the app\r\n                            }\r\n                        });\r\n                };\r\n\r\n                // check if the user is currently logged in\r\n                if(window.localStorage.getItem(\"app-status\") && window.localStorage.getItem(\"app-status\") != \"\"){ // user is logged in\r\n                    // display the user's save phone number on the login page phonenumber input\r\n                    $('#login-form #user-phone').val(utopiasoftware.saveup.model.appUserDetails.phoneNumber);\r\n                }\r\n\r\n                // initialise the sign-in form validation\r\n                utopiasoftware.saveup.controller.signInPageViewModel.formValidator = $('#login-form').parsley();\r\n\r\n                // attach listener for the sign in button on the sign-in page\r\n                $('#login-signin').get(0).onclick = function(){\r\n                    // run the validation method for the sign-in form\r\n                    utopiasoftware.saveup.controller.signInPageViewModel.formValidator.whenValidate();\r\n                };\r\n\r\n                // listen for log in form field validation failure event\r\n                utopiasoftware.saveup.controller.signInPageViewModel.formValidator.on('field:error', function(fieldInstance) {\r\n                    // get the element that triggered the field validation error and use it to display tooltip\r\n                    // display tooltip\r\n                    $(fieldInstance.$element).addClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                    $(fieldInstance.$element).attr(\"data-hint\", fieldInstance.getErrorsMessages()[0]);\r\n                });\r\n\r\n                // listen for log in form field validation success event\r\n                utopiasoftware.saveup.controller.signInPageViewModel.formValidator.on('field:success', function(fieldInstance) {\r\n                    // remove tooltip from element\r\n                    $(fieldInstance.$element).removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                    $(fieldInstance.$element).removeAttr(\"data-hint\");\r\n                });\r\n\r\n                // listen for log in form validation success\r\n                utopiasoftware.saveup.controller.signInPageViewModel.formValidator.on('form:success',\r\n                    utopiasoftware.saveup.controller.signInPageViewModel.signinFormValidated);\r\n\r\n                // hide the loader\r\n                $('#loader-modal').get(0).hide();\r\n\r\n                // now that the page is being shown without the loader, start the animation of the icons\r\n                $('ons-icon.first,ons-icon.second', $thisPage).addClass('animated swing');\r\n                // wait for 4 seconds, then stop the pulse animation of the Create Account button\r\n                setTimeout(function(){$('#login-create-account', $thisPage).removeClass('pulse');}, 4000);\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the sign-in page is hidden\r\n         * @param event\r\n         */\r\n        pageHide: (event) => {\r\n            try {\r\n                // remove any tooltip being displayed on all forms in the login page\r\n                $('#sign-in-page [data-hint]').removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                $('#sign-in-page [data-hint]').removeAttr(\"data-hint\");\r\n                // reset the form validator object in the sign-in page\r\n                utopiasoftware.saveup.controller.signInPageViewModel.formValidator.reset();\r\n            }\r\n            catch(err){}\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the sign-in page is destroyed\r\n         * @param event\r\n         */\r\n        pageDestroy: (event) => {\r\n            try{\r\n                // remove any tooltip being displayed on all forms in the login page\r\n                $('#sign-in-page [data-hint]').removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                $('#sign-in-page [data-hint]').removeAttr(\"data-hint\");\r\n                // destroy the form validator objects in the login page\r\n                utopiasoftware.saveup.controller.signInPageViewModel.formValidator.destroy();\r\n            }\r\n            catch(err){}\r\n        },\r\n\r\n        /**\r\n         * method is triggered when sign-in form is successfully validated\r\n         */\r\n        signinFormValidated: function(){\r\n\r\n            // display the loader message to indicate is being signed in;\r\n            $('#loader-modal-message').html(\"Signing In...\");\r\n            $('#loader-modal').get(0).show(); // show loader\r\n\r\n            if(($('#login-form #user-phone').val() === utopiasoftware.saveup.model.appUserDetails.phoneNumber) &&\r\n                ($('#login-form #secure-pin').val() === utopiasoftware.saveup.model.appUserDetails.securePin)){ // user can sign in\r\n\r\n                $('#loader-modal').get(0).hide(); // hide loader\r\n                // update the first name being displayed in the side menu\r\n                $('#side-menu-username').html(utopiasoftware.saveup.model.appUserDetails.firstName);\r\n                $('ons-splitter').get(0).content.load(\"app-main-template\"); // move to the main menu\r\n                // show a toast welcoming user\r\n                Materialize.toast('Welcome ' + utopiasoftware.saveup.model.appUserDetails.firstName, 4000);\r\n            }\r\n            else{ // user cannot sign in authentication failed\r\n                $('#loader-modal').get(0).hide(); // hide loader\r\n                ons.notification.alert({title: \"Sign In Failed\",\r\n                    messageHTML: '<ons-icon icon=\"md-close-circle-o\" size=\"30px\" ' +\r\n                    'style=\"color: red;\"></ons-icon> <span>' + 'Invalid Credentials' + '</span>',\r\n                    cancelable: false\r\n                });\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when create account button is clicked\r\n         */\r\n        createAccountButtonClicked: function(){\r\n            // move the tab view to the Sign Up tab\r\n            $('#login-tabbar').get(0).setActiveTab(1, {animation: \"slide\"});\r\n        },\r\n\r\n        /**\r\n         * method is triggered when forgot pin button is clicked\r\n         */\r\n        forgotPinButtonClicked: function(element){\r\n            // move the tab view to the Reset PIN tab\r\n            $('#forgot-pin-popover').get(0).show(element, {});\r\n        }\r\n\r\n    },\r\n\r\n\r\n    /**\r\n     * object is view-model for create-account page\r\n     */\r\n    createAccountPageViewModel: {\r\n\r\n        /**\r\n         * used to hold the parsley form validation object for the create-account page\r\n         */\r\n        formValidator: null,\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n            // find all onsen-ui input targets and insert a special class to prevent materialize-css from updating the styles\r\n            $('ons-input input', $thisPage).addClass('utopiasoftware-no-style');\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            function loadPageOnAppReady(){\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if(!ons.isReady() || utopiasoftware.saveup.model.isAppReady === false){\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                $thisPage.get(0).onDeviceBackButton = function(){\r\n                    // move to the first tab in the tab bar i.e sign-in page\r\n                    $('#login-tabbar').get(0).setActiveTab(0, {animation: \"slide\"});\r\n                };\r\n\r\n                // initialise the create-account form validation\r\n                utopiasoftware.saveup.controller.createAccountPageViewModel.formValidator = $('#create-account-form').parsley();\r\n\r\n                // attach listener for the create account button on the create account page\r\n                $('#create-account-button').get(0).onclick = function(){\r\n                    // run the validation method for the create account form\r\n                    utopiasoftware.saveup.controller.createAccountPageViewModel.formValidator.whenValidate();\r\n                };\r\n\r\n                // listen for log in form field validation failure event\r\n                utopiasoftware.saveup.controller.createAccountPageViewModel.formValidator.on('field:error', function(fieldInstance) {\r\n                    // get the element that triggered the field validation error and use it to display tooltip\r\n                    // display tooltip\r\n                    $(fieldInstance.$element).parent().find('label:eq(0)').addClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                    $(fieldInstance.$element).parent().find('label:eq(0)').attr(\"data-hint\", fieldInstance.getErrorsMessages()[0]);\r\n                });\r\n\r\n                // listen for log in form field validation success event\r\n                utopiasoftware.saveup.controller.createAccountPageViewModel.formValidator.on('field:success', function(fieldInstance) {\r\n                    // remove tooltip from element\r\n                    $(fieldInstance.$element).parent().find('label:eq(0)').removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                    $(fieldInstance.$element).parent().find('label:eq(0)').removeAttr(\"data-hint\");\r\n                });\r\n\r\n                // listen for log in form validation success\r\n                utopiasoftware.saveup.controller.createAccountPageViewModel.formValidator.on('form:success',\r\n                    utopiasoftware.saveup.controller.createAccountPageViewModel.createAccountFormValidated);\r\n\r\n                // hide the loader\r\n                $('#loader-modal').get(0).hide();\r\n\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the create-account page is hidden\r\n         * @param event\r\n         */\r\n        pageHide: (event) => {\r\n            try {\r\n                // remove any tooltip being displayed on all forms on the page\r\n                $('#create-account-page [data-hint]').removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                $('#create-account-page [data-hint]').removeAttr(\"data-hint\");\r\n                // reset the form validator object on the page\r\n                utopiasoftware.saveup.controller.createAccountPageViewModel.formValidator.reset();\r\n            }\r\n            catch(err){}\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the sign-in page is destroyed\r\n         * @param event\r\n         */\r\n        pageDestroy: (event) => {\r\n            try{\r\n                // remove any tooltip being displayed on all forms on the page\r\n                $('#create-account-page [data-hint]').removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                $('#create-account-page [data-hint]').removeAttr(\"data-hint\");\r\n                // destroy the form validator objects on the page\r\n                utopiasoftware.saveup.controller.createAccountPageViewModel.formValidator.destroy();\r\n            }\r\n            catch(err){}\r\n        },\r\n\r\n        /**\r\n         * method is triggered when sign-up form is successfully validated\r\n         */\r\n        createAccountFormValidated: function(){\r\n\r\n            // tell the user that phoe number verification is necessary\r\n            new Promise(function(resolve, reject){\r\n                ons.notification.confirm('To complete sign up, your phone number must be verified. <br>' +\r\n                    'Usual SMS charge from your phone network provider will apply', {title: 'Verify Phone Number',\r\n                        buttonLabels: ['Cancel', 'Ok']}) // Ask for confirmation\r\n                    .then(function(index) {\r\n                        if (index === 1) { // OK button\r\n                            resolve();\r\n                        }\r\n                        else{\r\n                            reject(\"your phone number could not be verified\");\r\n                        }\r\n                    });\r\n            }).\r\n            then(function(){\r\n\r\n                return null;\r\n                //return utopiasoftware.saveup.validatePhoneNumber($('#create-phone').val());\r\n            }).\r\n            then(function(){\r\n                // display the loader message to indicate that account is being created;\r\n                $('#loader-modal-message').html(\"Completing Sign Up...\");\r\n                $('#loader-modal').get(0).show(); // show loader\r\n\r\n                // create the app user details object and persist it\r\n                utopiasoftware.saveup.model.appUserDetails = {\r\n                    firstName: $('#create-account-form #create-first-name').val(),\r\n                    lastName: $('#create-account-form #create-last-name').val(),\r\n                    phoneNumber: $('#create-account-form #create-phone').val(),\r\n                    phoneNumber_intlFormat: $('#create-account-form #create-phone').val().startsWith(\"0\") ?\r\n                        $('#create-account-form #create-phone').val().replace(\"0\", \"+234\") :\r\n                        $('#create-account-form #create-phone').val(),\r\n                securePin: $('#create-account-form #create-secure-pin').val()\r\n                };\r\n\r\n                return utopiasoftware.saveup.model.appUserDetails;\r\n            }).// TODO DON'T FORGET TO DESTROY ALL USER STORED DATA BEFORE CREATING NEW ACCOUNT. VERY IMPORTANT!!\r\n            then(function(newUser){\r\n                // create a cypher data of the user details\r\n                return Promise.resolve(intel.security.secureData.\r\n                createFromData({\"data\": JSON.stringify(newUser)}));\r\n            }).\r\n            then(function(instanceId){\r\n                    // store the cyphered data in secure persistent storage\r\n                    return Promise.resolve(\r\n                        intel.security.secureStorage.write({\"id\": \"postcash-user-details\", \"instanceID\": instanceId})\r\n                    );\r\n                }).\r\n            then(function(){\r\n                $('#loader-modal').get(0).hide(); // hide loader\r\n                // set app-status local storage (as user phone number)\r\n                window.localStorage.setItem(\"app-status\", utopiasoftware.saveup.model.appUserDetails.phoneNumber);\r\n                // update the first name being displayed in the side menu\r\n                $('#side-menu-username').html(utopiasoftware.saveup.model.appUserDetails.firstName);\r\n                $('ons-splitter').get(0).content.load(\"app-main-template\"); // move to the main menu\r\n                // show a toast informing user that account has been created\r\n                Materialize.toast('Sign Up completed! Welcome', 4000);\r\n            }).\r\n            catch(function(err){\r\n                if(typeof err !== \"string\"){ // if err is NOT a String\r\n                    err = \"Sorry. Sign Up could not be completed\"\r\n                }\r\n                $('#loader-modal').get(0).hide(); // hide loader\r\n                ons.notification.alert({title: \"Sign Up Failed\",\r\n                    messageHTML: '<ons-icon icon=\"md-close-circle-o\" size=\"30px\" ' +\r\n                    'style=\"color: red;\"></ons-icon> <span>' + err + '</span>',\r\n                    cancelable: false\r\n                });\r\n            });\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the Create Account PIN visibility button is clicked.\r\n         * It toggles pin visibility\r\n         *\r\n         * @param buttonElement\r\n         */\r\n        pinVisibilityButtonClicked: function(buttonElement){\r\n            if($(buttonElement).attr(\"data-saveup-visible\") === \"no\"){ // pin is not visible, make it visible\r\n                $('#create-secure-pin').css(\"-webkit-text-security\", \"none\"); // change the text-security for the input field\r\n                $(buttonElement).find('ons-icon').attr(\"icon\", \"md-eye-off\"); // change the icon associated with the input\r\n                $(buttonElement).attr(\"data-saveup-visible\", \"yes\"); // flag the pin is now visible\r\n            }\r\n            else{ // make the pin not visible\r\n                $('#create-secure-pin').css(\"-webkit-text-security\", \"disc\"); // change the text-security for the input field\r\n                $(buttonElement).find('ons-icon').attr(\"icon\", \"md-eye\"); // change the icon associated with the input\r\n                $(buttonElement).attr(\"data-saveup-visible\", \"no\"); // flag the pin is now invisible\r\n            }\r\n        }\r\n\r\n    },\r\n\r\n\r\n    /**\r\n     * object is view-model for onboarding page\r\n     */\r\n    onboardingPageViewModel: {\r\n\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n            // disable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').removeAttr(\"swipeable\");\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            function loadPageOnAppReady(){\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if(!ons.isReady() || utopiasoftware.saveup.model.isAppReady === false){\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                $('#onboarding-navigator').get(0).topPage.onDeviceBackButton = function(){\r\n                    ons.notification.confirm('Do you want to close the app?', {title: 'Exit',\r\n                        buttonLabels: ['No', 'Yes']}) // Ask for confirmation\r\n                        .then(function(index) {\r\n                            if (index === 1) { // OK button\r\n                                navigator.app.exitApp(); // Close the app\r\n                            }\r\n                        });\r\n                };\r\n\r\n                // initialise carousel\r\n                $('#onboarding-carousel', $thisPage).carousel({dist: 0, fullWidth: true, indicators: true, noWrap: true});\r\n                // hide the loader\r\n                $('#loader-modal').get(0).hide();\r\n\r\n            }\r\n\r\n        },\r\n\r\n\r\n        /**\r\n         * method is used to move the onboarding presentation to the next slide\r\n         *\r\n         * @param buttonElem\r\n         */\r\n        nextSlideButtonClicked: function(buttonElem){\r\n            $('#onboarding-carousel').carousel('next'); // move to the next slide\r\n            // wait for the slide animation to complete\r\n            setTimeout(function(){\r\n                // check if this is the last slide in the presentation\r\n                if($('.carousel-item.active').is('[href=\"#three!\"]')){ // this is the last slide\r\n                    $(buttonElem).css(\"display\", \"none\"); // hide the Next button\r\n                }\r\n            }, 205);\r\n        },\r\n\r\n\r\n        /**\r\n         * method is used to end the onboarding presentation\r\n         */\r\n        endButtonClicked: function(){\r\n\r\n            // load the main menu template\r\n            $('ons-splitter').get(0).content.load(\"app-main-template\");\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * object is view-model for main-menu page\r\n     */\r\n    mainMenuPageViewModel: {\r\n\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n            // disable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').removeAttr(\"swipeable\");\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            function loadPageOnAppReady(){\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if(!ons.isReady() || utopiasoftware.saveup.model.isAppReady === false){\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                $('#app-main-navigator').get(0).topPage.onDeviceBackButton = function(){\r\n                    ons.notification.confirm('Do you want to close the app?', {title: 'Exit',\r\n                            buttonLabels: ['No', 'Yes']}) // Ask for confirmation\r\n                        .then(function(index) {\r\n                            if (index === 1) { // OK button\r\n                                navigator.app.exitApp(); // Close the app\r\n                            }\r\n                        });\r\n                };\r\n\r\n                // hide the loader\r\n                $('#loader-modal').get(0).hide();\r\n\r\n            }\r\n\r\n        },\r\n\r\n\r\n        /**\r\n         * method is used to listen for click events of the main menu items\r\n         *\r\n         * @param label\r\n         */\r\n        mainMenuButtonsClicked: function(label){\r\n            if(label == \"transfer cash\"){ // 'transfer cash' button was clicked\r\n\r\n                $('#app-main-navigator').get(0).pushPage(\"transfer-cash-page.html\", {}); // navigate to the transfer cash page\r\n\r\n                return;\r\n            }\r\n\r\n            if(label == \"verify account\"){ // 'verify account' button was clicked\r\n\r\n                $('#app-main-navigator').get(0).pushPage(\"verify-account-page.html\", {}); // navigate to the verify account page\r\n\r\n                return;\r\n            }\r\n\r\n            if(label == \"my cards\"){ // 'my cards' button was clicked\r\n\r\n                // ask user for secure PIN before proceeding. secure pin MUST match\r\n                ons.notification.prompt({title: \"Security Check\", id: \"pin-security-check\", class: \"utopiasoftware-no-style\",\r\n                    messageHTML: '<div><ons-icon icon=\"ion-lock-combination\" size=\"24px\" ' +\r\n                    'style=\"color: #b388ff; float: left; width: 26px;\"></ons-icon> <span style=\"float: right; width: calc(100% - 26px);\">' +\r\n                    'Please enter your PostCash Secure PIN to proceed</span></div>',\r\n                    cancelable: true, placeholder: \"Secure PIN\", inputType: \"number\", defaultValue: \"\", autofocus: true,\r\n                    submitOnEnter: true\r\n                }).\r\n                then(function(userInput){ // user has provided a secured PIN , now authenticate it\r\n                    if(userInput === utopiasoftware.saveup.model.appUserDetails.securePin){ // authentication successful\r\n                        $('#app-main-navigator').get(0).pushPage(\"my-cards-page.html\", {}); // navigate to the my cards pages\r\n                    }\r\n                    else{ // inform user that security check failed/user authentication failed\r\n                        ons.notification.alert({title: \"Security Check\",\r\n                            messageHTML: '<ons-icon icon=\"md-close-circle-o\" size=\"30px\" ' +\r\n                            'style=\"color: red;\"></ons-icon> <span>' + 'Security check failed. Invalid credentials' + '</span>',\r\n                            cancelable: true\r\n                        });\r\n                    }\r\n                }).\r\n                catch(function(){});\r\n\r\n                return;\r\n            }\r\n\r\n            if(label == \"my accounts\"){ // 'my accounts' button was clicked\r\n\r\n                // ask user for secure PIN before proceeding. secure pin MUST match\r\n                ons.notification.prompt({title: \"Security Check\", id: \"pin-security-check\", class: \"utopiasoftware-no-style\",\r\n                    messageHTML: '<div><ons-icon icon=\"ion-lock-combination\" size=\"24px\" ' +\r\n                    'style=\"color: #b388ff; float: left; width: 26px;\"></ons-icon> <span style=\"float: right; width: calc(100% - 26px);\">' +\r\n                    'Please enter your PostCash Secure PIN to proceed</span></div>',\r\n                    cancelable: true, placeholder: \"Secure PIN\", inputType: \"number\", defaultValue: \"\", autofocus: true,\r\n                    submitOnEnter: true\r\n                }).\r\n                then(function(userInput){ // user has provided a secured PIN , now authenticate it\r\n                    if(userInput === utopiasoftware.saveup.model.appUserDetails.securePin){ // authentication successful\r\n                        $('#app-main-navigator').get(0).pushPage(\"my-accounts-page.html\", {}); // navigate to the my accounts pages\r\n                    }\r\n                    else{ // inform user that security check failed/user authentication failed\r\n                        ons.notification.alert({title: \"Security Check\",\r\n                            messageHTML: '<ons-icon icon=\"md-close-circle-o\" size=\"30px\" ' +\r\n                            'style=\"color: red;\"></ons-icon> <span>' + 'Security check failed. Invalid credentials' + '</span>',\r\n                            cancelable: true\r\n                        });\r\n                    }\r\n                }).\r\n                catch(function(){});\r\n\r\n                return;\r\n            }\r\n\r\n            if(label == \"intro\"){ // intro button was clicked\r\n\r\n                $('ons-splitter').get(0).content.load(\"onboarding-template\"); // navigate to the onboarding presentation\r\n\r\n                return;\r\n            }\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * object is view-model for join-savings-groups page\r\n     */\r\n    joinSavingsGroupsViewModel: {\r\n\r\n        /**\r\n         * used to hold the parsley form validation object for the page\r\n         */\r\n        formValidator: null,\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n            // find all onsen-ui input targets and insert a special class to prevent materialize-css from updating the styles\r\n            $('ons-input input', $thisPage).addClass('utopiasoftware-no-style');\r\n            // enable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').attr(\"swipeable\", true);\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            function loadPageOnAppReady(){\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if(!ons.isReady() || utopiasoftware.saveup.model.isAppReady === false){\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n\r\n                // listen for the back button event\r\n                $('#app-main-navigator').get(0).topPage.onDeviceBackButton = function(){\r\n                    $('#app-main-navigator').get(0).popPage({refresh: false});\r\n                };\r\n\r\n                // initilise the select element\r\n                $('#join-savings-group-choose-group', $thisPage).material_select();\r\n\r\n                // initialise the create-account form validation\r\n                utopiasoftware.saveup.controller.joinSavingsGroupsViewModel.formValidator = $('#create-account-form').parsley();\r\n\r\n                // attach listener for the create account button on the create account page\r\n                $('#create-account-button').get(0).onclick = function(){\r\n                    // run the validation method for the create account form\r\n                    utopiasoftware.saveup.controller.createAccountPageViewModel.formValidator.whenValidate();\r\n                };\r\n\r\n                // listen for log in form field validation failure event\r\n                utopiasoftware.saveup.controller.createAccountPageViewModel.formValidator.on('field:error', function(fieldInstance) {\r\n                    // get the element that triggered the field validation error and use it to display tooltip\r\n                    // display tooltip\r\n                    $(fieldInstance.$element).parent().find('label:eq(0)').addClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                    $(fieldInstance.$element).parent().find('label:eq(0)').attr(\"data-hint\", fieldInstance.getErrorsMessages()[0]);\r\n                });\r\n\r\n                // listen for log in form field validation success event\r\n                utopiasoftware.saveup.controller.createAccountPageViewModel.formValidator.on('field:success', function(fieldInstance) {\r\n                    // remove tooltip from element\r\n                    $(fieldInstance.$element).parent().find('label:eq(0)').removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                    $(fieldInstance.$element).parent().find('label:eq(0)').removeAttr(\"data-hint\");\r\n                });\r\n\r\n                // listen for log in form validation success\r\n                utopiasoftware.saveup.controller.createAccountPageViewModel.formValidator.on('form:success',\r\n                    utopiasoftware.saveup.controller.createAccountPageViewModel.createAccountFormValidated);\r\n\r\n                // hide the loader\r\n                $('#loader-modal').get(0).hide();\r\n\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the create-account page is hidden\r\n         * @param event\r\n         */\r\n        pageHide: (event) => {\r\n            try {\r\n                // remove any tooltip being displayed on all forms on the page\r\n                $('#create-account-page [data-hint]').removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                $('#create-account-page [data-hint]').removeAttr(\"data-hint\");\r\n                // reset the form validator object on the page\r\n                utopiasoftware.saveup.controller.createAccountPageViewModel.formValidator.reset();\r\n            }\r\n            catch(err){}\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the sign-in page is destroyed\r\n         * @param event\r\n         */\r\n        pageDestroy: (event) => {\r\n            try{\r\n                // remove any tooltip being displayed on all forms on the page\r\n                $('#create-account-page [data-hint]').removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                $('#create-account-page [data-hint]').removeAttr(\"data-hint\");\r\n                // destroy the form validator objects on the page\r\n                utopiasoftware.saveup.controller.createAccountPageViewModel.formValidator.destroy();\r\n            }\r\n            catch(err){}\r\n        },\r\n\r\n        /**\r\n         * method is triggered when sign-in form is successfully validated\r\n         */\r\n        createAccountFormValidated: function(){\r\n\r\n            // tell the user that phoe number verification is necessary\r\n            new Promise(function(resolve, reject){\r\n                ons.notification.confirm('To complete account creation, your phone number must be verified. <br>' +\r\n                        'Usual SMS charge from your phone network provider will apply', {title: 'Verify Phone Number',\r\n                        buttonLabels: ['Cancel', 'Ok']}) // Ask for confirmation\r\n                    .then(function(index) {\r\n                        if (index === 1) { // OK button\r\n                            resolve();\r\n                        }\r\n                        else{\r\n                            reject(\"your phone number could not be verified\");\r\n                        }\r\n                    });\r\n            }).\r\n            then(function(){\r\n                return null;\r\n                //return utopiasoftware.saveup.validatePhoneNumber($('#create-phone').val());\r\n            }).\r\n            then(function(){\r\n                $('ons-splitter').get(0).content.load(\"onboarding-template\");\r\n            }).\r\n            catch(function(err){\r\n                ons.notification.alert({title: \"Account Creation Failed\",\r\n                    messageHTML: '<ons-icon icon=\"md-close-circle-o\" size=\"30px\" ' +\r\n                    'style=\"color: red;\"></ons-icon> <span>' + err + '</span>',\r\n                    cancelable: false\r\n                });\r\n            });\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the Create Account PIN visibility button is clicked.\r\n         * It toggles pin visibility\r\n         *\r\n         * @param buttonElement\r\n         */\r\n        pinVisibilityButtonClicked: function(buttonElement){\r\n            if($(buttonElement).attr(\"data-saveup-visible\") === \"no\"){ // pin is not visible, make it visible\r\n                $('#create-secure-pin').css(\"-webkit-text-security\", \"none\"); // change the text-security for the input field\r\n                $(buttonElement).find('ons-icon').attr(\"icon\", \"md-eye-off\"); // change the icon associated with the input\r\n                $(buttonElement).attr(\"data-saveup-visible\", \"yes\"); // flag the pin is now visible\r\n            }\r\n            else{ // make the pin not visible\r\n                $('#create-secure-pin').css(\"-webkit-text-security\", \"disc\"); // change the text-security for the input field\r\n                $(buttonElement).find('ons-icon').attr(\"icon\", \"md-eye\"); // change the icon associated with the input\r\n                $(buttonElement).attr(\"data-saveup-visible\", \"no\"); // flag the pin is now invisible\r\n            }\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * object is view-model for verify-account page\r\n     */\r\n    verifyAccountPageViewModel: {\r\n\r\n        /**\r\n         * used to hold the parsley form validation object for the page\r\n         */\r\n        formValidator: null,\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n            // find all onsen-ui input targets and insert a special class to prevent materialize-css from updating the styles\r\n            $('ons-input input', $thisPage).addClass('utopiasoftware-no-style');\r\n            // enable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').attr(\"swipeable\", true);\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            function loadPageOnAppReady(){\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if(!ons.isReady() || utopiasoftware.saveup.model.isAppReady === false){\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n\r\n                // listen for the back button event\r\n                $('#app-main-navigator').get(0).topPage.onDeviceBackButton = function(){\r\n\r\n                    // check if the side menu is open\r\n                    if($('ons-splitter').get(0).left.isOpen){ // side menu open, so close it\r\n                        $('ons-splitter').get(0).left.close();\r\n                        return; // exit the method\r\n                    }\r\n\r\n                    // check if the verify-account bottom sheet is open\r\n                    if($('#verify-account-bottom-sheet').data(\"saveupSheetState\") === \"open\"){ // bottom sheet is open\r\n                        $('#verify-account-bottom-sheet').modal(\"close\"); // close the bottom sheet\r\n\r\n                        return;\r\n                    }\r\n\r\n                    $('#app-main-navigator').get(0).resetToPage(\"main-menu-page.html\");\r\n                };\r\n\r\n\r\n                // initialise the form validation\r\n                utopiasoftware.saveup.controller.verifyAccountPageViewModel.formValidator = $('#verify-account-form').parsley();\r\n\r\n                // attach listener for the verify account button\r\n                $('#verify-account-button').get(0).onclick = function(){\r\n                    // run the validation method for the create account form\r\n                    utopiasoftware.saveup.controller.verifyAccountPageViewModel.formValidator.whenValidate();\r\n                };\r\n\r\n                // listen for log in form field validation failure event\r\n                utopiasoftware.saveup.controller.verifyAccountPageViewModel.formValidator.on('field:error', function(fieldInstance) {\r\n                    // get the element that triggered the field validation error and use it to display tooltip\r\n                    // display tooltip\r\n                    $(fieldInstance.$element).parent().find('label:eq(0)').addClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                    $(fieldInstance.$element).parent().find('label:eq(0)').attr(\"data-hint\", fieldInstance.getErrorsMessages()[0]);\r\n                });\r\n\r\n                // listen for log in form field validation success event\r\n                utopiasoftware.saveup.controller.verifyAccountPageViewModel.formValidator.on('field:success', function(fieldInstance) {\r\n                    // remove tooltip from element\r\n                    $(fieldInstance.$element).parent().find('label:eq(0)').removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                    $(fieldInstance.$element).parent().find('label:eq(0)').removeAttr(\"data-hint\");\r\n                });\r\n\r\n                // listen for log in form validation success\r\n                utopiasoftware.saveup.controller.verifyAccountPageViewModel.formValidator.on('form:success',\r\n                    utopiasoftware.saveup.controller.verifyAccountPageViewModel.verifyAccountFormValidated);\r\n\r\n                // retrieve the sorted array of banks\r\n                Promise.resolve(utopiasoftware.saveup.sortBanksData()).\r\n                then(function(bankArrayData){\r\n                    var optionTags = \"\"; // string to hold all created option tags\r\n\r\n                    // get each object in bank array and use it to create the select element\r\n                    for(var index = 0; index < bankArrayData.length; index++){\r\n                        var bankObject = bankArrayData[index]; // get the bank object\r\n                        // update the banks select element option tags\r\n                        for(var prop in bankObject){\r\n                            optionTags += '<option value=\"' + prop + '\">' + bankObject[prop] + '</option>';\r\n                        }\r\n                    }\r\n\r\n                    $('#verify-account-choose-bank', $thisPage).append(optionTags); // append all the created option tags\r\n                    // initilise the select element\r\n                    $('#verify-account-choose-bank', $thisPage).material_select();\r\n                    // initialise the character counter plugin\r\n                    $('#verify-account-number', $thisPage).characterCounter();\r\n                    // remove the progress indeterminate loader\r\n                    $('.progress', $thisPage).remove();\r\n                    // make the verify account form visible\r\n                    $('#verify-account-form', $thisPage).css(\"display\", \"block\");\r\n                    // enable the 'Verify Account' button\r\n                    $('#verify-account-button', $thisPage).removeAttr(\"disabled\");\r\n                    // hide the loader\r\n                    $('#loader-modal').get(0).hide();\r\n                }).\r\n                catch();\r\n\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the create-account page is hidden\r\n         * @param event\r\n         */\r\n        pageHide: (event) => {\r\n            try {\r\n                // remove any tooltip being displayed on all forms on the page\r\n                $('#verify-account-page [data-hint]').removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                $('#verify-account-page [data-hint]').removeAttr(\"data-hint\");\r\n                // reset the form validator object on the page\r\n                utopiasoftware.saveup.controller.verifyAccountPageViewModel.formValidator.reset();\r\n            }\r\n            catch(err){}\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the sign-in page is destroyed\r\n         * @param event\r\n         */\r\n        pageDestroy: (event) => {\r\n            try{\r\n                // remove any tooltip being displayed on all forms on the page\r\n                $('#verify-account-page [data-hint]').removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                $('#verify-account-page [data-hint]').removeAttr(\"data-hint\");\r\n                // destroy the form validator objects on the page\r\n                utopiasoftware.saveup.controller.verifyAccountPageViewModel.formValidator.destroy();\r\n                // destroy the form inputs which need to be destroyed\r\n                $('#verify-account-choose-bank').material_select('destroy');\r\n                $('#verify-account-number').off();\r\n                $('#verify-account-number').removeData();\r\n            }\r\n            catch(err){}\r\n        },\r\n\r\n        /**\r\n         * method is triggered when verify account form is successfully validated\r\n         */\r\n        verifyAccountFormValidated: function(){\r\n\r\n            // check if Internet Connection is available before proceeding\r\n            if(navigator.connection.type === Connection.NONE){ // no Internet Connection\r\n                // inform the user that they cannot proceed without Internet\r\n                window.plugins.toast.showWithOptions({\r\n                    message: \"You cannot verify accounts without an Internet Connection\",\r\n                    duration: 4000,\r\n                    position: \"top\",\r\n                    styling: {\r\n                        opacity: 1,\r\n                        backgroundColor: '#ff0000', //red\r\n                        textColor: '#FFFFFF',\r\n                        textSize: 14\r\n                    }\r\n                }, function(toastEvent){\r\n                    if(toastEvent && toastEvent.event == \"touch\"){ // user tapped the toast, so hide toast immediately\r\n                        window.plugins.toast.hide();\r\n                    }\r\n                });\r\n\r\n                return; // exit method immediately\r\n            }\r\n\r\n            // display the loader message to indicate that account is being verified;\r\n            $('#loader-modal-message').html(\"Verifying Bank Account...\");\r\n            $('#loader-modal').get(0).show(); // show loader\r\n\r\n            // request for gateway authorization token\r\n            utopiasoftware.saveup.moneyWaveObject.useToken.\r\n            then(function(tokenData){\r\n                // verify the bank account\r\n                return new Promise(function(resolve, reject){\r\n                    var verifyAccountRequest = $.ajax(\r\n                        {\r\n                            url: utopiasoftware.saveup.moneyWaveObject.gateway + \"v1/resolve/account\",\r\n                            type: \"post\",\r\n                            contentType: \"application/json\",\r\n                            beforeSend: function(jqxhr) {\r\n                                jqxhr.setRequestHeader(\"Authorization\", tokenData);\r\n                            },\r\n                            dataType: \"json\",\r\n                            timeout: 240000, // wait for 4 minutes before timeout of request\r\n                            processData: false,\r\n                            data: JSON.stringify({\r\n                                account_number: $('#verify-account-form #verify-account-number').val(),\r\n                                bank_code: $('#verify-account-form #verify-account-choose-bank').val()\r\n                            })\r\n                        }\r\n                    );\r\n\r\n                    // server responded to account verification request\r\n                    verifyAccountRequest.done(function(responseData){\r\n                        if(responseData.status === \"success\"){ // the server responded with a successful account verification\r\n                            // set the name of the account which has been verified\r\n                            $('#verify-account-form #verify-account-name').val(responseData.data.account_name);\r\n                            resolve(); // resolve the account verification promise\r\n                        }\r\n                        else { // the server responded unsuccessfully\r\n                            reject(); // reject the account verification promise\r\n                        }\r\n                    });\r\n\r\n                    // server responded with a failure to the verification request\r\n                    verifyAccountRequest.fail(function(){\r\n                        reject(); // reject the account verification promise\r\n                    });\r\n                });\r\n            }).\r\n            then(function(){\r\n                // hide the loader modal\r\n                return $('#loader-modal').get(0).hide(); // hide loader\r\n            }).\r\n            then(function(){\r\n                // show a toast welcoming user\r\n                Materialize.toast('Bank account verified <ons-button modifier=\"quiet\" style=\"color: #82b1ff\" onclick=\"utopiasoftware.saveup.controller.verifyAccountPageViewModel.moreActions();\">More</ons-button>', 4000);\r\n                // show the result of the verification to the user\r\n                $('#verify-account-form .verify-account-success').css(\"display\", \"block\");\r\n                $('#verify-account-form .verify-account-success').addClass(\"scale-in\");\r\n            }).\r\n            catch(function(){ // inform the user that this is an invalid account number\r\n                // hide the loader modal\r\n                $('#loader-modal').get(0).hide(); // hide loader\r\n                // show the FAILED result of the verification to the user\r\n                $('#verify-account-form .verify-account-failed').css(\"display\", \"block\");\r\n                $('#verify-account-form .verify-account-failed').addClass(\"scale-in\");\r\n            });\r\n        },\r\n\r\n\r\n        /**\r\n         * method is used to specifically reset the verified account display used\r\n         * when an account has been previously verified\r\n         *\r\n         */\r\n        resetVerifiedAcctDisplay: function(){\r\n            // hide all account verification information\r\n            $('#verify-account-form .verify-account-success').css(\"display\", \"none\");\r\n            $('#verify-account-form .verify-account-success').removeClass(\"scale-in\");\r\n            $('#verify-account-form .verify-account-failed').css(\"display\", \"none\");\r\n            $('#verify-account-form .verify-account-failed').removeClass(\"scale-in\");\r\n        },\r\n\r\n\r\n        /**\r\n         * method is used to display the means for performing more actions upon/after\r\n         * bank account verification\r\n         */\r\n        moreActions: function(){\r\n            // display the bottom sheets\r\n            $('#verify-account-bottom-sheet').modal('open');\r\n        },\r\n\r\n\r\n        /**\r\n         * method is used to listen for clicks on the bottom sheet of the verify account page\r\n         * @param label\r\n         */\r\n        verifyAcctBottomSheetListItemClicked: function(label){}\r\n\r\n    },\r\n\r\n\r\n    /**\r\n     * object is view-model for my-cards-page page\r\n     */\r\n    myCardsPageViewModel: {\r\n\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n            // enable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').attr(\"swipeable\", true);\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            function loadPageOnAppReady(){\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if(!ons.isReady() || utopiasoftware.saveup.model.isAppReady === false){\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                $('#app-main-navigator').get(0).topPage.onDeviceBackButton = function(){\r\n\r\n                    // check if the side menu is open\r\n                    if($('ons-splitter').get(0).left.isOpen){ // side menu open, so close it\r\n                        $('ons-splitter').get(0).left.close();\r\n                        return; // exit the method\r\n                    }\r\n\r\n                    $('#app-main-navigator').get(0).resetToPage(\"main-menu-page.html\");\r\n                };\r\n\r\n                // register listener for the pull-to-refresh widget\r\n                $('#my-cards-pull-hook', $thisPage).on(\"changestate\", function(event){\r\n\r\n                    // check the state of the pull-to-refresh widget\r\n                    switch (event.originalEvent.state){\r\n                        case 'initial':\r\n                            // update the displayed icon\r\n                            $('#my-cards-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"fa-long-arrow-down\" size=\"24px\"></ons-icon>');\r\n                            break;\r\n\r\n                        case 'preaction':\r\n\r\n                            $('#my-cards-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"fa-long-arrow-up\" size=\"24px\"></ons-icon>');\r\n                            break;\r\n\r\n                        case 'action':\r\n                            $('#my-cards-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"fa-repeat\" size=\"24px\" spin></ons-icon>');\r\n                            break;\r\n                    }\r\n                });\r\n\r\n                // add method to handle the loading action of the pull-to-refresh widget\r\n                $('#my-cards-pull-hook', $thisPage).get(0).onAction = function(loadingDone){\r\n                    // disable pull-to-refresh widget till loading is done\r\n                    $('#my-cards-pull-hook', $thisPage).attr(\"disabled\", true);\r\n\r\n                    // load the card data from the device secure store\r\n                    utopiasoftware.saveup.financialCardOperations.loadCardData().\r\n                    then(function(cardsArray){ // the cards array collection has been returned\r\n                        if(cardsArray.length == 0){ // there are no card data available\r\n                            // remove the page preloader progress bar\r\n                            $('.progress', $thisPage).remove();\r\n                            // display the help button\r\n                            $('#my-cards-help-1', $thisPage).css(\"display\", \"inline-block\");\r\n                            // enable the pull-to-refresh widget for the page\r\n                            $('#my-cards-pull-hook', $thisPage).removeAttr(\"disabled\");\r\n                            // display a message to inform user that there are no cards available\r\n                            $('#my-cards-page-message', $thisPage).css(\"display\", \"block\");\r\n                            // hide the error message from displaying\r\n                            $('#my-cards-page-error', $thisPage).css(\"display\", \"none\");\r\n                            // hide the my-cards-list from display\r\n                            $('#my-cards-list', $thisPage).css(\"display\", \"none\");\r\n                            // enable the 'Add Card' button\r\n                            $('#my-cards-add-card-button', $thisPage).removeAttr(\"disabled\");\r\n                            // flag that loading is done\r\n                            loadingDone();\r\n                        }\r\n                        else{ // there are card data available\r\n                            // empty the contents of the my cards list\r\n                            $('#my-cards-list', $thisPage).html(\"\");\r\n\r\n                            for(let index = 0; index < cardsArray.length; index++){ // append the stored cards to the \"My Cards\" list\r\n                                // create the card content\r\n                                let cardContent = `<div class=\"row\"><div class=\"col s1\"></div><div class=\"col s10\">\r\n                                <div class=\"card small\">\r\n                                <div class=\"card-image\" style=\"padding-top: 3%; padding-left: 3%; padding-right: 3%;\r\n                                background-image: url('${cardsArray[index].cardImage}'); background-position: center; background-size: contain; background-origin: content-box; background-repeat: no-repeat;\">\r\n                                <img src=\"css/app-images/blank.png\">\r\n                                </div>\r\n                                <div class=\"card-content\" style=\"padding-bottom: 5px;\">\r\n                                <div style=\"font-weight: bold; font-style: italic; color: #464646\">${cardsArray[index].cardNickName}</div>\r\n                                <div style=\"font-weight: bold; font-size: 0.8em; color: #464646\">${cardsArray[index].cardBrand}\r\n                                ${cardsArray[index].cardLocale == \"international\" ? \"(International)\" : \"\"}</div>\r\n                                </div>\r\n                                <div class=\"card-action\" style=\"padding: 0;\">\r\n                                <ons-button modifier=\"quiet\" disable-auto-styling class=\"right\"\r\n                                    style=\"color: #464646; padding:0; margin-top: 0.5em; margin-left: 1em; margin-right: 1em;\">\r\n                                <ons-icon icon=\"md-saveup-icon-saveup-transfer-cash\" size=\"29px\">\r\n                                </ons-icon>\r\n                                </ons-button>\r\n                                <ons-button data-id=\"${cardsArray[index].cardUniqueId}\" modifier=\"quiet\" disable-auto-styling class=\"right\"\r\n                                    style=\"color: #464646; padding:0; margin-top: 0.5em; margin-left: 1em;\"\r\n                                    onclick=\"utopiasoftware.saveup.controller.myCardsPageViewModel.editCardButtonClicked(this)\">\r\n                            <ons-icon icon=\"md-edit\" size=\"25px\">\r\n                            </ons-icon>\r\n                            </ons-button>\r\n                            <ons-button data-id=\"${cardsArray[index].cardUniqueId}\" modifier=\"quiet\" disable-auto-styling class=\"right\"\r\n                                    style=\"color: #464646; padding:0; margin-top: 0.5em; margin-left: 1em;\"\r\n                                    onclick=\"utopiasoftware.saveup.controller.myCardsPageViewModel.deleteCardButtonClicked(this)\">\r\n                            <ons-icon icon=\"md-delete\" size=\"25px\">\r\n                            </ons-icon>\r\n                            </ons-button>\r\n                                </div>\r\n                                </div>\r\n                                </div>\r\n                                <div class=\"col s1\"></div>\r\n                                </div>` ;\r\n                                // append the card content to the \"My Card\" list\r\n                                $('#my-cards-list', $thisPage).append(cardContent);\r\n                            }\r\n                            // remove the page preloader progress bar\r\n                            $('.progress', $thisPage).remove();\r\n                            // display the help button\r\n                            $('#my-cards-help-1', $thisPage).css(\"display\", \"inline-block\");\r\n                            // enable the pull-to-refresh widget for the page\r\n                            $('#my-cards-pull-hook', $thisPage).removeAttr(\"disabled\");\r\n                            // hide message to inform user that there are no cards available\r\n                            $('#my-cards-page-message', $thisPage).css(\"display\", \"none\");\r\n                            // hide the error message from displaying\r\n                            $('#my-cards-page-error', $thisPage).css(\"display\", \"none\");\r\n                            // display the my-cards-list\r\n                            $('#my-cards-list', $thisPage).css(\"display\", \"block\");\r\n                            // enable the 'Add Card' button\r\n                            $('#my-cards-add-card-button', $thisPage).removeAttr(\"disabled\");\r\n                            // flag that loading is done\r\n                            loadingDone();\r\n                        }\r\n                    }).\r\n                    catch(function(){ // an error occurred, so display the error message to the user\r\n                        // remove the page preloader progress bar\r\n                        $('.progress', $thisPage).remove();\r\n                        // display the help button\r\n                        $('#my-cards-help-1', $thisPage).css(\"display\", \"inline-block\");\r\n                        // enable the pull-to-refresh widget for the page\r\n                        $('#my-cards-pull-hook', $thisPage).removeAttr(\"disabled\");\r\n                        // hide a message to inform user that there are no cards available\r\n                        $('#my-cards-page-message', $thisPage).css(\"display\", \"none\");\r\n                        // display the error message to user\r\n                        $('#my-cards-page-error', $thisPage).css(\"display\", \"block\");\r\n                        // hide the my-cards-list from display\r\n                        $('#my-cards-list', $thisPage).css(\"display\", \"none\");\r\n                        // disable the 'Add Card' button\r\n                        $('#my-cards-add-card-button', $thisPage).attr(\"disabled\", true);\r\n                        // flag that loading is done\r\n                        loadingDone();\r\n                    });\r\n                };\r\n\r\n                // load the card data from the device secure store\r\n                utopiasoftware.saveup.financialCardOperations.loadCardData().\r\n                then(function(cardsArray){ // the cards array collection has been returned\r\n                    if(cardsArray.length == 0){ // there are no card data available\r\n                        // remove the page preloader progress bar\r\n                        $('.progress', $thisPage).remove();\r\n                        // display the help button\r\n                        $('#my-cards-help-1', $thisPage).css(\"display\", \"inline-block\");\r\n                        // enable the pull-to-refresh widget for the page\r\n                        $('#my-cards-pull-hook', $thisPage).removeAttr(\"disabled\");\r\n                        // display a message to inform user that there are no cards available\r\n                        $('#my-cards-page-message', $thisPage).css(\"display\", \"block\");\r\n                        // hide the error message from displaying\r\n                        $('#my-cards-page-error', $thisPage).css(\"display\", \"none\");\r\n                        // hide the my-cards-list from display\r\n                        $('#my-cards-list', $thisPage).css(\"display\", \"none\");\r\n                        // enable the 'Add Card' button\r\n                        $('#my-cards-add-card-button', $thisPage).removeAttr(\"disabled\");\r\n                    }\r\n                    else{ // there are card data available\r\n                        // empty the contents of the my cards list\r\n                        $('#my-cards-list', $thisPage).html(\"\");\r\n\r\n                        for(let index = 0; index < cardsArray.length; index++){ // append the stored cards to the \"My Cards\" list\r\n                            // create the card content\r\n                            let cardContent = `<div class=\"row\"><div class=\"col s1\"></div><div class=\"col s10\">\r\n                            <div class=\"card small\">\r\n                            <div class=\"card-image\" style=\"padding-top: 3%; padding-left: 3%; padding-right: 3%;\r\n                            background-image: url('${cardsArray[index].cardImage}'); background-position: center; background-size: contain; background-origin: content-box; background-repeat: no-repeat;\">\r\n                            <img src=\"css/app-images/blank.png\">\r\n                            </div>\r\n                            <div class=\"card-content\" style=\"padding-bottom: 5px;\">\r\n                            <div style=\"font-weight: bold; font-style: italic; color: #464646\">${cardsArray[index].cardNickName}</div>\r\n                            <div style=\"font-weight: bold; font-size: 0.8em; color: #464646\">${cardsArray[index].cardBrand}\r\n                            ${cardsArray[index].cardLocale == \"international\" ? \"(International)\" : \"\"}</div>\r\n                            </div>\r\n                            <div class=\"card-action\" style=\"padding: 0;\">\r\n                            <ons-button modifier=\"quiet\" disable-auto-styling class=\"right\"\r\n                                    style=\"color: #464646; padding:0; margin-top: 0.5em; margin-left: 1em; margin-right: 1em;\">\r\n                            <ons-icon icon=\"md-saveup-icon-saveup-transfer-cash\" size=\"29px\">\r\n                            </ons-icon>\r\n                            </ons-button>\r\n                            <ons-button data-id=\"${cardsArray[index].cardUniqueId}\" modifier=\"quiet\" disable-auto-styling class=\"right\"\r\n                                    style=\"color: #464646; padding:0; margin-top: 0.5em; margin-left: 1em;\"\r\n                                    onclick=\"utopiasoftware.saveup.controller.myCardsPageViewModel.editCardButtonClicked(this)\">\r\n                            <ons-icon icon=\"md-edit\" size=\"25px\">\r\n                            </ons-icon>\r\n                            </ons-button>\r\n                            <ons-button data-id=\"${cardsArray[index].cardUniqueId}\" modifier=\"quiet\" disable-auto-styling class=\"right\"\r\n                                    style=\"color: #464646; padding:0; margin-top: 0.5em; margin-left: 1em;\"\r\n                                    onclick=\"utopiasoftware.saveup.controller.myCardsPageViewModel.deleteCardButtonClicked(this)\">\r\n                            <ons-icon icon=\"md-delete\" size=\"25px\">\r\n                            </ons-icon>\r\n                            </ons-button>\r\n                            </div>\r\n                            </div>\r\n                            </div>\r\n                            <div class=\"col s1\"></div>\r\n                            </div>` ;\r\n                            // append the card content to the \"My Card\" list\r\n                            $('#my-cards-list', $thisPage).append(cardContent);\r\n                        }\r\n                        // remove the page preloader progress bar\r\n                        $('.progress', $thisPage).remove();\r\n                        // display the help button\r\n                        $('#my-cards-help-1', $thisPage).css(\"display\", \"inline-block\");\r\n                        // enable the pull-to-refresh widget for the page\r\n                        $('#my-cards-pull-hook', $thisPage).removeAttr(\"disabled\");\r\n                        // hide message to inform user that there are no cards available\r\n                        $('#my-cards-page-message', $thisPage).css(\"display\", \"none\");\r\n                        // hide the error message from displaying\r\n                        $('#my-cards-page-error', $thisPage).css(\"display\", \"none\");\r\n                        // display the my-cards-list\r\n                        $('#my-cards-list', $thisPage).css(\"display\", \"block\");\r\n                        // enable the 'Add Card' button\r\n                        $('#my-cards-add-card-button', $thisPage).removeAttr(\"disabled\");\r\n                    }\r\n                }).\r\n                catch(function(){ // an error occurred, so display the error message to the user\r\n                    // remove the page preloader progress bar\r\n                    $('.progress', $thisPage).remove();\r\n                    // display the help button\r\n                    $('#my-cards-help-1', $thisPage).css(\"display\", \"inline-block\");\r\n                    // enable the pull-to-refresh widget for the page\r\n                    $('#my-cards-pull-hook', $thisPage).removeAttr(\"disabled\");\r\n                    // hide a message to inform user that there are no cards available\r\n                    $('#my-cards-page-message', $thisPage).css(\"display\", \"none\");\r\n                    // display the error message to user\r\n                    $('#my-cards-page-error', $thisPage).css(\"display\", \"block\");\r\n                    // hide the my-cards-list from display\r\n                    $('#my-cards-list', $thisPage).css(\"display\", \"none\");\r\n                    // disable the 'Add Card' button\r\n                    $('#my-cards-add-card-button', $thisPage).attr(\"disabled\", true);\r\n                });\r\n\r\n                // hide the loader\r\n                $('#loader-modal').get(0).hide();\r\n\r\n            }\r\n\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         *\r\n         * @param event\r\n         */\r\n        pageShow: function(event){\r\n            var $thisPage = $(event.target); // get the current page shown\r\n\r\n            // check if the data on the page should be refreshed\r\n            if($('#app-main-navigator').get(0).topPage.data && $('#app-main-navigator').get(0).topPage.data.refresh\r\n            && $('#app-main-navigator').get(0).topPage.data.refresh === true){ // user wants this page refreshed\r\n                // add & display the preloader for the page\r\n                $('#my-cards-pull-hook', $thisPage).after('<div class=\"progress\"><div class=\"indeterminate\"></div> </div>');\r\n\r\n                // load the card data from the device secure store\r\n                utopiasoftware.saveup.financialCardOperations.loadCardData().\r\n                then(function(cardsArray){ // the cards array collection has been returned\r\n                    if(cardsArray.length == 0){ // there are no card data available\r\n                        // remove the page preloader progress bar\r\n                        $('.progress', $thisPage).remove();\r\n                        // display the help button\r\n                        $('#my-cards-help-1', $thisPage).css(\"display\", \"inline-block\");\r\n                        // enable the pull-to-refresh widget for the page\r\n                        $('#my-cards-pull-hook', $thisPage).removeAttr(\"disabled\");\r\n                        // display a message to inform user that there are no cards available\r\n                        $('#my-cards-page-message', $thisPage).css(\"display\", \"block\");\r\n                        // hide the error message from displaying\r\n                        $('#my-cards-page-error', $thisPage).css(\"display\", \"none\");\r\n                        // hide the my-cards-list from display\r\n                        $('#my-cards-list', $thisPage).css(\"display\", \"none\");\r\n                        // enable the 'Add Card' button\r\n                        $('#my-cards-add-card-button', $thisPage).removeAttr(\"disabled\");\r\n                    }\r\n                    else{ // there are card data available\r\n                        // empty the contents of the my cards list\r\n                        $('#my-cards-list', $thisPage).html(\"\");\r\n\r\n                        for(let index = 0; index < cardsArray.length; index++){ // append the stored cards to the \"My Cards\" list\r\n                            // create the card content\r\n                            let cardContent = `<div class=\"row\"><div class=\"col s1\"></div><div class=\"col s10\">\r\n                            <div class=\"card small\">\r\n                            <div class=\"card-image\" style=\"padding-top: 3%; padding-left: 3%; padding-right: 3%;\r\n                            background-image: url('${cardsArray[index].cardImage}'); background-position: center; background-size: contain; background-origin: content-box; background-repeat: no-repeat;\">\r\n                            <img src=\"css/app-images/blank.png\">\r\n                            </div>\r\n                            <div class=\"card-content\" style=\"padding-bottom: 5px;\">\r\n                            <div style=\"font-weight: bold; font-style: italic; color: #464646\">${cardsArray[index].cardNickName}</div>\r\n                            <div style=\"font-weight: bold; font-size: 0.8em; color: #464646\">${cardsArray[index].cardBrand}\r\n                            ${cardsArray[index].cardLocale == \"international\" ? \"(International)\" : \"\"}</div>\r\n                            </div>\r\n                            <div class=\"card-action\" style=\"padding: 0;\">\r\n                            <ons-button modifier=\"quiet\" disable-auto-styling class=\"right\"\r\n                                    style=\"color: #464646; padding:0; margin-top: 0.5em; margin-left: 1em; margin-right: 1em;\">\r\n                            <ons-icon icon=\"md-saveup-icon-saveup-transfer-cash\" size=\"29px\">\r\n                            </ons-icon>\r\n                            </ons-button>\r\n                            <ons-button data-id=\"${cardsArray[index].cardUniqueId}\" modifier=\"quiet\" disable-auto-styling class=\"right\"\r\n                                    style=\"color: #464646; padding:0; margin-top: 0.5em; margin-left: 1em;\"\r\n                                    onclick=\"utopiasoftware.saveup.controller.myCardsPageViewModel.editCardButtonClicked(this)\">\r\n                            <ons-icon icon=\"md-edit\" size=\"25px\">\r\n                            </ons-icon>\r\n                            </ons-button>\r\n                            <ons-button data-id=\"${cardsArray[index].cardUniqueId}\" modifier=\"quiet\" disable-auto-styling class=\"right\"\r\n                                    style=\"color: #464646; padding:0; margin-top: 0.5em; margin-left: 1em;\"\r\n                                    onclick=\"utopiasoftware.saveup.controller.myCardsPageViewModel.deleteCardButtonClicked(this)\">\r\n                            <ons-icon icon=\"md-delete\" size=\"25px\">\r\n                            </ons-icon>\r\n                            </ons-button>\r\n                            </div>\r\n                            </div>\r\n                            </div>\r\n                            <div class=\"col s1\"></div>\r\n                            </div>` ;\r\n                            // append the card content to the \"My Card\" list\r\n                            $('#my-cards-list', $thisPage).append(cardContent);\r\n                        }\r\n                        // remove the page preloader progress bar\r\n                        $('.progress', $thisPage).remove();\r\n                        // display the help button\r\n                        $('#my-cards-help-1', $thisPage).css(\"display\", \"inline-block\");\r\n                        // enable the pull-to-refresh widget for the page\r\n                        $('#my-cards-pull-hook', $thisPage).removeAttr(\"disabled\");\r\n                        // hide message to inform user that there are no cards available\r\n                        $('#my-cards-page-message', $thisPage).css(\"display\", \"none\");\r\n                        // hide the error message from displaying\r\n                        $('#my-cards-page-error', $thisPage).css(\"display\", \"none\");\r\n                        // display the my-cards-list\r\n                        $('#my-cards-list', $thisPage).css(\"display\", \"block\");\r\n                        // enable the 'Add Card' button\r\n                        $('#my-cards-add-card-button', $thisPage).removeAttr(\"disabled\");\r\n                    }\r\n                }).\r\n                catch(function(){ // an error occurred, so display the error message to the user\r\n                    // remove the page preloader progress bar\r\n                    $('.progress', $thisPage).remove();\r\n                    // display the help button\r\n                    $('#my-cards-help-1', $thisPage).css(\"display\", \"inline-block\");\r\n                    // enable the pull-to-refresh widget for the page\r\n                    $('#my-cards-pull-hook', $thisPage).removeAttr(\"disabled\");\r\n                    // hide a message to inform user that there are no cards available\r\n                    $('#my-cards-page-message', $thisPage).css(\"display\", \"none\");\r\n                    // display the error message to user\r\n                    $('#my-cards-page-error', $thisPage).css(\"display\", \"block\");\r\n                    // hide the my-cards-list from display\r\n                    $('#my-cards-list', $thisPage).css(\"display\", \"none\");\r\n                    // disable the 'Add Card' button\r\n                    $('#my-cards-add-card-button', $thisPage).attr(\"disabled\", true);\r\n                });\r\n            }\r\n\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when the 'Add Card' button is clicked\r\n         */\r\n        addCardButtonClicked: function(){\r\n            $('#app-main-navigator').get(0).pushPage(\"add-card-page.html\", {\r\n                animation: \"lift-md\"\r\n            });\r\n        },\r\n\r\n\r\n        /**\r\n         * method is used to trigger the delete operation of a financial card\r\n         * and updating the user-interface (UI)\r\n         *\r\n         * @param buttonElem\r\n         */\r\n        deleteCardButtonClicked: function(buttonElem){\r\n\r\n            // confirm that user wants to delete the card before proceeding\r\n            ons.notification.confirm('Do you want to delete this card?', {title: 'Confirm Delete',\r\n                    buttonLabels: ['No', 'Yes']}) // Ask for confirmation\r\n                .then(function(index) {\r\n                    if (index === 1) { // YES button clicked\r\n                        // call the utility method used to delete a specified card\r\n                        utopiasoftware.saveup.financialCardOperations.deleteCard($(buttonElem).attr(\"data-id\")).\r\n                        then(function(){ // card has been deleted\r\n                            $(buttonElem).closest('.row').remove(); // remove the card from display\r\n                            // inform the user that card was deleted\r\n                            Materialize.toast('Card deleted', 3000);\r\n                        }).\r\n                        catch(function(){\r\n                            // inform the user that the specified financial card could not be deleted\r\n                            window.plugins.toast.showWithOptions({\r\n                                message: \"Sorry, the bank card could not be deleted.\\n Try again\",\r\n                                duration: 4000,\r\n                                position: \"top\",\r\n                                styling: {\r\n                                    opacity: 1,\r\n                                    backgroundColor: '#ff0000', //red\r\n                                    textColor: '#FFFFFF',\r\n                                    textSize: 14\r\n                                }\r\n                            }, function(toastEvent){\r\n                                if(toastEvent && toastEvent.event == \"touch\"){ // user tapped the toast, so hide toast immediately\r\n                                    window.plugins.toast.hide();\r\n                                }\r\n                            });\r\n                        });\r\n                    }\r\n                });\r\n        },\r\n\r\n\r\n        /**\r\n         * method is used to trigger the edit operation of a financial card\r\n         * and updating/changing the user-interface (UI)\r\n         *\r\n         * @param buttonElem\r\n         */\r\n        editCardButtonClicked: function(buttonElem){\r\n            $('#app-main-navigator').get(0).pushPage(\"add-card-page.html\", {\r\n                animation: \"lift-md\", data: {edit: $(buttonElem).attr(\"data-id\")}\r\n            });\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * object is view-model for add-card page\r\n     */\r\n    addCardPageViewModel: {\r\n\r\n        /**\r\n         * used to hold the parsley form validation object for the page\r\n         */\r\n        formValidator: null,\r\n\r\n        /**\r\n         * property used to keep track of the immediate last scroll position of the\r\n         * page content\r\n         */\r\n        previousScrollPosition: 0,\r\n\r\n        /**\r\n         * property used to keep track of the current scroll position of the\r\n         * page content\r\n         */\r\n        currentScrollPosition: 0,\r\n\r\n        /**\r\n         * property stores the brand of the new financial card being added.\r\n         * currently, Possible values are- Mastercard, Visa or Verve.\r\n         * Default value is an empty string\r\n         */\r\n        newCardBrand: \"Unknown\",\r\n\r\n        /**\r\n         * property holds the 'general' locale of the new financial card being added.\r\n         * currently, possible values are - local or international\r\n         */\r\n        newCardLocale: \"Unknown\",\r\n\r\n        /**\r\n         * poperty holds the image to be used for the new card\r\n         */\r\n        newCardImage: \"\",\r\n\r\n        cardImageRandomNum: null,\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n            // find all onsen-ui input targets and insert a special class to prevent materialize-css from updating the styles\r\n            $('ons-input input', $thisPage).addClass('utopiasoftware-no-style');\r\n            // disable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').removeAttr(\"swipeable\", true);\r\n\r\n            // reset the previous & current scroll positions of the page contents\r\n            utopiasoftware.saveup.controller.addCardPageViewModel.previousScrollPosition = 0;\r\n            utopiasoftware.saveup.controller.addCardPageViewModel.currentScrollPosition = 0;\r\n\r\n            // reset the new card brand, card general locale & card image\r\n            utopiasoftware.saveup.controller.addCardPageViewModel.newCardBrand = \"Unknown\";\r\n            utopiasoftware.saveup.controller.addCardPageViewModel.newCardLocale = \"Unknown\";\r\n            utopiasoftware.saveup.controller.addCardPageViewModel.newCardImage = \"\";\r\n\r\n            // generate the random number used to display the financial card image\r\n            var randomGen = new Random(Random.engines.nativeMath); // random number generator\r\n            // generate the random number\r\n            utopiasoftware.saveup.controller.addCardPageViewModel.cardImageRandomNum = randomGen.integer(1, 3);\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            function loadPageOnAppReady(){\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if(!ons.isReady() || utopiasoftware.saveup.model.isAppReady === false){\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n\r\n                // listen for the back button event\r\n                $('#app-main-navigator').get(0).topPage.onDeviceBackButton = function(){\r\n\r\n                    // check if the side menu is open\r\n                    if($('ons-splitter').get(0).left.isOpen){ // side menu open, so close it\r\n                        $('ons-splitter').get(0).left.close();\r\n                        return; // exit the method\r\n                    }\r\n\r\n                    $('#app-main-navigator').get(0).popPage();\r\n                };\r\n\r\n                // listen for the scroll event of the page content\r\n                $('#add-card-page .page__content').on(\"scroll\", utopiasoftware.saveup.controller.addCardPageViewModel.pageContentScrolled);\r\n\r\n                // initialise the form validation\r\n                utopiasoftware.saveup.controller.addCardPageViewModel.formValidator = $('#add-card-form').parsley();\r\n\r\n                // attach listener for the 'save' button click\r\n                $('#add-card-save-button').get(0).onclick = function(){\r\n                    // run the validation method for the create account form\r\n                    utopiasoftware.saveup.controller.addCardPageViewModel.formValidator.whenValidate();\r\n                };\r\n\r\n                // listen for form field validation failure event\r\n                utopiasoftware.saveup.controller.addCardPageViewModel.formValidator.on('field:ajaxoptions',\r\n                    function(fieldInstance, ajaxOptions){\r\n                        // edit the ajax options object to include the necessary authorization header\r\n                        ajaxOptions.headers = {\"Authorization\":\"Bearer \" + utopiasoftware.saveup.paystackObject.key.secret};\r\n                        // display the loading icon for card number validation\r\n                        $('#add-card-number-validation-loading', $thisPage).css(\"display\", \"block\");\r\n                    });\r\n\r\n                // listen for form field validation failure event\r\n                utopiasoftware.saveup.controller.addCardPageViewModel.formValidator.on('field:error', function(fieldInstance) {\r\n                    // get the element that triggered the field validation error and use it to display tooltip\r\n                    // display tooltip\r\n                    $(fieldInstance.$element).parent().find('label:eq(0)').addClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                    $(fieldInstance.$element).parent().find('label:eq(0)').attr(\"data-hint\", fieldInstance.getErrorsMessages()[0]);\r\n                    // check if the element that triggered that validation error was the card number input\r\n                    if($(fieldInstance.$element).is('#add-card-card-number')){ // it is the card number input\r\n                        // hide the loading icon\r\n                        $('#add-card-number-validation-loading', $thisPage).css(\"display\", \"none\");\r\n                        // hide the card image row\r\n                        $('#add-card-image-container', $thisPage).css(\"display\", \"none\");\r\n                    }\r\n                });\r\n\r\n                // listen for form field validation success event\r\n                utopiasoftware.saveup.controller.addCardPageViewModel.formValidator.on('field:success', function(fieldInstance) {\r\n                    // remove tooltip from element\r\n                    $(fieldInstance.$element).parent().find('label:eq(0)').removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                    $(fieldInstance.$element).parent().find('label:eq(0)').removeAttr(\"data-hint\");\r\n                    // check if the element that triggered that validation success was the card number input\r\n                    if($(fieldInstance.$element).is('#add-card-card-number')){ // it is the card number input\r\n                        // hide the loading icon\r\n                        $('#add-card-number-validation-loading', $thisPage).css(\"display\", \"none\");\r\n                        // check if the user request for remote card number validation\r\n                        if($('#add-card-verify-card').is(\":checked\")){ //user asked for remote validation\r\n                            // display an image to indicate the card type which the card number verified based on card brand\r\n                            switch(utopiasoftware.saveup.controller.addCardPageViewModel.newCardBrand){\r\n                                case \"Mastercard\":\r\n                                    if(utopiasoftware.saveup.controller.addCardPageViewModel.newCardLocale == \"local\"){\r\n                                        // this is a local mastercard\r\n                                        // set the image for the card\r\n                                        utopiasoftware.saveup.controller.addCardPageViewModel.\r\n                                            newCardImage = \"css/app-images/mastercard-local-\" +\r\n                                            utopiasoftware.saveup.controller.addCardPageViewModel.cardImageRandomNum + \".png\";\r\n                                        $('#add-card-image').attr(\"src\", \"css/app-images/mastercard-local-\" +\r\n                                            utopiasoftware.saveup.controller.addCardPageViewModel.cardImageRandomNum + \".png\"\r\n                                        );\r\n                                        // update the card type display name\r\n                                        $('#add-card-image-type').html(\"Mastercard\");\r\n                                    }\r\n                                    else{\r\n                                        // this is a international mastercard\r\n                                        // set the image for the card\r\n                                        utopiasoftware.saveup.controller.addCardPageViewModel.\r\n                                            newCardImage = \"css/app-images/mastercard-international-\" +\r\n                                            utopiasoftware.saveup.controller.addCardPageViewModel.cardImageRandomNum + \".png\";\r\n                                        $('#add-card-image').attr(\"src\", \"css/app-images/mastercard-international-\" +\r\n                                            utopiasoftware.saveup.controller.addCardPageViewModel.cardImageRandomNum + \".png\"\r\n                                        );\r\n                                        // update the card type display name\r\n                                        $('#add-card-image-type').html(\"Mastercard (International)\");\r\n                                    }\r\n                                    break;\r\n\r\n                                case \"Visa\":\r\n                                    if(utopiasoftware.saveup.controller.addCardPageViewModel.newCardLocale == \"local\"){\r\n                                        // this is a local visa\r\n                                        // set the image for the card\r\n                                        utopiasoftware.saveup.controller.addCardPageViewModel.\r\n                                            newCardImage = \"css/app-images/visacard-local-\" +\r\n                                            utopiasoftware.saveup.controller.addCardPageViewModel.cardImageRandomNum + \".png\";\r\n                                        $('#add-card-image').attr(\"src\", \"css/app-images/visacard-local-\" +\r\n                                            utopiasoftware.saveup.controller.addCardPageViewModel.cardImageRandomNum + \".png\"\r\n                                        );\r\n                                        // update the card type display name\r\n                                        $('#add-card-image-type').html(\"Visa\");\r\n                                    }\r\n                                    else{\r\n                                        // this is a international Visa card\r\n                                        // set the image for the card\r\n                                        utopiasoftware.saveup.controller.addCardPageViewModel.\r\n                                            newCardImage = \"css/app-images/visacard-international-\" +\r\n                                            utopiasoftware.saveup.controller.addCardPageViewModel.cardImageRandomNum + \".png\";\r\n                                        $('#add-card-image').attr(\"src\", \"css/app-images/visacard-international-\" +\r\n                                            utopiasoftware.saveup.controller.addCardPageViewModel.cardImageRandomNum + \".png\"\r\n                                        );\r\n                                        // update the card type display name\r\n                                        $('#add-card-image-type').html(\"Visa (International)\");\r\n                                    }\r\n                                    break;\r\n\r\n                                case \"Verve\":\r\n                                    if(utopiasoftware.saveup.controller.addCardPageViewModel.newCardLocale == \"local\"){\r\n                                        // this is a local verve\r\n                                        // set the image for the card\r\n                                        utopiasoftware.saveup.controller.addCardPageViewModel.\r\n                                            newCardImage = \"css/app-images/verve-local-\" +\r\n                                            utopiasoftware.saveup.controller.addCardPageViewModel.cardImageRandomNum + \".png\";\r\n                                        $('#add-card-image').attr(\"src\", \"css/app-images/verve-local-\" +\r\n                                            utopiasoftware.saveup.controller.addCardPageViewModel.cardImageRandomNum + \".png\"\r\n                                        );\r\n                                        // update the card type display name\r\n                                        $('#add-card-image-type').html(\"Verve\");\r\n                                    }\r\n                                    break;\r\n                            }\r\n\r\n                            // display the card image row\r\n                            $('#add-card-image-container', $thisPage).css(\"display\", \"block\");\r\n                        }\r\n                        else{ // user did not ask for remote card validation\r\n                            // set the image for the card\r\n                            utopiasoftware.saveup.controller.addCardPageViewModel.\r\n                                newCardImage = \"css/app-images/unknown-local-\" +\r\n                                utopiasoftware.saveup.controller.addCardPageViewModel.cardImageRandomNum + \".png\";\r\n                            // set new card brand as unknown\r\n                            utopiasoftware.saveup.controller.addCardPageViewModel.newCardBrand = \"Unknown\";\r\n                            // set the new card locale as unknown\r\n                            utopiasoftware.saveup.controller.addCardPageViewModel.newCardLocale = \"Unknown\";\r\n                            // hide the card image row\r\n                            $('#add-card-image-container', $thisPage).css(\"display\", \"none\");\r\n                        }\r\n                    }\r\n                });\r\n\r\n                // listen for form validation success\r\n                utopiasoftware.saveup.controller.addCardPageViewModel.formValidator.on('form:success',\r\n                    utopiasoftware.saveup.controller.addCardPageViewModel.addCardFormValidated);\r\n\r\n                /** dynamically create the contents of the various select elements **/\r\n                var optionTags = \"\"; // string to hold all created option tags for the Card Expiry Year\r\n                var yearOption = (new Date()).getFullYear(); // get the current year\r\n                // add current year to the options tag\r\n                optionTags += '<option value=\"' + yearOption + '\">' + yearOption + '</option>';\r\n\r\n                // add 3 more years to the option tags for the Card Expiry Year\r\n                for(var index = 0; index < 3; index++){\r\n                    // increase the yearOption by 1\r\n                    yearOption += 1;\r\n                    // add current year to the options tag\r\n                    optionTags += '<option value=\"' + yearOption + '\">' + yearOption + '</option>';\r\n                }\r\n\r\n                $('#add-card-expiry-year', $thisPage).append(optionTags); // append all the created option tags\r\n\r\n                // initialise all the select element\r\n                $('select', $thisPage).material_select();\r\n                // initialise the character counter plugin\r\n                $('#add-card-card-number', $thisPage).characterCounter();\r\n\r\n\r\n\r\n                // check if the page was sent a financial card id.\r\n                // if so preload the financial card data into the form\r\n                if($('#app-main-navigator').get(0).topPage.data && $('#app-main-navigator').get(0).topPage.data.edit){\r\n                    // get the details of the card to be edited\r\n                    utopiasoftware.saveup.financialCardOperations.\r\n                    getCard($('#app-main-navigator').get(0).topPage.data.edit).then(function(card){\r\n                        $('#add-card-page #add-card-unique-id').val(card.cardUniqueId);\r\n                        $('#add-card-page #add-card-card-holder').val(card.cardHolderName);\r\n                        $('#add-card-page #add-card-alias').val(card.cardNickName);\r\n                        $('#add-card-page #add-card-card-number').val(card.cardNumber);\r\n                        $('#add-card-page #add-card-cvv').val(card.cvv);\r\n                        $('#add-card-page #add-card-expiry-month').val(card.cardExpiryMonth);\r\n                        $('#add-card-page #hidden-card-expiry-month-input').val(card.cardExpiryMonth);\r\n                        $('#add-card-page #add-card-expiry-year').val(card.cardExpiryYear);\r\n                        $('#add-card-page #hidden-card-expiry-year-input').val(card.cardExpiryYear);\r\n                        utopiasoftware.saveup.controller.addCardPageViewModel.newCardBrand = card.cardBrand;\r\n                        $('#add-card-page #add-card-verify-card').prop(\"checked\", card.cardBrand !== \"Unknown\");\r\n                        utopiasoftware.saveup.controller.addCardPageViewModel.newCardLocale = card.cardLocale;\r\n                        utopiasoftware.saveup.controller.addCardPageViewModel.newCardImage = card.cardImage;\r\n\r\n                        // update the card image file\r\n                        $('#add-card-page #add-card-image').attr(\"src\", utopiasoftware.saveup.controller.addCardPageViewModel.newCardImage);\r\n                        // display the card image row\r\n                        $('#add-card-image-container', $thisPage).css(\"display\", \"block\");\r\n\r\n                        // re-update the form input fields\r\n                        Materialize.updateTextFields();\r\n                        //re-initialise the form select elements\r\n                        $('select', $thisPage).material_select();\r\n\r\n                        // remove the progress indeterminate loader\r\n                        $('.progress', $thisPage).remove();\r\n                        // make the add card form visible\r\n                        $('#add-card-form', $thisPage).css(\"display\", \"block\");\r\n                        // enable the 'Cancel' & 'Save' buttons\r\n                        $('#add-card-cancel-button, #add-card-save-button', $thisPage).removeAttr(\"disabled\");\r\n                        // hide the loader\r\n                        $('#loader-modal').get(0).hide();\r\n                    });\r\n                }\r\n                else {\r\n                    // remove the progress indeterminate loader\r\n                    $('.progress', $thisPage).remove();\r\n                    // make the add card form visible\r\n                    $('#add-card-form', $thisPage).css(\"display\", \"block\");\r\n                    // enable the 'Cancel' & 'Save' buttons\r\n                    $('#add-card-cancel-button, #add-card-save-button', $thisPage).removeAttr(\"disabled\");\r\n                    // hide the loader\r\n                    $('#loader-modal').get(0).hide();\r\n                }\r\n\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the create-account page is hidden\r\n         * @param event\r\n         */\r\n        pageHide: (event) => {\r\n            try {\r\n                // remove any tooltip being displayed on all forms on the page\r\n                $('#add-card-page [data-hint]').removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                $('#add-card-page [data-hint]').removeAttr(\"data-hint\");\r\n                // reset the form validator object on the page\r\n                utopiasoftware.saveup.controller.addCardPageViewModel.formValidator.reset();\r\n            }\r\n            catch(err){}\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the sign-in page is destroyed\r\n         * @param event\r\n         */\r\n        pageDestroy: (event) => {\r\n            try{\r\n                // remove any tooltip being displayed on all forms on the page\r\n                $('#add-card-page [data-hint]').removeClass(\"hint--always hint--info hint--medium hint--rounded hint--no-animate\");\r\n                $('#add-card-page [data-hint]').removeAttr(\"data-hint\");\r\n                // destroy the form validator objects on the page\r\n                utopiasoftware.saveup.controller.addCardPageViewModel.formValidator.destroy();\r\n                // destroy the form inputs which need to be destroyed\r\n                $('#add-card-page select').material_select('destroy');\r\n                $('#add-card-page #add-card-card-number').off();\r\n                $('#add-card-page #add-card-card-number').removeData();\r\n            }\r\n            catch(err){}\r\n        },\r\n\r\n        /**\r\n         * method is triggered when add card form is successfully validated\r\n         */\r\n        addCardFormValidated: function(){\r\n\r\n            // display the secure storage modal to indicate that card is being securely stored\r\n            $('#secure-storage-modal .modal-message').html(\"Storing Card on Device...\");\r\n            $('#secure-storage-modal').get(0).show(); // show loader\r\n\r\n            // check if this is an EDIT or CREATE operation\r\n            if($('#app-main-navigator').get(0).topPage.data && $('#app-main-navigator').get(0).topPage.data.edit){ //this is an EDIT operation\r\n                // card the utility method used to delete a specified card\r\n                utopiasoftware.saveup.financialCardOperations.\r\n                deleteCard($('#app-main-navigator').get(0).topPage.data.edit).\r\n                then(function(){\r\n                    // create an edited card data\r\n                    var editedCardData = {\r\n                        cardUniqueId: $('#app-main-navigator').get(0).topPage.data.edit,\r\n                        cardHolderName: $('#add-card-form #add-card-card-holder').val(),\r\n                        cardNickName: $('#add-card-form #add-card-alias').val(),\r\n                        cardNumber: $('#add-card-form #add-card-card-number').val(),\r\n                        cvv: $('#add-card-form #add-card-cvv').val(),\r\n                        cardExpiryMonth: $('#add-card-form #add-card-expiry-month').val(),\r\n                        cardExpiryYear: $('#add-card-form #add-card-expiry-year').val(),\r\n                        cardBrand: utopiasoftware.saveup.controller.addCardPageViewModel.newCardBrand,\r\n                        cardLocale: utopiasoftware.saveup.controller.addCardPageViewModel.newCardLocale,\r\n                        cardImage: utopiasoftware.saveup.controller.addCardPageViewModel.newCardImage\r\n                    };\r\n\r\n                    // card the utility method used to add a specified card to the card collection\r\n                    return utopiasoftware.saveup.financialCardOperations.\r\n                    addCard(editedCardData);\r\n                }).\r\n                then(function(){\r\n                    // wait for approximately 4 secs for the saving animation to run (at least once before concluding animation\r\n                    window.setTimeout(function(){\r\n                        // reset the form validator object on the page\r\n                        utopiasoftware.saveup.controller.addCardPageViewModel.formValidator.reset();\r\n                        // reset the form object\r\n                        $('#add-card-page #add-card-form').get(0).reset();\r\n                        // reset the new card brand, card general locale & card image\r\n                        utopiasoftware.saveup.controller.addCardPageViewModel.newCardBrand = \"Unknown\";\r\n                        utopiasoftware.saveup.controller.addCardPageViewModel.newCardLocale = \"Unknown\";\r\n                        utopiasoftware.saveup.controller.addCardPageViewModel.newCardImage = \"\";\r\n                        // hide the card image row\r\n                        $('#add-card-page #add-card-image-container').css(\"display\", \"none\");\r\n                        // reset the page scroll position to the top\r\n                        $('#add-card-page .page__content').scrollTop(0);\r\n\r\n                        $('#secure-storage-modal').get(0).hide(); // hide loader\r\n                        // inform user that add has been successfully added to secure storage\r\n                        Materialize.toast('Card updated successfully', 4000);\r\n                    }, 4000);\r\n                }).\r\n                catch(function(){\r\n                    ons.notification.alert({title: \"Update Error\",\r\n                        messageHTML: '<ons-icon icon=\"md-close-circle-o\" size=\"30px\" ' +\r\n                        'style=\"color: red;\"></ons-icon> <span>' + (err.message || \"\") + ' Sorry, this card could not be updated. ' +\r\n                        '<br>You can try again' + '</span>',\r\n                        cancelable: true\r\n                    });\r\n                });\r\n            }\r\n            else { // this is a CREATE/ADD OPERATION\r\n\r\n                var newCardData = {\r\n                    cardUniqueId: \"\" + utopiasoftware.saveup.model.deviceUUID + Date.now(),\r\n                    cardHolderName: $('#add-card-form #add-card-card-holder').val(),\r\n                    cardNickName: $('#add-card-form #add-card-alias').val(),\r\n                    cardNumber: $('#add-card-form #add-card-card-number').val(),\r\n                    cvv: $('#add-card-form #add-card-cvv').val(),\r\n                    cardExpiryMonth: $('#add-card-form #add-card-expiry-month').val(),\r\n                    cardExpiryYear: $('#add-card-form #add-card-expiry-year').val(),\r\n                    cardBrand: utopiasoftware.saveup.controller.addCardPageViewModel.newCardBrand,\r\n                    cardLocale: utopiasoftware.saveup.controller.addCardPageViewModel.newCardLocale,\r\n                    cardImage: utopiasoftware.saveup.controller.addCardPageViewModel.newCardImage\r\n                };\r\n\r\n                // get the previous stored cards on the user's device\r\n                Promise.resolve(intel.security.secureStorage.read({'id':'postcash-user-cards'})).\r\n                then(function(instanceId){\r\n                    return Promise.resolve(intel.security.secureData.getData(instanceId));\r\n                }, function(errObject){\r\n                    if(errObject.code == 1){ // the secure card storage has not been created before\r\n                        return '[]'; // return an empty card data array\r\n                    }\r\n                    else{ // another error occurred (which is considered severe)\r\n                        throw errObject;\r\n                    }\r\n                }).\r\n                then(function(secureCardDataArray){\r\n                    secureCardDataArray = JSON.parse(secureCardDataArray); // convert the string data to an object\r\n                    secureCardDataArray.unshift(newCardData); // add the card to the beginning of the array collection\r\n                    // store the updated card collection securely on user's device\r\n                    return intel.security.secureData.createFromData({'data': JSON.stringify(secureCardDataArray)});\r\n                }).\r\n                then(function(instanceId){\r\n                    return intel.security.secureStorage.write({'id':'postcash-user-cards', 'instanceID': instanceId });\r\n                }).\r\n                then(function(){\r\n                    // wait for approximately 4 secs for the saving animation to run (at least once before concluding animation\r\n                    window.setTimeout(function(){\r\n                        // reset the form validator object on the page\r\n                        utopiasoftware.saveup.controller.addCardPageViewModel.formValidator.reset();\r\n                        // reset the form object\r\n                        $('#add-card-page #add-card-form').get(0).reset();\r\n                        // reset the new card brand, card general locale & card image\r\n                        utopiasoftware.saveup.controller.addCardPageViewModel.newCardBrand = \"Unknown\";\r\n                        utopiasoftware.saveup.controller.addCardPageViewModel.newCardLocale = \"Unknown\";\r\n                        utopiasoftware.saveup.controller.addCardPageViewModel.newCardImage = \"\";\r\n                        // hide the card image row\r\n                        $('#add-card-page #add-card-image-container').css(\"display\", \"none\");\r\n                        // reset the page scroll position to the top\r\n                        $('#add-card-page .page__content').scrollTop(0);\r\n\r\n                        $('#secure-storage-modal').get(0).hide(); // hide loader\r\n                        // inform user that add has been successfully added to secure storage\r\n                        Materialize.toast('New card added successfully', 4000);\r\n                    }, 4000);\r\n                }).\r\n                catch(function(err){\r\n\r\n                    ons.notification.alert({title: \"Save Error\",\r\n                        messageHTML: '<ons-icon icon=\"md-close-circle-o\" size=\"30px\" ' +\r\n                        'style=\"color: red;\"></ons-icon> <span>' + (err.message || \"\") + ' Sorry, this card could not be added. ' +\r\n                        '<br>You can try again' + '</span>',\r\n                        cancelable: true\r\n                    });\r\n                });\r\n\r\n            }\r\n\r\n        },\r\n\r\n\r\n        /**\r\n         * method is used to check if user has asked for card number to be validated.\r\n         * It sets or remove the appropriate attributes need to activate or deactivate\r\n         * remote card validation\r\n         */\r\n        isCardNumberValidated: function(checkElem){\r\n            // check if user wants card number validated or not\r\n            if($(checkElem).is(\":checked\")){ // user wants the card number remotely validated\r\n                // add the necessary attributes to the card number input in order to enable remote card number validation\r\n                $('#add-card-card-number').attr(\"data-parsley-remote-validator\", \"financialcardcheck\");\r\n            }\r\n            else{ // user does not want card number remotely validated\r\n                // remove attributes to prevent remote card number validation\r\n                $('#add-card-card-number').removeAttr(\"data-parsley-remote-validator\");\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is used to listen for scroll event of the page content\r\n         *\r\n         * @param event\r\n         */\r\n        pageContentScrolled: function(event){\r\n\r\n            // set the current scrolltop position\r\n            utopiasoftware.saveup.controller.addCardPageViewModel.currentScrollPosition = $(this).scrollTop();\r\n\r\n            if(utopiasoftware.saveup.controller.addCardPageViewModel.currentScrollPosition >\r\n                utopiasoftware.saveup.controller.addCardPageViewModel.previousScrollPosition){ // user scrolled up\r\n                // set the current position as previous position\r\n                utopiasoftware.saveup.controller.addCardPageViewModel.previousScrollPosition =\r\n                    utopiasoftware.saveup.controller.addCardPageViewModel.currentScrollPosition;\r\n\r\n                // check if the header image left after scrolling is <= height of page toolbar\r\n                if((140 - utopiasoftware.saveup.controller.addCardPageViewModel.currentScrollPosition) <= 56){\r\n                    // the header image left after scrolling is <= height of page toolbar\r\n                    // check if the toolbar for the page has already been made opaque\r\n                    if(this.isToolBarOpaque != true){ // toolbar has not been made opaque\r\n\r\n                        $('#add-card-page ons-toolbar').removeClass(\"toolbar--transparent\"); // make the toolbar opaque\r\n                        // also pin the help header on the page just below the toolbar\r\n                        $('#add-card-page ons-list-header').css(\r\n                            {\"display\": \"block\", \"position\": \"fixed\", \"top\": \"56px\", \"width\": \"100%\"});\r\n                        this.isToolBarOpaque = true; // flag that toolbar has been made opaque\r\n                    }\r\n                }\r\n\r\n                return;\r\n            }\r\n\r\n            if(utopiasoftware.saveup.controller.addCardPageViewModel.currentScrollPosition <\r\n                utopiasoftware.saveup.controller.addCardPageViewModel.previousScrollPosition){ // user scrolled down\r\n                // set the current position as previous position\r\n                utopiasoftware.saveup.controller.addCardPageViewModel.previousScrollPosition =\r\n                    utopiasoftware.saveup.controller.addCardPageViewModel.currentScrollPosition;\r\n\r\n                // check if the header image left after scrolling is > height of page toolbar\r\n                if((140 - utopiasoftware.saveup.controller.addCardPageViewModel.currentScrollPosition) > 56){\r\n                    // the header image left after scrolling is > height of page toolbar\r\n                    // check if the toolbar for the page has already been made transparent\r\n                    if(this.isToolBarOpaque == true){ // toolbar has NOT been made transparent\r\n\r\n                        $('#add-card-page ons-toolbar').addClass(\"toolbar--transparent\"); // make the toolbar transparent\r\n                        // also unpin the help header on the page from just below the toolbar\r\n                        $('#add-card-page ons-list-header').css({\"display\": \"block\", \"position\": \"static\", \"top\": \"56px\"});\r\n                        this.isToolBarOpaque = false; // flag that toolbar has been made transparent\r\n                    }\r\n                }\r\n\r\n                return;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * custom parsley validator for financial cards (including visa, master, verve)\r\n         *\r\n         * @param jqxhr {jqueryXhr}\r\n         */\r\n        financialCardValidator: function(jqxhr){\r\n            var serverResponse = \"\"; // holds the server response\r\n\r\n            // check the validator response\r\n            if(jqxhr.status != 200){ // request was NOT success\r\n                // set new card brand as unknown\r\n                utopiasoftware.saveup.controller.addCardPageViewModel.newCardBrand = \"Unknown\";\r\n                // set the new card locale as unknown\r\n                utopiasoftware.saveup.controller.addCardPageViewModel.newCardLocale = \"Unknown\";\r\n                return false;\r\n            }\r\n\r\n            // convert the server response to json\r\n            serverResponse = JSON.parse(jqxhr.responseText.trim());\r\n\r\n            if(serverResponse.status != true){ // the server api response was NOT successful\r\n                // set new card brand as unknown\r\n                utopiasoftware.saveup.controller.addCardPageViewModel.newCardBrand = \"Unknown\";\r\n                // set the new card locale as unknown\r\n                utopiasoftware.saveup.controller.addCardPageViewModel.newCardLocale = \"Unknown\";\r\n                return false;\r\n            }\r\n\r\n            if(serverResponse.data.brand == \"\" || serverResponse.data.brand == \"Unknown\"){ // card could not be identified\r\n                // set new card brand as unknown\r\n                utopiasoftware.saveup.controller.addCardPageViewModel.newCardBrand = \"Unknown\";\r\n                // set the new card locale as unknown\r\n                utopiasoftware.saveup.controller.addCardPageViewModel.newCardLocale = \"Unknown\";\r\n                return false;\r\n            }\r\n\r\n            // get the brand of the new card\r\n            if(serverResponse.data.brand.toLocaleUpperCase().indexOf(\"MASTER\") >= 0){ // brand is a Mastercard\r\n                // set new card brand as mastercard\r\n                utopiasoftware.saveup.controller.addCardPageViewModel.newCardBrand = \"Mastercard\";\r\n            }\r\n            if(serverResponse.data.brand.toLocaleUpperCase().indexOf(\"VISA\") >= 0){ // brand is a Visa\r\n                // set new card brand as visa\r\n                utopiasoftware.saveup.controller.addCardPageViewModel.newCardBrand = \"Visa\";\r\n            }\r\n            if(serverResponse.data.brand.toLocaleUpperCase().indexOf(\"VERVE\") >= 0){ // brand is a Verve\r\n                // set new card brand as verve\r\n                utopiasoftware.saveup.controller.addCardPageViewModel.newCardBrand = \"Verve\";\r\n            }\r\n\r\n            // get the general locale of the new card\r\n            if(serverResponse.data.country_name.indexOf(\"Nigeria\") >= 0){ // card is local\r\n                // set the new card locale\r\n                utopiasoftware.saveup.controller.addCardPageViewModel.newCardLocale = \"local\";\r\n\r\n            }\r\n            if(serverResponse.data.country_name.indexOf(\"Nigeria\") < 0){ // card is international\r\n                // set the new card locale\r\n                utopiasoftware.saveup.controller.addCardPageViewModel.newCardLocale = \"international\";\r\n\r\n            }\r\n\r\n            return true; // validation successful\r\n        }\r\n\r\n    }\r\n};\r\n"]}